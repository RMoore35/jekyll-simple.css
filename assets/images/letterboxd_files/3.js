(window.webpackJsonpBolt4=window.webpackJsonpBolt4||[]).push([[3],{353:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return v}));var i=n(326),a=n(91),r=n(325),o=n(330),s=n(328),d=new a.a("SPOTX-UTILS"),l=function(e,t,n){var i=e.BoltAdManager,a=t,r=function(){if(void 0!==e.gdprConsents||void 0!==e.euconsentCookie||void 0!==e.overwolfConsent)if(/\$(REGS_GDPR|USER_CONSENT)/.test(a))a=o.k(e,a);else{var t,n=/&regs\[gdpr\]=\d{1}/,i=/&user\[consent\]=\d{1}/,r=/&gdpr=\d{1}/,s=/&gdpr_consent=\d{1}/,d=e.shouldReadGDPRConsents?1:0;void 0!==e.userIsInEU&&!1===e.userIsInEU&&(d=0),t=void 0!==e.overwolfConsent?1:e.gdprConsents,window.cmpVersion?r.test(a)?a=a.replace(r,"&gdpr=".concat(d)):a+="&gdpr=".concat(d):n.test(a)?a=a.replace(n,"&regs[gdpr]=".concat(d)):a+="&regs[gdpr]=".concat(d),d&&(window.cmpVersion?s.test(a)?a=a.replace(s,"&gdpr_consent=".concat(t)):a+="&gdpr_consent=".concat(t):i.test(a)?a=a.replace(i,"&user[consent]=".concat(t)):a+="&user[consent]=".concat(t),a+="&custom[got_consent]=".concat((!!t).toString()))}return a};if(void 0!==e.gdprConsents||"undefined"!==e.overwolfConsent)i.src=r(),n();else var s=0,d=window.setInterval((function(){void 0!==e.euconsentCookie||void 0!==e.gdprConsents?(window.clearInterval(d),i.src=r(),n()):s++>2e4&&(window.clearInterval(d),i.src=r(),n())}),50)},c=function(e,t){var n,a,s=e,d=o.d(e),l=d?d.id:null;return t=function(e,t){var n=e.BoltAdManager;if(void 0!==window.__spotxVastVersion&&(t=t.replace("/2.0/","/".concat(window.__spotxVastVersion,"/"))),n.selectedServer&&n.selectedServer._getSpotxChannelId()){var i="search.spotxchange.com/vast/",a=i.length+4,r=t.substring(t.indexOf(i)+a,t.indexOf(i)+a+6);return t.replace(r,n.selectedServer._getSpotxChannelId())}return t}(s,t),t=o.k(e,(a=-1===(n=t).indexOf("?")?"?":"&","".concat(n).concat(a,"VPAID=js&custom_skin=1&content_page_url=__WEB_URL__&player_width=__WIDTH__&player_height=__HEIGHT__"))),l&&(t+="&x_source.pchain=playwire.com:fcddfba7adc2d929&pchain=playwire.com:fcddfba7adc2d929"+"&schain=1.0,1!playwire.com,".concat(l,",1")),r.a.hasFlash&&(t+="&allow_flash_creative=1"),e.BoltAdManager.muted?(e.BoltAdManager.muted||Object(i.v)())&&(t+="&ad_volume=0"):t+="&ad_volume=1",t},u=function(e,t){var n,a,l,c,u,h,p,f,v,g,m,b,y,_,A=e.BoltAdManager,w=!!window.tyche&&window.tyche.settings,S=e.CurrentVideoConfig,k="precontent"===e.PlayerSettings.playerType,T=Object(i.i)(S),E=S.hostingId?S.hostingId:T,R="true",M=Object(i.k)(A.embedId),P=Object(i.n)(A.embedId),C=Object(i.w)(A.embedId),I=Object(i.x)(A.embedId);T&&(T=T.toString()),E&&(E=E.toString());try{R=o.e(A.selectedServer.tags).toString()}catch(e){d.error("Failed to determine site tag is syndicated or not",{message:e.message,stack:e.stack})}var B=navigator.userAgent.toLowerCase().indexOf("blitz")>=0||"ads.blitz.gg"===s.b.hostname;t+="&custom[content_page_url]=".concat("amp"===s.b.hostapp?s.b.href:s.b.origin)+"&custom[page_full_url]=".concat(B?s.b.origin:encodeURIComponent(s.b.href.replace(/\#.*$/,"")))+"&custom[player_height]=".concat(Object(i.l)(e))+"&custom[player_width]=".concat(Object(i.m)(e))+"&custom[adunit]=".concat(Object(i.e)(e))+"&custom[device_type]=".concat(r.a.isMobile?"mobile":"desktop")+"&custom[owning_pub_id]=".concat(T||"")+"&custom[player]=".concat(A.embedId)+"&custom[pub_id]=".concat(E||"")+"&custom[synd]=".concat(R)+"&custom[secure]=".concat(s.b.protocol.indexOf("https")>=0?"true":"false")+"&custom[vid_id]=".concat((null==S?void 0:null===(n=S.content)||void 0===n?void 0:n.videoId)&&S.content.videoId||"")+"&custom[vpi]=".concat(o.c().join(","))+"&custom[vid_long_form]=".concat(S.duration>6e5?"true":"false");var O,L,D=A._adSessionCount||0;(void 0!==M&&(t+="&custom[vid_location]=".concat(M)),void 0!==P&&("slideshow"===P&&(D=Object(i.q)(A.embedId)),t+="&custom[product]=".concat(P)),void 0!==C&&(t+="&custom[sticky]=".concat(C)),void 0!==I&&(t+="&custom[trendi]=".concat(I)),t+="&custom[refresh_count]=".concat(D),(null===(a=e.userBehavior)||void 0===a?void 0:a.videoAdClickRate)&&(t+="&custom[video_ad_click_rate]=".concat(e.userBehavior.videoAdClickRate)),(null===(l=e.userBehavior)||void 0===l?void 0:l.videoAdCompletionRate)&&(t+="&custom[video_ad_completion_rate]=".concat(e.userBehavior.videoAdCompletionRate)),(null===(c=window.PageOS)||void 0===c?void 0:null===(u=c.session)||void 0===u?void 0:u.getPageNumber)&&(t+="&custom[pagecount]=".concat(window.PageOS.session.getPageNumber)),e.tpsABTestKVP)&&(t+="&custom[ab_tps_test_name]=".concat(null===(O=e.tpsABTestKVP)||void 0===O?void 0:O.ab_tps_test_name),t+="&custom[ab_tps_test_case_name]=".concat(null===(L=e.tpsABTestKVP)||void 0===L?void 0:L.ab_tps_test_case_name));window._pwBoltAB&&(t+="&custom[ab_test]=".concat(window._pwBoltAB.name,"_").concat(window._pwBoltAB.type));var x=o.b(A.selectedServer.siteTags,A.embedRef);(null==x?void 0:x.hbTestName)&&(t+="&custom[hb_test]=".concat(x.hbTestName)),(null===(h=e.CurrentVideoConfig)||void 0===h?void 0:null===(p=h.advertising)||void 0===p?void 0:null===(f=p.servers[0])||void 0===f?void 0:f.abTestTagType)&&(t+="&custom[ab_server_test]=".concat(e.CurrentVideoConfig.advertising.servers[0].abTestTagType)),t+="&custom[instream]=".concat(Object(i.u)(k)),w&&(null===(v=w.config)||void 0===v?void 0:null===(g=v.features)||void 0===g?void 0:null===(m=g.video)||void 0===m?void 0:null===(b=m.interstitial)||void 0===b?void 0:b.on)&&!1===w.config.features.video.interstitial.on&&(t+="&custom[product_type]=interstitial"),w&&(null==w?void 0:w.trendiVideoSection)&&(t+="&custom[custom_path]=".concat(w.trendiVideoSection));var V=s.b.queryStringAsObject;V&&(V.utm_campaign&&(t+="&custom[utm_campaign]=".concat(V.utm_campaign)),V.utm_source&&(t+="&custom[utm_source]=".concat(V.utm_source)),V.utm_medium&&(t+="&custom[utm_medium]=".concat(V.utm_medium))),Object(i.B)(A.selectedServer.siteTags,"id")&&(t+="&custom[ws_id]=".concat(A.selectedServer.siteTags.id.toString())),t+=A.getCustomReportParams(),(null===(y=A.selectedServer)||void 0===y?void 0:null===(_=y.siteTags)||void 0===_?void 0:_.placementIds)&&A.selectedServer.siteTags.placementIds.forEach((function(e){var n,i;t+="".concat((null===(n=A.selectedServer)||void 0===n?void 0:null===(i=n.siteTags)||void 0===i?void 0:i.coppa)?"&custom[cp_placement][]":"&custom[placement][]","=").concat(e)})),S.categories&&S.categories.forEach((function(e){t+="&custom[vidcont_cat][]=".concat(e)}));var N=Object(i.s)(A.selectedServer.siteTags);N.length>0&&(t+="&custom[sitecont_cat][]=".concat(N.join("&custom[sitecont_cat][]="))),e.tagTestUrl&&(e.tagTestUrl=e.tagTestUrl.replace(/(^\w+:|^)\/\//,""),t+="&token[test_ad_tag]=".concat(encodeURIComponent(e.tagTestUrl)));var U=50*Math.floor(window.innerWidth/50),F=50*Math.floor(window.innerHeight/50);for(var j in t+="&custom[window_width]=".concat(U,"&custom[window_height]=").concat(F),A.DOMPosition)t+="&custom[".concat(j,"]=").concat(A.DOMPosition[j]);var q=e.customClientTags;return q&&Object.keys(q).length&&Object.keys(q).forEach((function(e){var n=q[e];n&&(t+="&custom[".concat(e,"]=").concat(n))})),t},h=function(e,t){var n=e.BoltAdManager,a=n.prebidWinner,r=n.kassandraWinner,o=e.amazonWinner;if(Object(i.B)(r,"hb_val")){var s=f(r.hb_val);t+="&token[hb_vast]=".concat(r.hb_vast,"&token[hb_val]=").concat(s,"&token[hb_bidder]=").concat(r.hb_bidder,"&token[hb_adid]=").concat(r.hb_adid,"&custom[hb_bidder]=").concat(r.hb_bidder,"&custom[hb_val]=").concat(s),Object(i.a)(n.kassandraWinner)}else if(Object(i.B)(a,"hb_vast")){var d=a.hb_vast,l=f(a.hb_val);t+="&token[hb_vast]=".concat(encodeURIComponent(d.replace(/(^\w+:|^)\/\//,"")),"&token[hb_val]=").concat(l,"&token[hb_bidder]=").concat(a.hb_bidder,"&token[hb_adid]=").concat(a.hb_adid,"&custom[hb_bidder]=").concat(a.hb_bidder,"&custom[hb_val]=").concat(l),a.hb_uuid&&(t+="&token[hb_uuid]=".concat(a.hb_uuid))}return o&&(t+="&custom[amznbid]=".concat(o.amznbid),t+="&token[amznbid]=".concat(o.amznbid),t+="&token[amzniid]=".concat(o.amzniid)),t},p=function(e){try{return/-(.*)/.exec(e)[1]}catch(t){return e}},f=function(e){return(e=window.parseInt(e,10))>100&&(e=100),e=(e=Math.floor(window.parseInt(e,10)).toFixed(2)).toString().replace(".","_")},v=function(e){var t="&custom[hw_cpu]=".concat(encodeURIComponent(e.CPU));t+="&custom[hw_os]=".concat(encodeURIComponent(e.OS)),t+="&custom[hw_memory]=".concat((parseInt(e.MemorySize,10)/1e9).toFixed(2)),t+="&custom[hw_screens]=".concat(e.NumberOfScreens),t+="&custom[hw_model]=".concat(encodeURIComponent(e.Model)),t+="&custom[hw_manufacturer]=".concat(encodeURIComponent(e.Manufacturer)),t+="&custom[hw_is_laptop]=".concat(e.IsLaptop),t+="&custom[hw_motherboard]=".concat(encodeURIComponent(e.Motherboard));try{e.GPUs.forEach((function(e){t+="&custom[hw_gpu_name][]=".concat(encodeURIComponent(e.Name))}))}catch(e){}try{e.HardDisks.forEach((function(e){t+="&custom[hw_harddisk_caption][]=".concat(encodeURIComponent(e.Caption)),t+="&custom[hw_harddisk_size][]=".concat((e.Size/1e9).toFixed(2)),t+="&custom[hw_harddisk_ssd][]=".concat(e.IsSsd)}))}catch(e){}try{e.Monitors.forEach((function(e){t+="&custom[hw_monitor_name][]=".concat(encodeURIComponent(e.Name)),t+="&custom[hw_monitor_resolution][]=".concat(encodeURIComponent(e.Resolution))}))}catch(e){}try{e.AudioDevices.forEach((function(e){t+="&custom[hw_audio][]=".concat(encodeURIComponent(e))}))}catch(e){}return t}},364:function(e,t){e.exports=' <div class="bolt-ad-view bolt-hidden"> <div id=ad-container class=bolt-ad-container> <video class=bolt-video playsinline muted></video> </div> <div class=bolt-top-left> <div class="bolt-not-desktop bolt-ad-play-pause-btn"> <div class=bolt-icon-wrap> <svg class="bolt-play-icon bolt-icon" height=30 viewBox="0 0 32.035 30" width=32.035 xmlns=http://www.w3.org/2000/svg> <path d="m291.983 386.1 30.034 15.017-30.034 14.983z" fill=#fff transform="translate(-289.983 -386.1)"/></svg> <svg class="bolt-pause-icon bolt-icon" height=16.5 viewBox="0 0 17.3 16.5" width=17.3 xmlns=http://www.w3.org/2000/svg> <path d="m357.7 421.5h6.8v16.5h-6.8zm10.6 16.5h6.7v-16.5h-6.7z" fill=#fff transform="translate(-357.7 -421.5)"/> </svg> </div> </div> <div class="bolt-not-desktop bolt-mobile-ad-sound-btn"> <div class=bolt-icon-wrap> <svg class="bolt-icon bolt-sound-icon" xmlns=http://www.w3.org/2000/svg viewBox="0 0 111.7 87"> <path d="M64.5 36.3v14.5c4 0 7.2-3.2 7.2-7.2S68.5 36.3 64.5 36.3" class=whiteFill /> <path d="M43.5 0H58v87H43.5l-29-29H0V29h14.5L43.5 0z" class=whiteFill /> <path d="M68.2 0v7.2c20 0 36.2 16.2 36.2 36.2 0 20-16.2 36.2-36.2 36.2v7.2c24 0 43.5-19.5 43.5-43.5C111.7 19.5 92.2 0 68.2 0" class=whiteFill /> <path d="M68.2 18.2v7.2c10 0 18.1 8.1 18.1 18.1s-8.1 18.1-18.1 18.1v7.2c14 0 25.4-11.4 25.4-25.4C93.5 29.5 82.2 18.2 68.2 18.2" class=whiteFill /> </svg> <svg class="bolt-icon bolt-mute-icon" xmlns=http://www.w3.org/2000/svg viewBox="0 0 387.6 306"> <polygon points="153 0 204 0 204 306 153 306 51.1 204 0 204 0 102 51.1 102 " class=whiteFill></polygon> <polygon points="387.6 113.1 365.8 91.3 325.9 131.2 285.9 91.3 264.2 113.1 304.1 153 264.2 192.9 285.9 214.7 325.9 174.8 365.8 214.7 387.6 192.9 347.6 153 " class=whiteFill></polygon> </svg> </div> </div> </div> <div class=bolt-bottom-left> <div class=bolt-ad-title> <div class="bolt-desktop-ad-sound-btn bolt-not-mobile"> <svg class="bolt-icon bolt-sound-icon" xmlns=http://www.w3.org/2000/svg viewBox="0 0 111.7 87"> <path d="M64.5 36.3v14.5c4 0 7.2-3.2 7.2-7.2S68.5 36.3 64.5 36.3" class=whiteFill /> <path d="M43.5 0H58v87H43.5l-29-29H0V29h14.5L43.5 0z" class=whiteFill /> <path d="M68.2 0v7.2c20 0 36.2 16.2 36.2 36.2 0 20-16.2 36.2-36.2 36.2v7.2c24 0 43.5-19.5 43.5-43.5C111.7 19.5 92.2 0 68.2 0" class=whiteFill /> <path d="M68.2 18.2v7.2c10 0 18.1 8.1 18.1 18.1s-8.1 18.1-18.1 18.1v7.2c14 0 25.4-11.4 25.4-25.4C93.5 29.5 82.2 18.2 68.2 18.2" class=whiteFill /> </svg> <svg class="bolt-icon bolt-mute-icon" xmlns=http://www.w3.org/2000/svg viewBox="0 0 387.6 306"> <polygon points="153 0 204 0 204 306 153 306 51.1 204 0 204 0 102 51.1 102 " class=whiteFill></polygon> <polygon points="387.6 113.1 365.8 91.3 325.9 131.2 285.9 91.3 264.2 113.1 304.1 153 264.2 192.9 285.9 214.7 325.9 174.8 365.8 214.7 387.6 192.9 347.6 153 " class=whiteFill></polygon> </svg> </div> <div class=bolt-ad-label>AD</div> </div> <span class=bolt-ad-current-time>0:00</span> </div> <div class=bolt-bottom-right> <span class=bolt-ad-duration>00:00</span> </div> <div class=bolt-ad-time-bar> <div class=bolt-ad-progress></div> </div> </div> '},365:function(e,t,n){var i=n(366);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(368)(i,a);i.locals&&(e.exports=i.locals)},366:function(e,t,n){(e.exports=n(367)(!1)).push([e.i,".bolt-ad-view {\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  color: white;\n  overflow: hidden;\n  z-index: 99999;\n}\n.bolt-ad-view .bolt-hidden,\n.bolt-ad-view.bolt-hidden {\n  display: none !important;\n}\n.bolt-ad-view .whiteFill {\n  fill: white;\n}\n.bolt-ad-view.bolt-desktop .bolt-not-desktop {\n  display: none !important;\n}\n.bolt-ad-view.bolt-mobile .bolt-not-mobile {\n  display: none !important;\n}\n.bolt-ad-view .bolt-ad-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n}\n.bolt-ad-view .bolt-ad-container video {\n  width: 100% !important;\n  height: 100% !important;\n}\n.bolt-ad-view .bolt-top-left {\n  display: -webkit-box;\n  display: flex;\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  -webkit-box-pack: justify;\n          justify-content: space-between;\n  width: 92px;\n}\n.bolt-ad-view .bolt-top-left .bolt-ad-play-pause-btn,\n.bolt-ad-view .bolt-top-left .bolt-mobile-ad-sound-btn {\n  background-color: rgba(0, 0, 0, 0.5);\n  border-radius: 4px;\n  position: relative;\n  padding: 10px;\n  z-index: 100000;\n  -webkit-box-flex: 0;\n          flex: none;\n  display: inline-block;\n}\n.bolt-ad-view .bolt-top-left .bolt-ad-play-pause-btn .bolt-icon-wrap,\n.bolt-ad-view .bolt-top-left .bolt-mobile-ad-sound-btn .bolt-icon-wrap {\n  fill: #fff;\n  height: 22px;\n  width: 22px;\n}\n.bolt-ad-view .bolt-top-left .bolt-ad-play-pause-btn .bolt-icon-wrap .bolt-icon,\n.bolt-ad-view .bolt-top-left .bolt-mobile-ad-sound-btn .bolt-icon-wrap .bolt-icon {\n  height: 100%;\n  width: 100%;\n}\n.bolt-ad-view .bolt-top-left .bolt-ad-play-pause-btn .bolt-play-icon {\n  display: block;\n}\n.bolt-ad-view .bolt-top-left .bolt-ad-play-pause-btn .bolt-pause-icon {\n  display: none;\n}\n.bolt-ad-view .bolt-top-left .bolt-ad-play-pause-btn.paused .bolt-play-icon {\n  display: block;\n}\n.bolt-ad-view .bolt-top-left .bolt-ad-play-pause-btn.paused .bolt-pause-icon {\n  display: none;\n}\n.bolt-ad-view .bolt-top-left .bolt-ad-play-pause-btn.playing .bolt-play-icon {\n  display: none;\n}\n.bolt-ad-view .bolt-top-left .bolt-ad-play-pause-btn.playing .bolt-pause-icon {\n  display: block;\n}\n.bolt-ad-view .bolt-top-left .bolt-mobile-ad-sound-btn .bolt-sound-icon {\n  display: block;\n}\n.bolt-ad-view .bolt-top-left .bolt-mobile-ad-sound-btn .bolt-mute-icon {\n  display: none;\n}\n.bolt-ad-view .bolt-top-left .bolt-mobile-ad-sound-btn.muted .bolt-sound-icon {\n  z-index: 100000;\n  display: none;\n}\n.bolt-ad-view .bolt-top-left .bolt-mobile-ad-sound-btn.muted .bolt-mute-icon {\n  z-index: 100000;\n  display: block;\n}\n.bolt-ad-view .bolt-bottom-left {\n  left: 0;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n  position: absolute;\n  bottom: 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.bolt-ad-view .bolt-bottom-left .bolt-ad-title {\n  display: block;\n  float: left;\n  margin-left: 10px;\n}\n.bolt-ad-view .bolt-bottom-left .bolt-ad-title .bolt-desktop-ad-sound-btn,\n.bolt-ad-view .bolt-bottom-left .bolt-ad-title .bolt-ad-label {\n  float: left;\n  margin-bottom: 10px;\n}\n.bolt-ad-view .bolt-bottom-left .bolt-ad-title .bolt-desktop-ad-sound-btn {\n  background-color: rgba(0, 0, 0, 0.5);\n  cursor: pointer;\n  margin-top: 4px;\n  margin-right: 15px;\n  border-radius: 4px;\n  padding: 8px 6px;\n  position: relative;\n  z-index: 2147483646;\n}\n.bolt-ad-view .bolt-bottom-left .bolt-ad-title .bolt-desktop-ad-sound-btn .bolt-icon {\n  fill: #fff;\n  height: 14px;\n}\n.bolt-ad-view .bolt-bottom-left .bolt-ad-title .bolt-desktop-ad-sound-btn .bolt-sound-icon {\n  display: block;\n}\n.bolt-ad-view .bolt-bottom-left .bolt-ad-title .bolt-desktop-ad-sound-btn .bolt-mute-icon {\n  display: none;\n}\n.bolt-ad-view .bolt-bottom-left .bolt-ad-title .bolt-desktop-ad-sound-btn.muted .bolt-sound-icon {\n  display: none;\n}\n.bolt-ad-view .bolt-bottom-left .bolt-ad-title .bolt-desktop-ad-sound-btn.muted .bolt-mute-icon {\n  display: block;\n}\n.bolt-ad-view .bolt-bottom-left .bolt-ad-title .bolt-ad-label {\n  color: #fff !important;\n  padding-top: 10px;\n}\n.bolt-ad-view .bolt-bottom-left .bolt-ad-current-time {\n  display: block;\n  float: left;\n  margin: 10px;\n  min-width: 40px;\n  position: relative;\n  z-index: 10;\n}\n.bolt-ad-view .bolt-bottom-right {\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  height: 44px;\n}\n.bolt-ad-view .bolt-bottom-right .bolt-ad-duration {\n  display: none;\n  float: right;\n  margin: 10px;\n  position: relative;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  z-index: 10;\n}\n.bolt-ad-view .bolt-ad-time-bar {\n  width: 100%;\n  position: absolute;\n  bottom: 2px;\n  left: 0;\n  height: 2px;\n  background: lightgrey;\n}\n.bolt-ad-view .bolt-ad-time-bar .bolt-ad-progress {\n  background: white;\n  height: 100%;\n  width: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  -webkit-transition: width 0.5s linear;\n  transition: width 0.5s linear;\n}\n",""])},367:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=(o=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(r).concat([a]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(a=0;a<e.length;a++){var o=e[a];null!=o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},368:function(e,t,n){var i,a,r={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=i.apply(this,arguments)),a}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},d=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var i=s.call(this,e,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),l=null,c=0,u=[],h=n(369);function p(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=r[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(y(i.parts[o],t))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(y(i.parts[o],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function f(e,t){for(var n=[],i={},a=0;a<e.length;a++){var r=e[a],o=t.base?r[0]+t.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};i[o]?i[o].parts.push(s):n.push(i[o]={id:o,parts:[s]})}return n}function v(e,t){var n=d(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=d(e.insertAt.before,n);n.insertBefore(t,a)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=function(){0;return n.nc}();i&&(e.attrs.nonce=i)}return b(t,e.attrs),v(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,i,a,r;if(t.transform&&e.css){if(!(r="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=r}if(t.singleton){var o=c++;n=l||(l=m(t)),i=w.bind(null,n,o,!1),a=w.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),v(e,t),t}(t),i=k.bind(null,n,t),a=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),i=S.bind(null,n),a=function(){g(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return p(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var o=n[a];(s=r[o.id]).refs--,i.push(s)}e&&p(f(e,t),t);for(a=0;a<i.length;a++){var s;if(0===(s=i[a]).refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete r[s.id]}}}};var _,A=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function w(e,t,n,i){var a=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=A(t,a);else{var r=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function S(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function k(e,t,n){var i=n.css,a=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||r)&&(i=h(i)),a&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},369:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var a,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(a=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}},376:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var i=n(92),a=n.n(i),r=n(93),o=n.n(r),s=n(323),d=n.n(s),l=n(322),c=n.n(l),u=n(324),h=n.n(u),p=n(325),f=n(328),v=n(329),g=n(91),m=n(321),b=n(326);var y=new g.a("AD-BLOCKED"),_=function(e){h()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=c()(e);if(t()){var a=c()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d()(this,n)}}(n);function n(e){return a()(this,n),t.call(this,e)}return o()(n,[{key:"track",value:function(e){var t=this._getTag(e);if(t){var n={publisher_id:Object(b.i)(this.embedRef.CurrentVideoConfig)||-1,video_id:this.embedRef.CurrentVideoConfig.content.videoId,timing:e,tag:t.url,server_type:t.type,domain:f.b.hostname,page_url:f.b.href};y.warn("Ad block",{detected:1,msg:"Missed ad opportunity because of ad blocker",data:n}),this._dispatchEvent(m.a.Ad.Event.SESSION_BLOCKED,n)}}},{key:"_getTag",value:function(e){for(var t,n,i,a,r,o=f.b,s=this.embedRef.CurrentVideoConfig.advertising,d=0;d<s.servers.length;d++){var l=s.servers[d];if(l){if("adtech-intergi"!==l.type){n=l;break}n=l}}try{for(var c in n.tags){if(c===o.hostname){t=c;break}if(c===o.tld||c==="*.".concat(o.tld)){t=c;break}}t||(t="default"),(i=n.tags[t]).html5&&(p.a.isMobile&&i.html5.mobile?a=i.html5.mobile[e]:i.html5.desktop&&(a=i.html5.desktop[e])),y.info("Ad block",{detected:1,msg:"Blocked Tag",data:{selectedTag:a,tags:i}}),r={url:a,type:n.type}}catch(e){}return r}}]),n}(v.a)},377:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var i=n(92),a=n.n(i),r=n(93),o=n.n(r),s=n(327),d=n.n(s),l=n(323),c=n.n(l),u=n(322),h=n.n(u),p=n(324),f=n.n(p),v=n(49),g=n.n(v),m=n(329),b=n(321);var y=new(n(91).a)("AD-REQUEST"),_=function(e){f()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=h()(e);if(t()){var a=h()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c()(this,n)}}(n);function n(e,i){var r;return a()(this,n),r=t.call(this,e),g()(d()(r),"failed",!1),g()(d()(r),"data",{}),r.AdSession=i,r}return o()(n,[{key:"setMedia",value:function(e,t){this.data.media_src=e,this.data.mime_type=t}},{key:"start",value:function(e,t,n){var i=this,a=i.data.campaign_id;i.reset(),i.data={campaign_id:a,tag:e,third_party_tag:t,daisy_chain_count:n,start_ts:new Date},this._dispatchEvent(b.a.Ad.Event.REQUEST_START,i.data)}},{key:"getElapsedSecondsSinceStart",value:function(e){try{var t=(e.getTime()-this.data.start_ts.getTime())/1e3;return parseFloat(t.toFixed(1))}catch(e){return-1}}},{key:"success",value:function(){var e=this,t=new Date,n={timestamp:t,media_src:e.data.media_src,mime_type:e.data.mime_type,ad_type:e.data.ad_type,network:e.data.network,campaign_id:e.data.campaign_id,et_request_start:e.getElapsedSecondsSinceStart(t),et_session_start:e.AdSession.getElapsedSecondsSinceStart(t)};this._dispatchEvent(b.a.Ad.Event.REQUEST_SUCCESS,n)}},{key:"fail",value:function(e){var t=this,n=new Date;if(!t.failed){t.failed=!0;var i={timestamp:n,media_src:t.data.media_src,mime_type:t.data.mime_type,ad_type:t.data.ad_type,info:e,network:t.data.network,campaign_id:t.data.campaign_id,et_request_start:t.getElapsedSecondsSinceStart(n),et_session_start:t.AdSession.getElapsedSecondsSinceStart(n)};t._dispatchEvent(b.a.Ad.Event.REQUEST_FAIL,i)}}},{key:"abort",value:function(){var e=this,t=new Date,n={timestamp:t,media_src:e.data.media_src,mime_type:e.data.mime_type,ad_type:e.data.ad_type,network:e.data.network,campaign_id:e.data.campaign_id,et_request_start:e.getElapsedSecondsSinceStart(t),et_session_start:e.AdSession.getElapsedSecondsSinceStart(t)};e._dispatchEvent(b.a.Ad.Event.REQUEST_ABORT,n)}},{key:"reset",value:function(){var e;this.data&&this.data.campaign_id&&(e=this.data.campaign_id),this.failed=!1,this.data={},this.embedRef.BoltAdManager&&this.embedRef.BoltAdManager.selectedServer&&(this.data.campaign_id=e)}},{key:"adType",get:function(){return this.data.ad_type},set:function(e){this.data.ad_type=e}},{key:"network",get:function(){return this.data.network},set:function(e){this.data.network=e}},{key:"campaignId",get:function(){return this.data.campaign_id},set:function(e){try{this.data.campaign_id=e}catch(e){}y.info("CAMPAIGN ID",this.data.campaign_id)}}]),n}(m.a)},378:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var i=n(92),a=n.n(i),r=n(93),o=n.n(r),s=n(327),d=n.n(s),l=n(323),c=n.n(l),u=n(322),h=n.n(u),p=n(324),f=n.n(p),v=n(49),g=n.n(v),m=n(329),b=n(91),y=n(321),_=n(326);var A=new b.a("SS-TRACKER"),w=function(e){f()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=h()(e);if(t()){var a=h()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c()(this,n)}}(n);function n(e){var i;return a()(this,n),i=t.call(this,e),g()(d()(i),"videoId",null),g()(d()(i),"publisherId",null),g()(d()(i),"tag",null),g()(d()(i),"timing",null),g()(d()(i),"started",!1),g()(d()(i),"aborted",!1),g()(d()(i),"loaded",!1),g()(d()(i),"failed",!1),g()(d()(i),"data",{}),i}return o()(n,[{key:"start",value:function(e){e.timing&&e.tag&&e.serverType?this.started?A.warn("SSTRacker has already been started"):(this.started=!0,this.tag=e.tag,this.data={timing:e.timing,tag:e.tag,vmap:e.vmap,publisher_id:Object(_.i)(this.embedRef.CurrentVideoConfig)||-1,video_id:this.embedRef.CurrentVideoConfig.content.videoId||-1,start_ts:new Date,server_type:e.serverType},this._dispatchEvent(y.a.Ad.Event.SS_REQUESTED,this.data)):A.error("Invalid SS tracker data")}},{key:"fail",value:function(){this.tag?this.started?(this.failed=!0,A.info("event: failed"),this._dispatchEvent(y.a.Ad.Event.SS_FAILED,this.data)):A.error("has not started"):A.warn("No self-service tag")}},{key:"success",value:function(){this.tag?this.started?(this.loaded=!0,A.info("event: success"),this._dispatchEvent(y.a.Ad.Event.SS_LOADED,this.data)):A.error("has not started"):A.warn("No self-service tag")}},{key:"backfill",value:function(e){this.tag?this.started?this.failed?(this.data.backfiller_tag=e,this._dispatchEvent(y.a.Ad.Event.SS_BACKFILL_REQUESTED,this.data)):A.error("did not fail"):A.error("has not started"):A.warn("No self-service tag")}},{key:"backfillSuccess",value:function(e){this.tag?this.started?this.failed?(this.data.backfiller_tag=e||this.data.backfiller_tag,this._dispatchEvent(y.a.Ad.Event.SS_BACKFILL_SUCCESS,this.data)):A.error("did not fail"):A.error("has not started"):A.warn("No self-service tag")}},{key:"backfillFail",value:function(e){this.tag?this.started?this.failed?(this.data.backfiller_tag=e||this.data.backfiller_tag,this._dispatchEvent(y.a.Ad.Event.SS_BACKFILL_FAILED,this.data)):A.error("did not fail"):A.error("has not started"):A.warn("No self-service tag")}},{key:"reset",value:function(){A.debug("reset"),this.tag=null,this.timing=null,this.started=!1,this.aborted=!1,this.loaded=!1,this.failed=!1,this.data={}}},{key:"recordImpression",value:function(){var e={timing:this.data.timing,video_id:this.data.video_id,publisher_id:this.data.publisher_id,tag:this.data.tag,vmap:this.data.vmap,server_type:this.data.server_type,start_ts:this.data.start_ts};this._dispatchEvent(y.a.Ad.Event.SS_IMPRESSION,e)}}]),n}(m.a)},384:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ce}));var i=n(44),a=n.n(i),r=n(336),o=n.n(r),s=n(92),d=n.n(s),l=n(327),c=n.n(l),u=n(93),h=n.n(u),p=n(323),f=n.n(p),v=n(322),g=n.n(v),m=n(324),b=n.n(m),y=n(49),_=n.n(y),A=n(325),w=n(329),S=n(91),k=n(326),T=n(321),E=n(330),R=new S.a("VAST-MAP");function M(e,t,n,i){var a,r=Object(E.k)(e);R.debug("URL after substitution: ".concat(r)),null===(a=window.BoltLogger)||void 0===a||a.info("URL after substitution ".concat(r));Object(k.J)({url:r,method:"get"}).then((function(e){var a,r,o;a=e.data,(o=(new DOMParser).parseFromString(a,"application/xml")).getElementsByTagName("Ad").length?n(o,t):(R.warn("Empty VAST ".concat(o)),null===(r=window.BoltLogger)||void 0===r||r.error("Empty VAST XML"),i())})).catch(i)}function P(e,t,n){var i;R.debug("fetching ".concat(e)),null===(i=window.BoltLogger)||void 0===i||i.info("Fetching ".concat(e)),M(e,null,(function(e){new B(e,t,n)}),(function(){var n;R.error("Failed to load VAST from '".concat(e,"':")),null===(n=window.BoltLogger)||void 0===n||n.error("Failed to load VAST from '".concat(e)),t(null)}))}function C(e,t){if(this.events={},this.ad=t,null!==e){if("TrackingEvents"!==e.tagName&&"vmap:TrackingEvents"!==e.tagName){if(1!==(e=e.getElementsByTagName("TrackingEvents")).length)return;e=e.item(0)}var n=e.getElementsByTagName("Tracking");0===n.length&&(n=e.getElementsByTagNameNS("*","Tracking"));for(var i=0;i<n.length;i++){var a=n[i].getAttribute("event");if(a){var r=null;"progress"===a&&(r=n[i].getAttribute("offset"),a+="-".concat(r)),this.events[a]=this.events[a]||[];var o={url:n[i].textContent.replace(/\s/g,""),offset:r,event:a};this.events[a].push(o)}}}}function I(e,t,n){this.breaks=[];var i=this;M(e,null,(function(e){for(var a=e.getElementsByTagName("AdBreak"),r=[],o=0;o<a.length;o++){var s=a.item(o),d=s.getAttribute("timeOffset");if(0!==d.indexOf("#")){var l={ad:null,breakId:s.getAttribute("breakId"),tracking:new C(s,null),position:d},c=t.bind(i,i.breaks.length,d),u=s.getElementsByTagName("VASTData");if(u)l.ad=new B(u.item(0).getElementByTagName(null,"VAST").item(0),c);else{var h,p=s.getElementsByTagName("AdTagURI");if(!p){R.error("No supported ad target for break #".concat(o));continue}!function(e){h=function(t){e.ad=t,null!==t&&c(t)}}(l),P(p.item(0).textContent.replace(/\s/g,""),h)}i.breaks.push(l),r.push(l.position)}}"function"==typeof n&&n(r)}),(function(t){R.error("Failed to load VMAP from '".concat(e,"':"),{message:t}),n([])}))}function B(e,t,n){var i=e.getElementsByTagName("Ad");if(void 0===i||0===i.length)R.warn("No Ads found in ".concat((new XMLSerializer).serializeToString(e))),t&&t.call(null);else{this.ads=[],this.onAdsAvailable=t,this.id=void 0!==e.getElementsByTagName("Ad")[0]?e.getElementsByTagName("Ad")[0].getAttribute("id"):null;for(var a=e.getElementsByTagName("Ad"),r=0;r<a.length;r++){var o=new O(this,a.item(r),n||null);if(!o.isEmpty()){var s=e.getElementsByTagName("Price");try{s=s.length>0&&"CPM"===s[0].getAttribute("model").toUpperCase()?parseFloat(s[0].textContent)||0:null}catch(e){s=null}if(this.ads.push(o),!o.hasData()||o.hasSequence()&&!o.isNumber(1)){var d=a.item(r).getElementsByTagName("Wrapper").item(0),l=d.getElementsByTagName("VASTAdTagURI");if(0===l.length)continue;l=l.item(0).textContent.replace(/\s/g,"");try{l=Object(E.k)(l)}catch(e){}BoltAdManager.thirdPartyTag&&(BoltAdManager.thirdPartyTag=l),!function(e,t,n){(function(i){if(e.onLoaded(i,t),n.onAdsAvailable){var a=n.onAdsAvailable;n.onAdsAvailable=null,a.call(n,n,s)}})}(o,"true"===d.getAttribute("allowMultipleAds"),this),P(l,t,o)}else if(t){var c=this.onAdsAvailable;this.onAdsAvailable=null;try{c.call(this,this,s)}catch(e){}}}}}}function O(e,t,n,i){var a,r;if(this.vast=e,this.pod=e,this.parentAd=n,this.onAdAvailable=i,this.sequence=null,this.hasContent=!0,this.loaded=!0,this.linear=null,this.companions=[],this.companionsRequired="none",this.nonlinears=[],this.nonlinearsTracking=null,this.impressions=[],this.currentPodAd=this,this.sentImpression=!1,this.properties={},null!==this.parentAd){var o=this.parentAd;if(this.companionsRequired=o.companionsRequired,this.linear=o.linear?o.linear.copy(this):null,o.companions.length)for(a=0;a<o.companions.length;a++)this.companions.push(o.companions[a].copy(this));if(o.nonlinears.length)for(a=0;a<o.nonlinears.length;a++)this.companions.push(o.nonlinears[a].copy(this));for(r in null!==o.nonlinearsTracking&&(this.nonlinearsTracking=o.nonlinearsTracking.copy(this)),o.properties)o.properties.hasOwnProperty(r)&&(this.properties[r]=o.properties[r])}null===this.nonlinearsTracking&&(this.nonlinearsTracking=new C(null,this)),t.hasAttribute("sequence")&&(this.sequence=parseInt(t.getAttribute("sequence"),10));var s=t.getElementsByTagName("InLine");if(0!==s.length||(this.loaded=!1,0!==(s=t.getElementsByTagName("Wrapper")).length)){for(var d=(s=s.item(0)).firstChild;null!==d;){if(1===d.nodeType)switch(d.tagName){case"Creatives":case"InLine":case"Wrapper":case"Impression":case"VASTAdTagURI":case"Error":break;default:this.properties[d.tagName]=d.textContent.replace(/^\s*|\s*$/g,"")}d=d.nextSibling}var l=s.getElementsByTagName("Impression");for(a=0;a<l.length;a++){var c=l.item(a).textContent.replace(/\s/g,"");0!==c.length&&(R.debug("VAST impression ".concat(c)),-1===this.impressions.indexOf(c)?this.impressions.push(c):R.info("skipping impression because it's a duplicate"))}R.debug("Impressions",this.impressions);var u=s.getElementsByTagName("Creatives");if(0!==u.length)for(u=u.item(0).getElementsByTagName("Creative"),a=0;a<u.length;a++){for(var h,p=u.item(a).firstChild;null!==p&&3===p.nodeType;)p=p.nextSibling;if(null!==p)switch(p.tagName){case"Linear":h=new D(this,p),this.linear?(this.linear=F(this,h),null!==this.parentAd&&this.linear.tracking.augment(this.parentAd.linear.tracking)):this.linear=h;break;case"NonLinearAds":var f=p.tagName.replace("Ads","");if("NonLinear"===f){var v=new C(p,this);this.nonlinearsTracking.augment(v)}for(var g=p.getElementsByTagName(f),m=0;m<g.length;m++)h=new U(this,g.item(m)),this.nonlinears=F(this,h)}}}else this.hasContent=!1}function L(e,t){this.root=t,this.clickThrough=null,"NonLinear"===t.tagName&&(t=t.parentNode),this.tracking=new C(t,e)}function D(e,t){var n;L.call(this,e,t),this.mediaFiles=[],this.clickThrough=null,this.duration=null;var i=t.getElementsByTagName("VideoClicks");if(i.length){var a=(i=i.item(0)).getElementsByTagName("ClickThrough");for(a.length&&(this.clickThrough=a.item(0).textContent.replace(/\s/g,"")),a=i.getElementsByTagName("ClickTracking"),n=0;n<a.length;n++)this.tracking.addClickTracking(a.item(n).textContent.replace(/\s/g,""))}var r=t.getElementsByTagName("Duration");r.length&&(this.duration=this.timecodeFromString(r.item(0).textContent.replace(/\s/g,"")));var o=t.getElementsByTagName("MediaFiles");if(o.length){for(o=o.item(0).getElementsByTagName("MediaFile"),n=0;n<o.length;n++){for(var s=o.item(n),d={},l=0;l<s.attributes.length;l++)d[s.attributes[l].name]=s.attributes[l].value;d.src=o.item(n).textContent.replace(/\s/g,""),this.mediaFiles.push(d)}this.parameters=null,t.getElementsByTagName("AdParameters").length>0&&(this.parameters=t.getElementsByTagName("AdParameters")[0].textContent,window.location.protocol.indexOf("https")>=0&&(R.info("Normalizing all protocols in AdParameters"),R.info("Ad Parameters BEFORE normalisation:",this.parameters.concat()),this.parameters=this.parameters.replace(/http:/gi,"https:").replace(/http%3A/gi,"https%3A"),R.info("Ad Parameters AFTER normalisation:",this.parameters)))}}C.prototype.copy=function(e){var t=Object.create(C.prototype);for(var n in t.events={},this.events)this.events.hasOwnProperty(n)&&(t.events[n]=[].concat(this.events[n]));return t.ad=e,t},C.prototype.finger=function(e,t){var n=Object(E.k)(e),i=document.getElementById("bolt_trackingpixels"),a=Object(k.A)(n),r=document.createElement("img");r.setAttribute("style","position:absolute;bottom:0;left:0;visibility:hidden"),r.src=a,i.appendChild(r),R.info("Image tracking pixel loaded: ".concat(n))},C.prototype.augment=function(e){for(var t in e.events)e.events.hasOwnProperty(t)&&(this.events[t]?this.events[t]=this.events[t].concat(e.events[t]):this.events[t]=e.events[t])},C.prototype.addClickTracking=function(e){var t={url:e,event:"click",offset:null};this.events.click?this.events.click.push(t):this.events.click=[t]},C.prototype.getEventsOfTypes=function(e){var t=[],n=e.indexOf("progress")>-1;for(var i in this.events)this.events.hasOwnProperty(i)&&(e.indexOf(i)>-1||n&&0===i.indexOf("progress-"))&&(t=t.concat(this.events[i]));return t},C.prototype.track=function(e,t){if(this.events[e]&&0!==this.events[e].length){t||(t={});var n,i=[].concat(this.events[e]);for(var a in t)t.hasOwnProperty(a)&&(t["[".concat(a,"]")]=encodeURIComponent(t[a]),delete t[a]);for(n=0;n<i.length;n++){var r=i[n].url;for(a in t["[CACHEBUSTING]"]=Object(k.j)(),t)t.hasOwnProperty(a)&&(r=r.replace(a,t[a]));""!==r&&"about:blank"!==r&&(R.debug("tracking",e,r),this.finger(r,e))}}},C.prototype.trackImpressions=function(){R.debug("tracking impressions for ad");for(var e,t,n=this.ad;null!==n&&!n.hasSentImpression();){for(n.impressionSent(),e=0;e<n.impressions.length;e++)""!==(t=n.impressions[e])&&"about:blank"!==t&&(R.debug("Track impression",t),this.finger(t,"impression"));R.debug("Backtracking to parent ad, if any"),n=n.parentAd}},I.prototype.onBreakStart=function(e){return this.breaks[e].tracking.track("breakStart"),this.breaks[e].ad},I.prototype.onBreakEnd=function(e){this.breaks[e].tracking.track("breakEnd")},B.prototype.getAd=function(e){var t=null;if(e&&(t=this.getAdWithSequence(1))&&!t.current().isEmpty())return t.current();for(var n=0;n<this.ads.length;n++)if(!this.ads[n].hasSequence()&&!this.ads[n].current().isEmpty())return this.ads[n].current()},B.prototype.getAdWithSequence=function(e){for(var t=0;t<this.ads.length;t++)if(this.ads[t].isNumber(e))return this.ads[t];return null},O.prototype.getTag=function(e,t){return this.properties.hasOwnProperty(e)?this.properties[e]:t},O.prototype.onLoaded=function(e,t){this.pod=e,this.currentPodAd=e.getAd(t),this.currentPodAd.isEmpty()||(this.loaded=!0,this.onAdAvailable&&this.onAdAvailable.call(this,this))},O.prototype.hasSentImpression=function(){return this.sentImpression},O.prototype.impressionSent=function(){this.sentImpression=!0},O.prototype.current=function(){return this.currentPodAd},O.prototype.isNumber=function(e){return this.sequence===e},O.prototype.hasSequence=function(){return null!==this.sequence},O.prototype.isEmpty=function(){return!this.hasContent},O.prototype.hasData=function(){return this.loaded},O.prototype.getNextAd=function(){return this.vast!==this.pod&&(this.currentPodAd=this.currentPodAd.getNextAd(),null!==this.currentPod)?this.currentPodAd.current():this.hasSequence()?this.vast.getAdWithSequence(this.sequence+1).current():null},O.prototype.getLinear=function(){return this.linear},O.prototype.getCompanions=function(){return this.companions},O.prototype.getCompanion=function(e){for(var t=0;t<this.companions.length;t++)if(this.companions[t].attribute("id")===e)return this.companions[t];return null},O.prototype.companionsRequired=function(){return this.companionsRequired},O.prototype.getNonLinears=function(){return this.nonlinears},L.prototype.track=function(e,t,n){this.tracking.track(e,{CONTENTPLAYHEAD:this.timecodeToString(t),ASSETURI:n})},L.prototype.trackImpressions=function(e){this.tracking.trackImpressions()},L.prototype.timecodeToString=function(e){var t="0".concat(parseInt(e/3600,10)),n="0".concat(parseInt(e%3600/60,10)),i="0".concat(e%60);return"".concat(t,":").concat(n,":").concat(i).replace(/(^|:|\.)0(\d{2})/g,"$1$2")},L.prototype.timecodeFromString=function(e){return-1===e.indexOf(":")?e:3600*parseInt(e.substr(0,2),10)+60*parseInt(e.substr(3,2),10)+parseInt(e.substr(6,2),10)},L.prototype.getClickThrough=function(){return this.clickThrough},L.prototype.attribute=function(e,t){if(!this.root.hasAttribute(e))return t;var n=this.root.getAttribute(e);switch(e){case"skipoffset":case"duration":case"offset":case"minSuggestedDuration":n=this.timecodeFromString(n)}return n},D.prototype=Object.create(L.prototype),D.prototype.getDuration=function(){return this.duration},D.prototype.copy=function(e){return new D(e,this.root)},D.prototype.augment=function(e){this.tracking.augment(e.tracking),this.clickThrough=e.clickThrough||this.clickThrough},D.prototype.getAllMedias=function(){return this.mediaFiles},D.prototype.getAllMediaAsObject=function(){var e;return this.mediaFiles&&this.mediaFiles.forEach((function(t){e||(e={}),e[t.type]=t})),e},D.prototype.getBestMedia=function(e){for(var t=Number.POSITIVE_INFINITY,n=-1,i=0;i<this.mediaFiles.length;i++){var a=this.mediaFiles[i],r=Math.sqrt(Math.pow(e.width-a.width,2)+Math.pow(e.height-a.height,2));if(r<t)t=r,n=i;else if(r===t){var o=this.mediaFiles[n],s=o.bitrate||o.maxBitrate,d=a.bitrate||a.maxBitrate;d&&!s?n=i:e.bitrate&&s&&d?Math.abs(d-e.bitrate)<Math.abs(s-e.bitrate)&&(n=i):d>s&&(n=i)}}return-1===n?null:this.mediaFiles[n]};var x=["start","firstQuartile","midpoint","thirdQuartile","complete","progress"];function V(e,t){var n;L.call(this,e,t),this.resources={iframe:null,html:null,images:{}},(n=t.getElementsByTagName("IFrameResource")).length>0&&(this.resources.iframe=n.item(0).textContent.replace(/\s/g,"")),(n=t.getElementsByTagName("HTMLResource")).length>0&&(this.resources.html=n.item(0).textContent.replace(/\s/g,"")),n=t.getElementsByTagName("StaticResource");for(var i=0;i<n.length;i++)this.resources.images[n.item(i).getAttribute("creativeType")]=n.item(i).textContent.replace(/\s/g,"")}function N(e,t){V.call(this,e,t),this.altText="",V.prototype.extractClicks.call(this,"Companion");var n=t.getElementsByTagName("AltText");n.length&&(this.altText=n.item(0).textContent.replace(/\s/g,""))}function U(e,t){V.call(this,e,t),this.tracking=e.nonlinearsTracking,V.prototype.extractClicks.call(this,"NonLinear")}function F(e,t){for(var n in t)try{t[n].constructor==Object?e[n]=F(e[n],t[n]):e[n]=t[n]}catch(i){e[n]=t[n]}return e}D.prototype.getTrackingPoints=function(){for(var e=this.tracking.getEventsOfTypes(x),t=[],n=0;n<e.length;n++){var i={event:e[n].event,offset:null};switch(e[n].event){case"start":i.offset="start";break;case"firstQuartile":i.offset="25%";break;case"midpoint":i.offset="50%";break;case"thirdQuartile":i.offset="75%";break;case"complete":i.offset="end";break;default:var a=e[n].offset;if(!a)continue;i.offset=L.prototype.timecodeFromString(a)}t.push(i)}return t},V.prototype=Object.create(L.prototype),V.prototype.augment=function(e){for(var t in this.tracking.augment(e.tracking),this.clickThrough=e.clickThrough||this.clickThrough,this.resources.iframe=e.resources.iframe||this.resources.iframe,this.resources.html=e.resources.html||this.resources.html,e.resources.images)e.resources.images.hasOwnProperty(t)&&(this.resources.images[t]=e.resources.images[t])},V.prototype.getAllResources=function(){return this.resources},V.prototype.extractClicks=function(e){var t;(t=this.root.getElementsByTagName("".concat(e,"ClickThrough"))).length&&(this.clickThrough=t.item(0).textContent.replace(/\s/g,"")),(t=this.root.getElementsByTagName("".concat(e,"ClickTracking"))).length&&this.tracking.addClickTracking(t.item(0).textContent.replace(/\s/g,""))},N.prototype=Object.create(V.prototype),N.prototype.copy=function(e){return new N(e,this.root)},N.prototype.augment=function(e){V.prototype.augment.call(this,e),this.altText=e.altText||this.altText},N.prototype.getAltText=function(){return this.altText},U.prototype=Object.create(V.prototype),U.prototype.augment=function(e){V.prototype.augment.call(this,e)},U.prototype.copy=function(e){return new U(e,this.root)};var j=new S.a("VMAP-ADAPTER"),q=function(e){b()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=g()(e);if(t()){var a=g()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}(n);function n(){var e;return d()(this,n),e=t.call(this),(new w.a).mixin(c()(e)),e}return h()(n,[{key:"init",value:function(e,t,n){var i=this;i.primaryTag=e,i.xml=null,i.breaks=[],i.successCb=t,i.errorCb=n,i.contentDuration=0,i.cuepoints=[],Object(k.J)({url:this.primaryTag,method:"get"}).then((function(e){i.parse(e.data)})).catch((function(){n.call(null)}))}},{key:"parse",value:function(e){var t=this;t.xml=e,t.breaks=[],t.cuepoints=[];for(var n,i,a,r,o,s=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagNameNS("*","AdBreak"),d=0;d<s.length;d++)if("linear"===(n=s.item(d)).getAttribute("breakType")){j.info("AdBreak",n);var l={position:n.getAttribute("timeOffset"),positionInSeconds:(i=n.getAttribute("timeOffset"),a=void 0,r=void 0,o=void 0,a=i.split(":"),r=window.parseInt(a[2],10),o=window.parseInt(a[1],10),3600*window.parseInt(a[0],10)+60*o+r),breakId:n.getAttribute("breakId"),sourceId:n.getElementsByTagNameNS("*","AdSource")[0].getAttribute("id"),trackingEvents:null,adXML:null,adURI:null};try{var c=n.getElementsByTagNameNS("*","TrackingEvents")[0];c&&(l.trackingEvents=new C(c,null))}catch(e){}var u=n.getElementsByTagNameNS("*","VASTAdData")[0];if(u){var h=u.getElementsByTagNameNS("*","VAST")[0];h&&(l.adXML=h)}else{var p=n.getElementsByTagNameNS("*","AdTagURI")[0];p&&(l.adURI=p.textContent.trim())}(l.adURI||l.adXML)&&("number"!=typeof l.positionInSeconds||isNaN(l.positionInSeconds)||t.cuepoints.push(l.positionInSeconds),t.breaks.push(l))}t.breaks.length>0?(t.contentDuration>0&&t.updatePercentagePosition(t.contentDuration),t.successCb.call(null,t.breaks)):(j.warn("No ad breaks found"),t.errorCb.call(null))}},{key:"getBreaks",value:function(e){var t=this,n=[];if(!t.breaks||0===t.breaks.length)return null;for(var i=t.breaks.concat();i.length>0;){var a=i.shift();"preroll"===e?"start"===a.position&&n.push(a):"postroll"===e?"end"===a.position&&n.push(a):a.positionInSeconds===Math.floor(e)&&n.push(a)}return n.length>0?n:null}},{key:"setContentDuration",value:function(e,t){this.contentDuration=e,this.breaks&&this.breaks.length>0&&(this.updatePercentagePosition(e),t&&t.call(null,this.cuepoints))}},{key:"updatePercentagePosition",value:function(e){var t=this;e&&t.breaks&&t.breaks.length>0&&(t.breaks.forEach((function(t){t.position.indexOf("%")>-1&&(t.positionInSeconds=Math.floor(e*parseFloat(t.position)/100))})),t.validateBreakTimings(e))}},{key:"validateBreakTimings",value:function(e){j.info("Validate VMAP break timings");var t=this;e&&t.breaks&&t.breaks.length>0&&(t.breaks=t.breaks.filter((function(t){return"start"===t.position||"end"===t.position||e-t.positionInSeconds>30})),t.updateCuepoints())}},{key:"updateCuepoints",value:function(){var e=this;e.breaks&&e.breaks.length>0&&e.breaks.forEach((function(t){"number"!=typeof t.positionInSeconds||isNaN(t.positionInSeconds)||e.cuepoints.push(t.positionInSeconds)})),e.cuepoints=Object(k.E)(Object(k.r)(e.cuepoints)),j.info("VMAP CUEPOINTS",e.cuepoints)}},{key:"reset",value:function(){this.breaks=null,this.successCb=null,this.errorCb=null,this.primaryTag=null,this.xml=null,this.contentDuration=0,this.cuepoints=null}}]),n}(w.a),G=n(328),H=new S.a("SERVER"),Q=function(){function e(t,n){d()(this,e),this.embedId=n,this.embedRef=window.Bolt.embeds[n],this.type=t.type,this.tags=t.tags,this.type===T.a.Ad.Server.SPOTX?this.maxAttempts=3:this.type===T.a.Ad.Server.DFP?this.maxAttempts=2:this.type===T.a.Ad.Server.DISPLAY_BACKFILL?this.maxAttempts=1:(this.type,T.a.Ad.Server.HOUSE_AD,this.maxAttempts=1),this.tagType=this._findTagTypeForSite(),this.tagType?"syndication"===this.tagType?this.siteTags=this.tags.default:this.siteTags=this.tags[this.tagType]:this.siteTags=null,this.type===T.a.Ad.Server.SPOTX&&(this.spotxChannelId=this._getSpotxChannelId(),this.embedRef.spotxChannelId=this.spotxChannelId)}return h()(e,[{key:"selectTag",value:function(e){var t=null;if(this.embedRef.tagTestUrl&&this.embedRef.googleIma)return this.embedRef.tagTestUrl;try{H.info("Search tag",{timing:e,tags:this.siteTags}),this.siteTags&&this.siteTags.html5&&(A.a.isMobile&&this.siteTags.html5.mobile?t=this.siteTags.html5.mobile[e]:this.siteTags.html5.desktop&&(t=this.siteTags.html5.desktop[e]))}catch(e){H.warn("Caught Error",{message:e.message,stack:e.stack})}return void 0===t||0!==t.indexOf("//")&&0!==t.indexOf("http://")||(t=t.replace(/(http\:\/\/|\/\/)/gi,"https://")),t}},{key:"_findTagTypeForSite",value:function(){var e,t,n=G.b.hostname,i=null;if(!this.tags)return null;try{var a,r,o=G.b.tld,s=this.embedRef.PlayerSettings;if(s.forceAds)H.debug("Forcing Ads for ".concat(o)),null===(a=window.BoltLogger)||void 0===a||a.info("Forcing Ads for: ".concat(o));if("amp"!==G.b.hostapp&&!s.forceAds&&"phoenix.playwire.com"===o)return H.warn("TLD is ".concat(o,". Ads disabled")),null===(r=window.BoltLogger)||void 0===r||r.warn("TLD is ".concat(o,". Ads disabled")),null;for(var d in this.tags){if(d===n){i=d;break}if(d===o||d==="*.".concat(o)){i=d;break}if(new RegExp("".concat(d,"$")).test(o)){i=d;break}}}catch(e){}return i?(H.debug("Found site-specific ".concat(this.type," tags"),this.tags[i]),null===(t=window.BoltLogger)||void 0===t||t.info("Found site-specific ".concat(this.type," tags matching ").concat(n)),i):(H.debug("No site-specific ".concat(this.type," tags match ").concat(n,". Using syndication tags.")),null===(e=window.BoltLogger)||void 0===e||e.info("No site-specific ".concat(this.type," tags match ").concat(n,". Using syndication tags.")),"syndication")}},{key:"_getSpotxChannelId",value:function(){try{return/#zeusdebug.*;spotxchannelid=([\d]*)/gi.exec(G.b.href)[1]}catch(e){}try{if(this.siteTags&&this.siteTags.html5){if(A.a.isMobile&&this.siteTags.html5.mobile)return H.info("Found SpotX Mobile ChannelID",{channelId:this.siteTags.html5.mobile.channelId}),this.siteTags.html5.mobile.channelId;if(this.siteTags.html5.desktop)return H.info("Found SpotX Desktop ChannelID",{channelId:this.siteTags.html5.desktop.channelId}),this.siteTags.html5.desktop.channelId}}catch(e){return null}}}]),e}(),X=n(353),z=n(332),W=new S.a("BASE_UI"),K=function(){function e(t){var n=t.element,i=t.onClick,a=t.adManager;d()(this,e),_()(this,"_element",void 0),_()(this,"_onClickCallback",void 0),_()(this,"_adMgr",void 0),this._handleClick=this._handleClick.bind(this),this._onClickCallback=i,this._element=n,this._adMgr=a}return h()(e,[{key:"visible",set:function(e){W.info("AdView's BaseUI visible: ".concat(e)),e?Object(z.c)(this._element,"bolt-hidden"):Object(z.a)(this._element,"bolt-hidden")}},{key:"onClick",set:function(e){this._onClickCallback=e}},{key:"enabled",set:function(e){e?(this._setupAdManagerListeners(),this._element.addEventListener("click",this._handleClick)):(this._removeAdManagerListeners(),this._element.removeEventListener("click",this._handleClick))}}]),h()(e,[{key:"_handleClick",value:function(e){e.preventDefault(),this._onClickCallback&&this._onClickCallback.call(this)}},{key:"_setupAdManagerListeners",value:function(){W.debug("_setupAdManagerListeners")}},{key:"_removeAdManagerListeners",value:function(){}},{key:"invalidate",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"unload",value:function(){this.enabled=!1,this._adMgr=null}}]),e}();var J=function(e){b()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=g()(e);if(t()){var a=g()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}(n);function n(e){var i;return d()(this,n),i=t.call(this,e),_()(c()(i),"_handleAdMgrEvents",(function(e){i.muted=e.type===T.a.Media.Event.MUTED})),i.muted=e.autoplay,i}return h()(n,[{key:"muted",set:function(e){e?Object(z.a)(this._element,"muted"):Object(z.c)(this._element,"muted")}}]),h()(n,[{key:"_setupAdManagerListeners",value:function(){this._adMgr.on(T.a.Media.Event.MUTED,this._handleAdMgrEvents),this._adMgr.on(T.a.Media.Event.UNMUTED,this._handleAdMgrEvents)}},{key:"invalidate",value:function(){this.muted=this._adMgr.muted}}]),n}(K);var Y=function(e){b()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=g()(e);if(t()){var a=g()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}(n);function n(e){var i;return d()(this,n),i=t.call(this,e),_()(c()(i),"_handleAdMgrEvents",(function(e){e.type===T.a.Media.Event.PAUSED?(Object(z.a)(i._element,"paused"),Object(z.c)(i._element,"playing")):(Object(z.a)(i._element,"playing"),Object(z.c)(i._element,"paused"))})),i}return h()(n,[{key:"_setupAdManagerListeners",value:function(){this._adMgr.on(T.a.Media.Event.PAUSED,this._handleAdMgrEvents),this._adMgr.on(T.a.Media.Event.PLAY,this._handleAdMgrEvents)}}]),n}(K);var $=function(e){b()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=g()(e);if(t()){var a=g()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}(n);function n(e){var i;return d()(this,n),i=t.call(this,e),_()(c()(i),"_progressBar",void 0),_()(c()(i),"_duration",0),_()(c()(i),"_currentTime",0),_()(c()(i),"_handleAdMgrEvents",(function(e){e.type===T.a.Media.Event.DURATION_CHANGE?(i._duration=e.data,i._currentTime=0):i._currentTime=e.data,i.invalidate()})),i._progressBar=i._element.querySelector(".bolt-ad-progress"),i}return h()(n,[{key:"_setupAdManagerListeners",value:function(){this._adMgr.addEventListener(T.a.Media.Event.DURATION_CHANGE,this._handleAdMgrEvents),this._adMgr.addEventListener(T.a.Media.Event.TIME_UPDATE,this._handleAdMgrEvents)}},{key:"invalidate",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._duration>0){var e=this._element.clientWidth,t=e*this._currentTime/this._duration;this._progressBar.setAttribute("style","width:".concat(t,"px"))}else this._progressBar.setAttribute("style","width:0")}}]),n}(K),Z=n(333),ee=n(340);var te=function(e){b()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=g()(e);if(t()){var a=g()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}(n);function n(e){var i;return d()(this,n),i=t.call(this,e),_()(c()(i),"_duration",0),_()(c()(i),"_handleAdMgrEvents",(function(e){e.type===T.a.Media.Event.DURATION_CHANGE?void 0===e.data||isNaN(e.data)?Object(Z.b)(i._element):(i._duration=e.data,i._element.innerHTML="".concat(Object(ee.a)(e.data)),Object(Z.c)(i._element)):void 0===e.data||isNaN(e.data)?Object(Z.b)(i._element):(i._element.innerHTML="".concat(Object(ee.a)(i._duration-e.data)),Object(Z.c)(i._element))})),i}return h()(n,[{key:"_setupAdManagerListeners",value:function(){this._adMgr.on(T.a.Media.Event.TIME_UPDATE,this._handleAdMgrEvents),this._adMgr.on(T.a.Media.Event.DURATION_CHANGE,this._handleAdMgrEvents)}}]),n}(K);var ne=function(e){b()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=g()(e);if(t()){var a=g()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}(n);function n(e){var i;return d()(this,n),i=t.call(this,e),_()(c()(i),"_handleAdMgrEvents",(function(e){e.type===T.a.Player.Event.DURATION_CHANGE?void 0===e.data||isNaN(e.data)?Object(Z.b)(i._element):(i._element.innerHTML="".concat(Object(ee.a)(e.data)),Object(Z.c)(i._element)):e.type===T.a.Player.Event.ENDED&&Object(Z.b)(i._element)})),i}return h()(n,[{key:"_setupAdManagerListeners",value:function(){var e=this;e._adMgr.on(T.a.Media.Event.DURATION_CHANGE,e._handleAdMgrEvents.bind(e)),e._adMgr.on(T.a.Media.Event.ENDED,e._handleAdMgrEvents.bind(e))}}]),n}(K),ie=n(364),ae=n.n(ie),re=(n(365),new S.a("AD-VIEW")),oe=function(){function e(t){var n=this;d()(this,e),_()(this,"_playPauseBtn",void 0),_()(this,"_soundBtn",void 0),_()(this,"_timeBar",void 0),_()(this,"_timeLabel",void 0),_()(this,"_durationLabel",void 0),_()(this,"_adMgr",void 0),_()(this,"_fullscreen",void 0),_()(this,"_root",void 0),_()(this,"_handleAdMgrEvents",(function(e){e.type===T.a.Player.Event.ENTER_FULLSCREEN?n._fullscreen=!0:n._fullscreen=!1})),_()(this,"_onPlayPauseBtnClick",(function(){n._adMgr.paused?n._adMgr.resume():n._adMgr.pause()})),_()(this,"_onSoundBtnClick",(function(){re.debug("Event CB",{evt:"_onSoundBtnClick",value:!n._adMgr.muted}),n._adMgr.muted?n._adMgr.unmute():n._adMgr.mute()})),_()(this,"_onViewabilityMetricsChanged",(function(){var e=n;e._embed.isAd&&(e._embed.viewabilityMetrics.data&&e._embed.viewabilityMetrics.data.percent&&e._embed.viewabilityMetrics.data.percent<e._embed.config.settings.minimumViewability?(re.info("Viewability metrics changed",{msg:"below threshold",action:"defer autoplay",value:{inView:e._embed.viewabilityMetrics.data.percent}}),window.Bolt._stickyPlayer&&!1===window.Bolt._stickyPlayer.closeBtnClicked?n._adMgr.resume():n._adMgr.pause()):n._adMgr.resume())})),this.attachToEmbed(t),t.config&&t.config.settings.minimumViewability&&window.addEventListener("scroll",Object(k.H)(this._onViewabilityMetricsChanged.bind(this),200),Object(k.G)())}return h()(e,[{key:"attachToEmbed",value:function(e){this._embed=e,this._adMgr=e.BoltAdManager,this._embed.container.insertAdjacentHTML("beforeend",ae.a),this._root=this._embed.container.querySelector(".bolt-ad-view"),Object(z.a)(this._root,A.a.isMobile?"bolt-mobile":"bolt-desktop"),this._playPauseBtn=new Y({element:this._root.querySelector(".bolt-ad-play-pause-btn"),onClick:this._onPlayPauseBtnClick,adManager:this._adMgr}),this._soundBtn=new J({element:this._root.querySelector(A.a.isMobile?".bolt-mobile-ad-sound-btn":".bolt-desktop-ad-sound-btn"),onClick:this._onSoundBtnClick,adManager:this._adMgr,autoplay:this._embed.config.settings.autoplay}),this._timeBar=new $({element:this._root.querySelector(".bolt-ad-time-bar"),adManager:this._adMgr}),this._timeLabel=new te({element:this._root.querySelector(".bolt-ad-current-time"),adManager:this._adMgr}),this._durationLabel=new ne({element:this._root.querySelector(".bolt-ad-duration"),adManager:this._adMgr}),this._playPauseBtn.enabled=!0,this._soundBtn.enabled=!0,this._durationLabel.enabled=!0,this._timeBar.enabled=!0,this._timeLabel.enabled=!0,this.showPlayPauseBtn=!1,this._setupMgrListeners()}},{key:"_setupMgrListeners",value:function(){this._adMgr.on(T.a.Player.Event.ENTER_FULLSCREEN,this._handleAdMgrEvents),this._adMgr.on(T.a.Player.Event.EXIT_FULLSCREEN,this._handleAdMgrEvents)}},{key:"detachFromEmbed",value:function(){this.visible=!1,this._playPauseBtn.unload(),this._soundBtn.unload(),this._durationLabel.unload(),this._timeBar.unload(),this._timeLabel.unload(),this._embed.container.removeChild(this._root),this._playPauseBtn=null,this._soundBtn=null,this._durationLabel=null,this._timeBar=null,this._timeLabel=null}},{key:"updateVideoElementAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)this.videoElement.setAttribute(t,e[t])}},{key:"hideVideoElement",value:function(){Object(Z.b)(this.videoElement)}},{key:"showVideoElement",value:function(){Object(Z.c)(this.videoElement,"block","visible")}},{key:"showContainer",value:function(){Object(Z.c)(this.container,"block","visible")}},{key:"hideContainer",value:function(){Object(Z.b)(this.container,!1)}},{key:"resetContainer",value:function(){var e=this._root;e.style.width="100%",e.style.height="100%",e.style.bottom=0,e.style.top=0,e.style.left=0,e.style.right=0,e.style.backgroundColor=""}},{key:"addClass",value:function(e){this._root.classList.add(e)}},{key:"removeClass",value:function(e){this._root.classList.remove(e)}},{key:"fullscreen",get:function(){return this._fullscreen}},{key:"videoElement",get:function(){return this._root.querySelector("video.bolt-video")},set:function(e){var t=document.createElement("video");t.classList.add("bolt-video"),this._root.appendChild(t)}},{key:"container",get:function(){return this._root.querySelector(".bolt-ad-container")}},{key:"showPlayPauseBtn",set:function(e){this._playPauseBtn.visible=e}},{key:"visible",set:function(e){e?Object(z.c)(this._root,"bolt-hidden"):Object(z.a)(this._root,"bolt-hidden")}}]),e}(),se=n(345);var de=new S.a("AD-MANAGER"),le=3e4,ce=function(e){b()(i,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,i=g()(e);if(t()){var a=g()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return f()(this,n)}}(i);function i(e,n,a,r,o,s){var l,u;d()(this,i),u=t.call(this,s),_()(c()(u),"_adPlays",0),_()(c()(u),"_adSessionCount",0),_()(c()(u),"_isTycheRenderBackFilled",!1),_()(c()(u),"muted",!1),_()(c()(u),"_kinesisBMHasRecorded",{embedInitToAdLoaded:!1,embedInitToAdReady:!1}),_()(c()(u),"adQueue",[]),_()(c()(u),"handleServerResponse",(function(e){var t=c()(u),n=e.data,i=e.requestId;if(!n||"string"==typeof n&&0===n.trim().length)de.warn("Empty response from ad server"),t._retryAdRequest("Empty response.");else try{var a=(new DOMParser).parseFromString(n,"text/xml");t.handleXMLResponse(a,i)}catch(e){de.warn("Caught Error",{message:e.message,stack:e.stack}),t._retryAdRequest("Bad response.")}})),_()(c()(u),"_onAdMediaLoaded",(function(){var e=c()(u);if(e._killDCTimeout(),e.adPlayer){var t,n,i;if(e._isLinear=e.adPlayer.isLinear(),de.info("Ad media fully loaded",{linear:!!e._isLinear,ttl:(Date.now()-e._dcStartTime)/1e3}),null===(t=window.BoltLogger)||void 0===t||t.info("Ad media fully loaded, ".concat((Date.now()-e._dcStartTime)/1e3," secs after daisy-chain began")),e.type===T.a.Ad.Type.GOOGLE&&e.AdRequest.setMedia(e.adPlayer.getSource()),window.Bolt.postMessage(e.embedId,{adState:T.a.Ad.Event.STARTED}),e.AdRequest.success(),e.prebidWinner&&!e.embedRef.kinesis.headerbidHasBeenTracked){var a=e.prebidWinner.hb_bidder,r=e.prebidWinner;"rubicon"===a&&/rubicon(project)?.com/.test(e.hb_vast)?r.bidder="rubicon":r.bidder="appnexusAst"===a?"appnexus":a,de.info("Bid winner: ".concat(a,". Now sending impression to kinesis for bidder"),r),e.embedRef.kinesis.send("ad_impressions",r,"app")}if(e.embedRef.amazonWinner&&e.embedRef.kinesis.send("ad_impressions",{bidder:"amazonAps"},"app"),e.selectedServer.type!==T.a.Ad.Server.SPOTX&&e.selectedServer.type!==T.a.Ad.Server.SPOTX_SDK&&e.selectedServer.type!==T.a.Ad.Server.DFP?(e.recordCustomAdImpression(),e.SSTracker.success()):e._backfilling&&e.SSTracker.backfillSuccess(e._selectedTag),!e._kinesisBMHasRecorded.embedInitToAdLoaded){e._kinesisBMHasRecorded.embedInitToAdLoaded=!0;try{u.embedRef.kinesis.send("benchmarks",{type:"bolt_embedInit_to_onAdLoaded",duration:Date.now()-window.Bolt.bootStartTime},"app")}catch(e){de.warn("Caught Error",{message:e.message,stack:e.stack})}}"house-ad"===e.adType&&e.embedRef.renderer._hidePoster(),!0===(null===(n=window.Bolt)||void 0===n?void 0:null===(i=n._stickyPlayer)||void 0===i?void 0:i._isDocked)&&window.Bolt._hideStickyCloseButton()}})),_()(c()(u),"_onAdReady",(function(){if(u.embedRef.renderer.setIframeVisibility("visible"),!u._kinesisBMHasRecorded.embedInitToAdReady){u._kinesisBMHasRecorded.embedInitToAdReady=!0;try{u.embedRef.kinesis.send("benchmarks",{type:"bolt_embedInit_to_onAdReady",duration:Date.now()-window.Bolt.bootStartTime},"app")}catch(e){de.warn("Caught Error",{message:e.message,stack:e.stack})}}})),_()(c()(u),"_onAdError",(function(e){var t=c()(u),n="string"==typeof e.data?e.data:"Ad Error.";de.warn("AdError",{message:e.data,type:e.type,adPlayer:t.type}),window.Bolt.dispatchEvent(u.embedId,window.Bolt.BOLT_AD_ERROR,{name:window.Bolt.BOLT_AD_ERROR}),t._retryAdRequest(n)})),_()(c()(u),"_onAdTimeUpdate",(function(e){u._dispatchEvent(e)})),_()(c()(u),"_onAdDurationChange",(function(e){u._dispatchEvent(e)})),_()(c()(u),"_onAdQuartileUpdates",(function(e){var t=c()(u),n=t.embedRef.config,i=Object(k.g)(n,{category:window.ZeusGA.category.state,label:window.ZeusGA.label,isAd:!0});window.Bolt._dispatchAnalyticsEvent(t.containerId,i.gaCategory,e.type,i.selectedGALabel);var a=t.embedRef.AdController;e.type===T.a.Media.Event.FIRSTQUARTILE?(a.dispatchEvent(window.Bolt.BOLT_FIRST_QUARTILE),window.Bolt.dispatchEvent(u.embedId,window.Bolt.BOLT_FIRST_QUARTILE,{name:window.Bolt.BOLT_FIRST_QUARTILE})):e.type===T.a.Media.Event.MIDPOINT?(a.dispatchEvent(window.Bolt.BOLT_MIDPOINT),window.Bolt.dispatchEvent(u.embedId,window.Bolt.BOLT_MIDPOINT,{name:window.Bolt.BOLT_MIDPOINT})):e.type===T.a.Media.Event.THIRDQUARTILE&&(a.dispatchEvent(window.Bolt.BOLT_THIRD_QUARTILE),window.Bolt.dispatchEvent(u.embedId,window.Bolt.BOLT_THIRD_QUARTILE,{name:window.Bolt.BOLT_THIRD_QUARTILE}))})),_()(c()(u),"_onAdPlay",(function(e){var t=c()(u);t.adView.visible=!0,t._dispatchEvent(e);try{var n,i,a,r,o,s=Object(k.k)(t.embedId),d=Object(k.x)(t.embedId);"corner"===s&&d&&!(null===(n=t.embedRef.config)||void 0===n?void 0:null===(i=n.video)||void 0===i?void 0:null===(a=i.content)||void 0===a?void 0:a.poster)&&(t.container.style.backgroundColor="#000000"),(null===(r=window.PageOS)||void 0===r?void 0:null===(o=r.Prebid)||void 0===o?void 0:o.triggerUserSyncs)&&window.PageOS.Prebid.triggerUserSyncs(),t.embedRef.hideWhenNoPreroll&&(t.adView.container.style.opacity="1"),t.embedRef.AdController.dispatchEvent(window.Bolt.BOLT_AD_STARTED),window.Bolt.dispatchEvent(t.embedId,window.Bolt.BOLT_AD_STARTED,{adType:t.selectedServer.type,publisherId:Object(k.i)(t.embedRef.CurrentVideoConfig),videoId:t.embedRef.CurrentVideoConfig.content.videoId,linear:!0})}catch(e){de.error("Caught Error",{method:"boltAdStarted",message:e.message,stack:e.stack})}})),_()(c()(u),"_onAdPaused",(function(e){u._dispatchEvent(e)})),u.embedRef.BoltAdManager=c()(u),u.adView=new oe(window.Bolt.embeds[s]),u.AdSession=e,u.AdRequest=n,u.SSTracker=a,u.containerId=o,u.muted=!!u.embedRef.config.settings.autoplay,u.triedCampaigns=[],u.status="none",u.previousStatus="none",u.sequentialPrerollAdRequested=null,u.aborted=!1,u.type=null,u.bestMedia=null,u.ad=null,u._dcTimeout=null,u._dcStartTime=null,u._dcTimeoutReached=!1,le=r&&"number"==typeof r?r:le,u.timeout=le,de.info("Ad timeout set to",le/1e3," seconds"),null===(l=window.BoltLogger)||void 0===l||l.info("Ad timeout set to ".concat(le/1e3," seconds")),u._isLinear=!0,u.selectedServer=null;var h=function(){u.deletePrebidObjects(),u.selectedVMAPBreak&&u.trackVMAPEvent("breakEnd");var e=T.a.Ad.PLAYER_ID_PREFIX+u.embedRef.BoltAdManager.containerId;u.embedRef.AdController.dispatchEvent(window.Bolt.BOLT_AD_COMPLETE),window.Bolt.dispatchEvent(u.embedId,window.Bolt.BOLT_AD_COMPLETE,{videoId:e,publisherId:Object(k.i)(u.embedRef.CurrentVideoConfig)}),u.remove()};return u.addEventListener(T.a.Media.Event.ENDED,(function(){h()}),c()(u)),u.addEventListener(T.a.Media.Event.SKIPPED,(function(){h()}),c()(u)),u._onAdReady=u._onAdReady.bind(c()(u)),u._onAdQuartileUpdates=u._onAdQuartileUpdates.bind(c()(u)),u._onAdPlay=u._onAdPlay.bind(c()(u)),u._onAdPaused=u._onAdPaused.bind(c()(u)),u.addOnceEventListener(T.a.Ad.Event.READY,u._onAdReady),u.hasBeenTouched=!1,A.a.isMobile&&u._updateAdViewVideo(),u._selectedTag=null,u.forcedServer=null,u.embedRef.tagTestUrl&&(u.forcedServer=T.a.Ad.Server.SPOTX,u.embedRef.googleIma&&(u.forcedServer=T.a.Ad.Server.DFP)),u.dfpServer=null,u.spotxServer=null,u.genericServer=null,u._backfilling=!1,u.timing=null,u.adShouldBeQueued=null,u.VMAPAdapter=new q,u.VMAPBreaksForCurrentAdTiming=null,u.selectedVMAPBreak=null,u.processedVMAPSecond=null,u._currentRequestId=null,u.bid=null,u.pixelsContainer=document.createElement("div"),u.pixelsContainer.id="bolt_trackingpixels",u.pixelsContainer.setAttribute("class","position:absolute;bottom:0;left:0;visibility:hidden;width:1px;height:1px;"),document.body.appendChild(u.pixelsContainer),u.resetStatus=u.resetStatus.bind(c()(u)),u}return h()(i,[{key:"container",get:function(){return this.adView.container}}]),h()(i,[{key:"init",value:function(e){var t,n=this;n.resetStatus(),n.processedVMAPSecond=null,n.VMAPBreaksForCurrentAdTiming=null,n.VMAPAdapter.reset(),n.selectedVMAPBreak=null,n.isUsingVMAP=!1,n.config=n.embedRef.PlayerSettings.embedAds||n.embedRef.CurrentVideoConfig.advertising,n.config===n.embedRef.PlayerSettings.embedAds&&(n.config=n.embedRef.CurrentVideoConfig.advertising,de.info("Using embed ad settings",n.config)),n.selectServer(),null===(t=window.BoltLogger)||void 0===t||t.info("Checking if VMAP is used");var i,a=n.selectedServer&&n.selectedServer.selectTag("vmap");a?n.VMAPAdapter.init(a,(function(){var t;de.info("Using VMAP"),null===(t=window.BoltLogger)||void 0===t||t.info("Found VMAP: ".concat(a)),n.isUsingVMAP=!0,e()}),(function(){var t;null===(t=window.BoltLogger)||void 0===t||t.error("VMAP error"),e()})):(null===(i=window.BoltLogger)||void 0===i||i.info("Not using VMAP"),e())}},{key:"_updateAdViewVideo",value:function(){A.a.system.ios&&this.embedRef.PlayerSettings.autoplay?(this.adView.updateVideoElementAttributes({playsinline:!0,muted:!0,id:"".concat(T.a.Ad.PLAYER_ID_PREFIX).concat(this.containerId),style:"position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0;visibility:hidden"}),this.hasBeenTouched=!0):this.adView.updateVideoElementAttributes({id:"".concat(T.a.Ad.PLAYER_ID_PREFIX).concat(this.containerId),style:"position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0;visibility:hidden"})}},{key:"deletePrebidObjects",value:function(){var e;this.prebidWinner=Object(k.a)(this.prebidWinner),this.prebidInfo=Object(k.a)(this.prebidInfo),this.kassandraWinner=Object(k.a)(this.kassandraWinner),delete this.embedRef.amazonWinner,se.a.bidInfo&&delete se.a.bidInfo,o()(null===(e=window.Bolt)||void 0===e?void 0:e.prebidPrerollAuctionPromise)&&delete window.Bolt.prebidPrerollAuctionPromise}},{key:"resetStatus",value:function(){de.debug("Reset ad manager"),this.previousStatus=this.status,this.status="none",this.sequentialPrerollAdRequested=null,this._tycheRenderedBackFill=!1,this._adPlays+1>this.embedRef.prerollAdAmt&&(this.adView.visible=!1),this.adPlayer=null,this.ad=null,this.VMAPAdapter.breaks||(this.selectedServer=null),this.forcedServer=null,this.embedRef.tagTestUrl&&(this.forcedServer=T.a.Ad.Server.SPOTX,this.embedRef.googleIma&&(this.forcedServer=T.a.Ad.Server.DFP)),this.adtechGoogleAdCount=null,this.provider=null,this.triedCampaigns=[],this._backfilling=!1,this.timing=null,this.adShouldBeQueued=null,this.adQueue.length=0,this._currentRequestId=null,this.type=null,this.bestMedia=null,this._isLinear=null,this._dcTimeout&&(window.clearTimeout(this._dcTimeout),this._dcTimeout=null),this.bid=null,this.VMAPBreaksForCurrentAdTiming&&0===this.VMAPBreaksForCurrentAdTiming.length&&(this.VMAPBreaksForCurrentAdTiming=null),this.selectedVMAPBreak=null,this._selectedTag=null,this.adView.resetContainer()}},{key:"clearTrackingImages",value:function(){if(this.pixelsContainer&&this.pixelsContainer.firstElementChild)for(;this.pixelsContainer.firstElementChild;)this.pixelsContainer.removeChild(this.pixelsContainer.firstElementChild)}},{key:"createServers",value:function(e){for(var t=this,n=0,i=t.config.servers.length;n<i;n++){var a=new Q(t.config.servers[n],t.embedId);e&&(a.type=e),a.type===T.a.Ad.Server.DFP?t.dfpServer=a:a.type===T.a.Ad.Server.SPOTX?t.spotxServer=a:a.type===T.a.Ad.Server.SPOTX_SDK?t.spotxSdkServer=a:a.type===T.a.Ad.Server.DISPLAY_BACKFILL?t.displayBackfillServer=a:a.type===T.a.Ad.Server.HOUSE_AD?t.houseAdServer=a:t.genericServer=a}}},{key:"getSelectedServer",value:function(e){var t=this;return e===T.a.Ad.Server.DFP?t.dfpServer:e===T.a.Ad.Server.SPOTX?t.spotxServer:e===T.a.Ad.Server.DISPLAY_BACKFILL?t.displayBackfillServer:e===T.a.Ad.Server.HOUSE_AD?t.houseAdServer:e===T.a.Ad.Server.GENERIC_GOOGLE||e===T.a.Ad.Server.GENERIC_VAST?t.genericServer:t.genericServer?t.genericServer:t.dfpServer||t.spotxServer}},{key:"selectServer",value:function(){var e=this;return e.selectedServer?e.selectedServer:(e.dfpServer=null,e.spotxServer=null,e.spotxSdkServer=null,e.displayBackfillServer=null,e.houseAdServer=null,e.genericServer=null,e.createServers(this.forcedServer),e.selectedServer=e.getSelectedServer(this.forcedServer),e.selectedServer&&(e.selectedServer.attempts=0),e.selectedServer)}},{key:"hasVMAPBreak",value:function(e){if(Math.floor(e)===this.processedVMAPSecond)return!1;var t=this.VMAPAdapter.getBreaks(e);return t&&de.info("Found VMAP ad break at ".concat(e,"s")),!!t}},{key:"requestAd",value:function(e){var t=this,n=e.timing,i=e.cuepoint,a=e.loadAd;return t._prepareForAdRequest(e)?(t.tycheRequestBackFill(),t._backfilling=!1,t.timeout=le,t.VMAPAdapter.breaks&&(t.VMAPBreaksForCurrentAdTiming||(t.VMAPBreaksForCurrentAdTiming="midroll"===n?t.VMAPAdapter.getBreaks(i):t.VMAPAdapter.getBreaks(n))),t.DOMPosition=Object(E.a)(t.embedRef),t._start(),!0):!0===a&&!0===t.adShouldBeQueued&&(t.adShouldBeQueued=!1,t._playCb(),!0)}},{key:"_prepareForAdRequest",value:function(e){var t=this,n=e.timing,i=e.cuepoint,a=e.adShouldBeQueued,r=e.loadAd,o=e.callbackIfRequestAccepted,s=e.callbackForLoadAd;if("none"!==t.status){var d,l;if(r)"function"==typeof s&&s(),de.info("loadAd() API called. Play Ad"),null===(d=window.BoltLogger)||void 0===d||d.info("loadAd() API called. Play Ad");else de.info("Currently requesting ad, skipping the new request (".concat(n,", ").concat(i,"s)")),null===(l=window.BoltLogger)||void 0===l||l.warn("Currently requesting ad, skipping the new request");return!1}return de.info("Preparing to make new ad request (".concat(n,", ").concat(i,"s)")),t.clearTrackingImages(),t.selectedServer||t.selectServer(),t.timing=n,t.cuepoint=i,t.adShouldBeQueued=!!a,t.aborted=!1,t.previousStatus=t.status,t.status="requesting",t.AdSession.reset(),t.AdRequest.reset(),t.SSTracker.reset(),"function"==typeof o&&o(),!0}},{key:"_start",value:function(e){var t=this;if(t._selectedTag=null,t.type=null,t.AdRequest.reset(),!t.aborted){if(!t.selectedServer)return"function"==typeof e&&e.call(null),t.resetStatus(),void t._dispatchEvent(T.a.Ad.Event.TAG_NOT_AVAILABLE);var n,i,a;if(t._backfilling)null===(n=window.BoltLogger)||void 0===n||n.info("Starting backfill.");if(t.isUsingVMAP&&!t._backfilling){if(de.debug("Trying to find a VMAP break"),null===(i=window.BoltLogger)||void 0===i||i.info("Looking for a VMAP break"),t.VMAPBreaksForCurrentAdTiming&&t.VMAPBreaksForCurrentAdTiming.length>0)t.processedVMAPSecond=t.cuepoint,de.info("Using VMAP Breaks :",t.VMAPBreaksForCurrentAdTiming),null===(a=window.BoltLogger)||void 0===a||a.info("Found a VMAP break @".concat(t.cuepoint,"s")),t.selectedVMAPBreak=t.VMAPBreaksForCurrentAdTiming.shift(),t._selectedTag=t.selectedVMAPBreak?t.selectedVMAPBreak.adURI:null,t._selectedTag&&/doubleclick.net/i.test(t._selectedTag)&&(t.type=T.a.Ad.Type.GOOGLE,t.provider=T.a.Ad.Provider.GOOGLE)}else t._selectedTag=t.selectedServer.selectTag(t.timing);if(!t._selectedTag){var r,o;if(t.isUsingVMAP)de.warn("No ".concat(t.timing," VMAP break found")),null===(r=window.BoltLogger)||void 0===r||r.error("No ".concat(t.timing," VMAP break found"));else de.error("No ".concat(t.timing," tag in config")),null===(o=window.BoltLogger)||void 0===o||o.error("No ".concat(t.timing," tag in config"));return"function"==typeof e&&e.call(null),t.resetStatus(),void t._dispatchEvent(T.a.Ad.Event.TAG_NOT_AVAILABLE)}t._dispatchEvent(T.a.Ad.Event.REQUESTED);var s,d=function(){t.src=Object(E.k)(t.embedRef,t.src,t.selectedServer),t.selectedServer.attempts=0,t._dcTimeout||t.startDCTimer(),t.AdSession.start(t._backfilling),t._backfilling?t.SSTracker.backfill(t._selectedTag):t.SSTracker.start({tag:t._selectedTag,timing:t.timing,serverType:t.selectedServer.type,vmap:t.isUsingVMAP?t.VMAPAdapter.primaryTag:null}),t.daisyChain()};t.src=t._selectedTag.concat(),t.adLoadTimeStart=Date.now(),s=t._adSessionCount>0||"preroll"!==t.timing?Object(E.i)(t.embedRef.renderer,t.selectedServer.siteTags,t.embedRef.CurrentVideoConfig.advertising):window.Bolt.prebidPrerollAuctionPromise,t.prebidSettings=Object(E.b)(t.selectedServer.siteTags,t.embedRef),t.prebidSettings.timing=t.timing,t.prebidSettings.serverType=t.selectedServer.type,de.debug("Prebid settings",t.prebidSettings);var l="preroll"===t.timing;if(void 0!==t.prebidSettings.requestBeforeTimeout&&(l="preroll"===t.timing&&t.prebidSettings.requestBeforeTimeout),void 0!==window.__pwRequestBeforeTimeout&&(l=window.__pwRequestBeforeTimeout),!t.prebidSettings||t.prebidSettings.enabled&&!l)try{s.then((function(e){t._prebidAuctionEndCb(e,d)}))}catch(e){t._prebidAuctionEndCb({},d)}else t._prebidAuctionEndCb(se.a.bidInfo,d)}}},{key:"_prebidAuctionEndCb",value:function(e,t){var n,i,a=this;a.prebidInfo=e,a.prebidWinner=(null==e?void 0:null===(n=e.winner)||void 0===n?void 0:n.adserverTargeting)||null,a.kassandraWinner=(null==e?void 0:null===(i=e.kassandraWinner)||void 0===i?void 0:i.adserverTargeting)||null,a.selectedServer.type===T.a.Ad.Server.DFP?a.initGoogleDFPSDK(a._currentRequestId):t()}},{key:"startDCTimer",value:function(e){var t=this,n=new Date;de.info("Ad request started",{ts:n}),t._dcTimeoutReached=!1,t._dcTimeout&&(clearTimeout(t._dcTimeout),t._dcTimeout=null),t._dcStartTime=n.getTime(),t._dcTimeout=setTimeout((function(){var e=new Date;de.warn("Ad request timeout reached ",{ts:e}),t._dcTimeoutReached=!0,t._fail()}),e||t.timeout)}},{key:"tycheRequestBackFill",value:function(){var e={action:"boltRequestBackFill",id:this.embedId};window.postMessage(JSON.stringify(e),"*")}},{key:"tycheRenderBackFill",value:function(){var e=this;e._isTycheRenderBackFilled=!0,e.type=T.a.Ad.Type.DISPLAY_BACKFILL,e.forcedServer=e.type,e.selectedServer=null,e.selectServer(),e.playAd()}},{key:"requestHouseAd",value:function(){var e=this;e.type=T.a.Ad.Type.HOUSE_AD,e.forcedServer=e.type,e.selectedServer=null,e.selectServer(),e.playAd()}},{key:"daisyChain",value:function(){var e=this;if(e.adtechGoogleAdCount=null,e.bestMedia=null,e.provider=null,e.AdRequest.reset(),e.removeAllListeners("clicked"),e.removeEventListener(T.a.Media.Event.LOADED,e._onAdMediaLoaded),e.adPlayer&&e.adPlayer.removeEventListener(T.a.ERROR,e._onAdError),!e.aborted)if(e._dcTimeoutReached)de.error("Daisy chain timeout.");else{var t;if(e.selectedServer||e.selectServer(),e.selectedServer.attempts++,e.selectedServer.attempts>1&&(e._kinesisBMHasRecorded.embedInitToAdLoaded=!0,e._kinesisBMHasRecorded.embedInitToAdReady=!0),de.info("Ad attempt #".concat(e.selectedServer.attempts," of ").concat(e.selectedServer.maxAttempts)),e.selectedServer.type===T.a.Ad.Server.DFP)e.kassandraWinner?(Object(k.a)(e.kassandraWinner),e.kassandraWinner=null,de.info("Removing kassandra prebid object and requesting DFP again")):(null===(t=e.prebidWinner)||void 0===t?void 0:t.hb_bidder)?(e.deletePrebidObjects(),de.info("DFP request attempt #2 without prebid")):(e.selectedServer.attempts++,de.info("No prebid winners, no DFP daisy chain request attempt #2"));if(e.selectedServer.attempts>e.selectedServer.maxAttempts)return de.info("Max ad attempts ".concat(e.selectedServer.maxAttempts," exhausted")),e.deletePrebidObjects(),e._fail(),null;if(e._backfilling||(e.selectedServer.type===T.a.Ad.Server.GENERIC_GOOGLE||e.isUsingVMAP)&&e.AdRequest.start(e._selectedTag,null,e.selectedServer.attempts),e._currentRequestId=Date.now(),e.selectedServer.type===T.a.Ad.Server.GENERIC_GOOGLE||window.googleIma||e.isUsingVMAP&&e.type===T.a.Ad.Type.GOOGLE)if(e.prefetchEnabled){var n=("overlay"===e.timing?e.overlayAdPool:e.linearAdPool).getAd();n&&n.ad?(e.src=n.ad,e.processCustomGoogleAd()):e._fail()}else e.processCustomGoogleAd();else e.selectedServer.type===T.a.Ad.Server.DFP?e.initGoogleDFPSDK(e._currentRequestId):e._loadNewTag()}}},{key:"_excludeAdCampaignKeys",value:function(){var e=this;if(e.triedCampaigns.length>0){e.triedCampaigns=[].concat(a()(e.triedCampaigns),a()(window.Bolt.heavyAds)).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),e.selectedServer.type===T.a.Ad.Server.SPOTX&&(e.src="".concat(e.src,"&ads_to_block[]=").concat(e.triedCampaigns.join("&ads_to_block[]=")))}}},{key:"getCustomReportParams",value:function(){var e,t,n="";return(null===(e=this.embedRef.CurrentVideoConfig)||void 0===e?void 0:null===(t=e.settings)||void 0===t?void 0:t.customReporting)&&this.embedRef.CurrentVideoConfig.settings.customReporting.forEach((function(e){n+="&".concat(e.key,"=").concat(e.value)})),n}},{key:"_loadNewTag",value:function(){var e=this;if(!e.aborted){var t=function(){var t,n=e._currentRequestId;1===e.selectedServer.attempts?e.AdRequest.start(e.src,e.thirdPartyTag||null,e.selectedServer.attempts,e.bid):e.AdRequest.start(e.src,e.thirdPartyTag||null,e.selectedServer.attempts),e.selectedServer.type===T.a.Ad.Server.SPOTX&&e.spotxServer&&("prefetching"!==e.previousStatus||e.selectedServer.attempts>1)&&e._excludeAdCampaignKeys(),de.debug("Loading tag: ".concat(e.src)),null===(t=window.BoltLogger)||void 0===t||t.info("Loading tag: ".concat(e.src));var i=e.selectedServer.type===T.a.Ad.Server.SPOTX;Object(k.J)({url:e.src,method:"get",requestId:n,withCredentials:i}).then((function(t){e.handleServerResponse(t)})).catch((function(t){e._retryAdRequest("Network error. Id: ".concat(t))}))};if(e.selectedServer.type===T.a.Ad.Server.SPOTX&&e.spotxServer){e.src=X.d(e.embedRef,e.src),e.src=X.c(e.embedRef,e.src),e.src=X.b(e.embedRef,e.src),e.src+="&custom[daisy_chain_count]=".concat(e.selectedServer.attempts);var n=Object(A.b)();if(n&&(e.src+=X.e(n)),e.embedRef.shouldReadGDPRConsents)return void X.a(e.embedRef,e.src,(function(){t()}))}t()}}},{key:"_retryAdRequest",value:function(e){var t,n="string"==typeof e?e:"Error.";this.AdRequest.fail(n),null===(t=window.BoltLogger)||void 0===t||t.warn("".concat(n," Retrying.")),this.previousStatus=this.status,this.status="failed",this.src=this._selectedTag.concat(),this.daisyChain()}},{key:"_sendNoAdMsg",value:function(){var e;de.info("No Ad",{ts:Date.now()}),null===(e=window.BoltLogger)||void 0===e||e.error("No Ad"),window.Bolt.dispatchEvent(this.embedId,window.Bolt.BOLT_AD_ERROR,{name:window.Bolt.BOLT_AD_ERROR}),this.resetStatus(),this._dispatchEvent(T.a.Ad.Event.FAILED)}},{key:"_fail",value:function(){var e,t,n,i,a,r,o=this;if(o.adtechGoogleAdCount=null,o._isTycheRenderBackFilled||!(null===(e=this.embedRef)||void 0===e?void 0:null===(t=e.displayBackfill)||void 0===t?void 0:t.enabled)){if((null===(n=o.embedRef.CurrentVideoConfig)||void 0===n?void 0:null===(i=n.advertising)||void 0===i?void 0:i.houseAd)||(null===(a=o.embedRef.CurrentVideoConfig)||void 0===a?void 0:null===(r=a.advertising)||void 0===r?void 0:r.houseAds))o.requestHouseAd();else if(o.adPlayer&&(o.adPlayer.remove(),o.adPlayer.removeEventListener(T.a.ERROR,o._onAdError),o.adPlayer=null),o.removeEventListener(T.a.Media.Event.LOADED,o._onAdMediaLoaded),!o.aborted){if(!o.selectedServer||o._dcTimeoutReached)return o.resetStatus(),void o._dispatchEvent(T.a.Ad.Event.FAILED);var s;if(o.selectedServer.type!==T.a.Ad.Server.SPOTX&&o.selectedServer.type!==T.a.Ad.Server.SPOTX_SDK&&o.selectedServer.type!==T.a.Ad.Server.DFP)if(o._selectedTag&&o.SSTracker.fail(),o.config===o.embedRef.PlayerSettings.embedAds&&(o.config=o.embedRef.CurrentVideoConfig.advertising,o.createServers()),o.dfpServer||o.spotxServer)de.warn("Custom tag failed",{tag:o._selectedTag}),null===(s=window.BoltLogger)||void 0===s||s.warn("Self-service tag failed."),o._backfilling=!0,o.triedCampaigns=[],o.selectedServer=o.dfpServer||o.spotxServer,o.AdSession.fail(),o.embedRef.setTimeout((function(){de.info("Starting a new ad session"),o._start()}),100);else o._selectedTag&&o.recordCustomAdImpression(),o._sendNoAdMsg();else o._backfilling&&(o.recordCustomAdImpression(),o.SSTracker.backfillFail(o._selectedTag)),o._sendNoAdMsg()}}else o.tycheRenderBackFill()}},{key:"handleXMLResponse",value:function(e,t){var n,i=this;if(t!==i._currentRequestId||i.aborted)de.warn("Request id does not match the current id",{requestId:t,currentRequestId:i._currentRequestId});else{var a;if(i._dcTimeoutReached)return de.warn("Received a response from ad server but daisy chain timeout limit has been reached, exit."),this.AdRequest.fail("Daisy-chain timeout"),void(null===(a=window.BoltLogger)||void 0===a||a.error("Received a response from ad server but timeout limit has been reached, exit."));if(null!==e){var r=Object(k.I)(e);if(null===r?i.type="unknown":void 0!==r.VAST?i.type=T.a.Ad.Type.VAST:i.type="unknown",de.debug("Received a response",e),null===(n=window.BoltLogger)||void 0===n||n.success("Received a response"),i.type===T.a.Ad.Type.VAST){var o=e.getElementsByTagName("VASTAdTagURI")[0],s=function(){var t;try{t=e.getElementsByTagName("Ad")[0]}catch(e){}return t}();if(void 0!==s){if(i.campaignId=s.id,i.campaignId&&(i.selectedServer.type===T.a.Ad.Server.SPOTX?(i.triedCampaigns.push(X.f(i.campaignId)),i.AdRequest.campaignId=X.f(i.campaignId)):(i.triedCampaigns.push(i.campaignId),i.embedRef.AdRequest.campaignId=i.campaignId)),o){var d=o.textContent;try{i.thirdPartyTag=Object(E.k)(i.embedRef,d)}catch(e){de.warn("Caught Error",{message:e.message,stack:e.stack})}if(-1!==d.indexOf("adotube.com")&&"preroll"!==i.timing)return de.debug("Received Adotube tag not in preroll. Retrying."),void i._retryAdRequest("Received Adotube tag, but not in a preroll.")}else de.info("No VAST Ad tag URI.");i._parseVAST(e,t)}else de.warn("Empty VAST document."),i.selectedServer.type===T.a.Ad.Server.SPOTX?i._fail():i._retryAdRequest("Bad response")}else de.warn("bad response from ad server"),i._retryAdRequest("Bad response")}else i._retryAdRequest("Bad response")}}},{key:"_parseVAST",value:function(e,t){var n,i=this;de.info("Processing VAST XML",{xml:e}),null===(n=window.BoltLogger)||void 0===n||n.info("Processing VAST XML"),new B(e,(function(e,n){i.successfulVASTResponse(e,t,n)}))}},{key:"successfulVASTResponse",value:function(e,t,n){var i,a=this;n&&(null===(i=window.BoltLogger)||void 0===i||i.info("VAST XML has been processed. ".concat(n?"CPM: ".concat(n.toString()):"")),de.info("VAST XML has been processed",{cpm:n?n.toString():""}));if(t===a._currentRequestId&&!a.aborted){var r;if(a._dcTimeoutReached)return de.warn("Received a VAST ad but daisy chain timeout limit has been reached, exit."),null===(r=window.BoltLogger)||void 0===r||r.error("Received a VAST ad but timeout limit has been reached, exit."),void this.AdRequest.fail("Timeout");if(null==e)de.warn("Empty VAST document"),a._retryAdRequest("Empty VAST document.");else{a.ad=e.getAd(!0);var o=a.ad.linear.getAllMediaAsObject(),s=[T.a.Mime.JS,T.a.Mime.XJS,T.a.Mime.MP4,T.a.Mime.WEBM,T.a.Mime.OGG];if(a.bestMedia=Object(k.h)(Object(k.d)(o),s),null!==a.bestMedia){var d,l,c;if(this.previousStatus=this.status,a.status="media_located",de.info("Found a playable ad media file",a.bestMedia),/dcm/i.test(a.ad.properties.AdSystem)||/googleapis.com\/.*\/vpaid_adapter.js$/.test(a.bestMedia.src)||a.embedRef.tagTestUrl&&a.embedRef.googleIma)null===(d=window.BoltLogger)||void 0===d||d.info("Found a Google DCM VAST/VPAID"),a.provider=T.a.Ad.Provider.GOOGLE,a.type=T.a.Ad.Type.GOOGLE_DCM_VPAID;else if(null===(l=window.BoltLogger)||void 0===l||l.info("Found a playable ad media file :".concat(a.bestMedia.src)),a.bestMedia.type===T.a.Mime.JS||a.bestMedia.type===T.a.Mime.XJS)if(a.type=T.a.Ad.Type.JS_VPAID,/spotxcdn.com/.test(a.bestMedia.src)?a.provider=T.a.Ad.Provider.SPOTX:/ds.serving-sys.com\/.*\/VPAIDAPI.js$/i.test(a.bestMedia.src)?(a.provider=T.a.Ad.Provider.SIZMEK,a.type=T.a.Ad.Type.GOOGLE_DCM_VPAID):a.provider="generic",a.config.useIMAForVPAID||a.embedRef.tagTestUrl&&a.embedRef.googleIma)null===(c=window.BoltLogger)||void 0===c||c.info("Playing JS VPAID with IMA SDK"),a.type=T.a.Ad.Type.GOOGLE_DCM_VPAID;var u=function(){a.MoatAnalytics?a.MoatAnalytics.init({duration:a.ad.linear.getDuration(),videoUrl:a.bestMedia},(function(){a.playAd()})):a.playAd()};if(a.sequentialPrerollAdRequested){a.previousStatus=a.status;var h=0,p=window.setInterval((function(){window.Bolt.createChannel(a.embedId,"currentContent",(function(e){"ended"===e.state?(window.clearTimeout(p),u()):++h>1e3*T.a.Ad.AD_PREFETCH_TIME_BEFORE_VID_ENDS&&window.clearTimeout(p)}))}),10)}else u()}else de.info("No playable ad media"),a._retryAdRequest("No playable ad media.")}}}},{key:"processCustomGoogleAd",value:function(){var e=this;if(!e.aborted){var t;if(e._dcTimeoutReached)return de.warn("About to process custom google ad but daisy chain timeout limit has been reached."),void(null===(t=window.BoltLogger)||void 0===t||t.error("About to process custom google ad but timeout limit has been reached"));e.adView.hideVideoElement(),e.type=T.a.Ad.Type.GOOGLE,e.playAd()}}},{key:"initGoogleDFPSDK",value:function(e){var t,i=this;if(!i.aborted){var a;if(i._dcTimeoutReached)return de.debug("About to initialize Google IMA SDK for DFP but timeout limit has been reached",{requestId:e}),void(null===(a=window.BoltLogger)||void 0===a||a.error("About to initialize Google IMA SDK for DFP but timeout limit has been reached."));i.AdSession.start(),null===(t=window.BoltLogger)||void 0===t||t.info("Google DFP ad."),i.selectedServer.attempts=i.selectedServer.attempts||1,1===i.selectedServer.attempts?i.AdRequest.start(i.src,null,i.selectedServer.attempts,i.bid):i.AdRequest.start(i.src,null,i.selectedServer.attempts),i.AdRequest.campaignId=i.campaignId,n.e(8).then(n.bind(null,379)).then((function(e){var t=e.default;i.provider=T.a.Ad.Provider.GOOGLE,i.type=T.a.Ad.Type.GOOGLE_DCM_VPAID,i.adPlayer=new t(i,i.embedId),i._playCb()}))}}},{key:"trackVMAPEvent",value:function(e){var t;this.selectedVMAPBreak.trackingEvents&&(de.debug("Tracking vmap event",{event:e}),null===(t=window.BoltLogger)||void 0===t||t.info("Tracking vmap ".concat(e)),this.selectedVMAPBreak.trackingEvents.track(e))}},{key:"_killDCTimeout",value:function(){var e=this;e._dcTimeout&&(de.debug("Kill DC timeout"),clearTimeout(e._dcTimeout),e._dcTimeout=null)}},{key:"_playCb",value:function(){var e,t=this;if(!t.aborted){if(t.adShouldBeQueued)return t.adQueue.push(t.ad),void t._dispatchEvent(T.a.Ad.Event.QUEUED,{requestAdAPI:!0,adFilled:!0});de.debug("Trying to play the ad in ".concat((Date.now()-t._dcStartTime)/1e3," secs after daisy-chain began")),null===(e=window.BoltLogger)||void 0===e||e.info("Trying to play the ad in ".concat((Date.now()-t._dcStartTime)/1e3," secs after daisy-chain began")),t.selectedServer&&t.selectedServer.type!==T.a.Ad.Server.DFP&&(t.selectedServer.type===T.a.Ad.Server.GENERIC_GOOGLE||t.isUsingVMAP&&t.type===T.a.Ad.Type.GOOGLE||t.selectedServer.type===T.a.Ad.Server.DFP?t.adPlayer.customTag=t.src:t.type===T.a.Ad.Type.GOOGLE_DCM_VPAID&&(t.adPlayer.customTag=t.src.replace(";acao=*",""),de.info("Tag for Google Player ",{tag:t.adPlayer.customTag}))),t._dcTimeout||t.startDCTimer(),t.adPlayer.addEventListener(T.a.Media.Event.TIME_UPDATE,t._onAdTimeUpdate),t.adPlayer.addEventListener(T.a.Media.Event.DURATION_CHANGE,t._onAdDurationChange),t.adPlayer.addEventListener(T.a.Media.Event.FIRSTQUARTILE,t._onAdQuartileUpdates),t.adPlayer.addEventListener(T.a.Media.Event.MIDPOINT,t._onAdQuartileUpdates),t.adPlayer.addEventListener(T.a.Media.Event.THIRDQUARTILE,t._onAdQuartileUpdates),t.adPlayer.addEventListener(T.a.Media.Event.PLAY,t._onAdPlay),t.adPlayer.addEventListener(T.a.Media.Event.PAUSED,t._onAdPaused),t.adPlayer.addEventListener(T.a.ERROR,t._onAdError),t.addEventListener(T.a.Media.Event.LOADED,t._onAdMediaLoaded);try{t.embedRef.kinesis.send("benchmarks",{type:"ads_loadNewTag_to_playCb",duration:Date.now()-t.adLoadTimeStart},"app")}catch(e){de.warn("Caught Error",{message:e.message,stack:e.stack})}t.adLoadTimeStart=null,de.info("Ad load time",{ttl:Date.now()-t.adLoadTimeStart}),(t.adQueue.length>0||!t.adShouldBeQueued)&&(t.adQueue.length>0&&(t.ad=t.adQueue.pop(),t.adQueue.length=0),t.adPlayer.playAd(),t._dispatchEvent(T.a.Ad.Event.READY),t.adView.visible=!0,t.embedRef.prerollAdAmt&&(t._adPlays+=1))}}},{key:"playAd",value:function(){var e,t=this;try{e=JSON.parse(t.ad.linear.parameters).ad_id}catch(e){de.debug("Unable to JSON parse creative data inside spotx adapter")}if(!t.aborted){if(t.AdRequest.adType=t.type,t.AdRequest.network=t.provider,t.type!==T.a.Ad.Type.GOOGLE&&t.type!==T.a.Ad.Type.DISPLAY_BACKFILL&&t.type!==T.a.Ad.Type.HOUSE_AD)try{t.AdRequest.setMedia(t.bestMedia.src,t.bestMedia.type)}catch(e){de.debug("Not able to set media in ad request (src or type missing)",{src:t.bestMedia.src,type:t.bestMedia.type})}if(t.type===T.a.Ad.Type.VAST)n.e(14).then(n.bind(null,380)).then((function(e){var n=e.default;t.adPlayer=new n(t),t._playCb()}));else if(t.type===T.a.Ad.Type.JS_VPAID){var i;if(de.info("Playing JS VPAID ",t.provider),t.provider===T.a.Ad.Provider.SPOTX?Promise.all([n.e(0),n.e(12)]).then(n.bind(null,381)).then((function(e){var n=e.default;t.adPlayer=new n(t,t.bestMedia,t.ad.linear.parameters,t.embedId),t._playCb()})):n.e(0).then(n.bind(null,372)).then((function(e){var n=e.default;t.adPlayer=new n(t,t.bestMedia,t.ad.linear.parameters,t.embedId),t._playCb()})),e)null===(i=window.BoltLogger)||void 0===i||i.info("Attempting to try Campaign ID: <strong><u>".concat(e,"</u></strong>"))}else if(t.type===T.a.Ad.Type.GOOGLE||t.type===T.a.Ad.Type.GOOGLE_DCM_VPAID)if(A.a.isMobile)if(t.embedRef.MobileIMAPlayer)t.adPlayer=t.embedRef.MobileIMAPlayer,t._playCb();else var a=t.embedRef.setInterval((function(){t.embedRef.MobileIMAPlayer&&(clearInterval(a),t.adPlayer=t.embedRef.MobileIMAPlayer,t._playCb())}),10);else n.e(8).then(n.bind(null,379)).then((function(e){var n=e.default;de.debug("Requiring google ads player"),t.adPlayer=new n(t,t.embedId),t._playCb()}));else if(t.type===T.a.Ad.Type.DISPLAY_BACKFILL)n.e(6).then(n.bind(null,382)).then((function(e){var n=e.default;t.adPlayer=new n(t.embedId),t._playCb()}));else if(t.type===T.a.Ad.Type.HOUSE_AD){var r,o=Object(E.f)(null===(r=t.embedRef.CurrentVideoConfig)||void 0===r?void 0:r.advertising);void 0!==o?n.e(9).then(n.bind(null,383)).then((function(e){var n=e.default;t.adPlayer=new n(t.embedId,o),t._playCb()})):(de.info("No house ad setup"),t._dispatchEvent(T.a.Ad.Event.FAILED))}}}},{key:"getDuration",value:function(){return this.adPlayer.getDuration()}},{key:"getCurrentTime",value:function(){var e=this.adPlayer.getCurrentTime();return void 0===e&&(e=0),e}},{key:"getPercentPlayed",value:function(){var e=this;return null!==e.getCurrentTime()&&null!==e.getDuration()?e.getCurrentTime()/e.getDuration()*100:null}},{key:"getVolume",value:function(){return this.adPlayer.getVolume()}},{key:"pause",value:function(){try{this.adPlayer.pause()}catch(e){}}},{key:"resume",value:function(){try{this.adPlayer.resume()}catch(e){}}},{key:"setVolume",value:function(e){var t;de.debug("Set player volume",{func:"setVolume",value:e}),null===(t=this.adPlayer)||void 0===t||t.setVolume(e),this.currentVolume=e,this.muted=0===e}},{key:"mute",value:function(){var e;this.muted||(de.info("Mute",{muted:this.muted}),this.currentVolume=this.getVolume(),null===(e=this.adPlayer)||void 0===e||e.mute(!0),this.muted=!0,this._dispatchEvent(T.a.Media.Event.MUTED),window.Bolt.postMessage(this.embedId,{command:"mute"}))}},{key:"unmute",value:function(){var e;this.muted&&(de.info("Unmute",{muted:this.muted}),this.muted=!1,null===(e=this.adPlayer)||void 0===e||e.mute(!1),this._dispatchEvent(T.a.Media.Event.UNMUTED),window.Bolt.postMessage(this.embedId,{command:"unmute"}))}},{key:"remove",value:function(){var e;this.adPlayer&&(this.adView.visible=!1,this.adPlayer.removeEventListener(T.a.Media.Event.TIME_UPDATE,this._onAdTimeUpdate),this.adPlayer.removeEventListener(T.a.Media.Event.DURATION_CHANGE,this._onAdDurationChange),de.info("Ad player removed"),null===(e=window.BoltLogger)||void 0===e||e.info("Ad player removed"),this.adPlayer.remove(),window.Bolt.postMessage(this.embedId,{adState:T.a.Ad.Event.COMPLETED}));this.resetStatus()}},{key:"abort",value:function(){"none"===this.status||this.aborted||(this.aborted=!0,de.warn("Ad aborted"),this.AdRequest.abort(),this._dispatchEvent(T.a.Ad.Event.ABORTED),this.remove())}},{key:"isLinear",value:function(){return this._isLinear}},{key:"recordCustomAdImpression",value:function(){this.SSTracker.recordImpression()}},{key:"dispatchQueueEvent",value:function(e){this._dispatchEvent(T.a.Ad.Event.QUEUED),e&&setTimeout((function(){de.debug("Invoking callback after ".concat(T.a.Ad.QUEUE_WAIT),{func:"dispatchQueueEvent"}),e()}),T.a.Ad.QUEUE_WAIT)}}]),i}(w.a)}},0,[0,12,6,8,14]]);
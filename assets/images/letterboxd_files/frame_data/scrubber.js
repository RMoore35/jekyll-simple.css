(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{44:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return k}));var n=i(24),a=i.n(n),r=i(22),o=i.n(r),d=i(21),l=i.n(d),s=i(23),c=i.n(s),u=i(6),v=i.n(u),_=i(7),p=i.n(_),h=i(3),w=i.n(h),f=i(25),y=i(31),E=i.n(y),b=i(0),m=i(4),g=(i(2),i(10)),T=i(1);var C=function(){function e(){v()(this,e),w()(this,"_timer",void 0)}return p()(e,[{key:"init",value:function(){var e=this;window.Skin.addEventListener("click",(function(){e.start()}))}},{key:"stop",value:function(){clearTimeout(this._timer)}},{key:"start",value:function(){var e=this;e._timer&&clearTimeout(e._timer),Object(T.a)(window.document.body,"tap-on"),e._timer=setTimeout((function(){Object(T.d)(window.document.body,"tap-on")}),3e3)}}]),e}(),S=function(){function e(t){v()(this,e),w()(this,"element",void 0),w()(this,"pointer",void 0),w()(this,"label",void 0),w()(this,"borderRadius",void 0),w()(this,"pointerWidth",void 0),w()(this,"scrubber",void 0),this.playerView=window.PlayerView,this.scrubber=t,this._container=t._container}return p()(e,[{key:"initTooltip",value:function(){var e=this;e.element=document.getElementById("scrubber-tooltip"),e.label=e.element.lastElementChild,e.pointer=e.element.firstElementChild,e.borderRadius=parseFloat(getComputedStyle(e.element).borderRadius),e.pointerWidth=2*parseFloat(getComputedStyle(e.pointer).borderWidth),e._container.addEventListener("mousemove",(function(t){window.AdPlaying||e.scrubber._isDragging||(e.show(),e.showTooltipAtCursor(t))})),e._container.addEventListener("mouseleave",(function(t){e.hide()}))}},{key:"showTooltipAtCursor",value:function(e){var t=this,i=window.ContentPlayer;if(0!==i.duration&&!0!==window.AdPlaying){var n=t._container.clientWidth,a=i.fullscreen?e.pageX:e.pageX-Object(g.d)(t._container).x,r=a/n*i.duration;t.label.textContent=Object(g.m)(r),t.move(a)}}},{key:"move",value:function(e){var t=this,i=t._container.clientWidth,n=t.element.clientWidth,a=0;a=e+n/2>i?i-n:e-n/2<0?0:e-n/2,t.element.style.left="".concat(a,"px");var r=e-a-t.pointerWidth/2;r+t.pointerWidth+t.borderRadius>n?r=n-t.pointerWidth-t.borderRadius:r<t.borderRadius&&(r=t.borderRadius),t.pointer.style.left="".concat(r,"px")}},{key:"showTooltipAtValue",value:function(e){var t=this,i=window.ContentPlayer,n=e*t._container.clientWidth,a=e*i.duration;t.label.textContent=Object(g.m)(a),t.show(),t.move(n)}},{key:"show",value:function(){this.element.style.display="block"}},{key:"hide",value:function(){this.element.style.display="none"}}]),e}(),k=function(e){c()(i,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var i,n=l()(e);if(t()){var a=l()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return o()(this,i)}}(i);function i(e){var n;return v()(this,i),n=t.call(this,e),w()(a()(n),"_slider",void 0),w()(a()(n),"_max",void 0),w()(a()(n),"_current",0),w()(a()(n),"_videoStartTime",0),w()(a()(n),"_pixelTimeFactor",1),w()(a()(n),"_progressEl",void 0),w()(a()(n),"_bufferEl",void 0),w()(a()(n),"_container",void 0),w()(a()(n),"_tooltip",void 0),w()(a()(n),"handleMediaEvent",(function(e){var t=a()(n);switch(e.type){case b.a.Media.Event.DURATION_CHANGE:t._max=e.data,t._current=0,window.ContentPlayer.sourceChanged&&t.invalidate();break;case b.a.Media.Event.CONFIG_CHANGED:case b.a.Media.Event.START_TIME_CHANGED:t.setVideoStartTime(0);break;case b.a.Media.Event.LOAD_PROGRESS:case b.a.Media.Event.LOAD_START:t.updateBuffer();break;case b.a.Media.Event.TIME_UPDATE:t._isDragging||(t._current=e.data,t._slider.setValue(t._current/t._max,0,!1,!0)),t.updateProgress();break;case b.a.Media.Event.STOPPED:t.updateProgress()}})),w()(a()(n),"handleTimebarClick",(function(e){e.stopPropagation();var t=a()(n),i=t._container;if(!(!Object(m.c)(e.target)||window.AdPlaying||null===window.ContentPlayer.duration||window.ContentPlayer.duration<=0)){var r=(t.playerView.fullscreen?window.client.isMobile?e.touches[0].pageX:e.pageX:(window.client.isMobile?e.touches[0].pageX:e.pageX)-Object(g.d)(i).x)/i.clientWidth*window.ContentPlayer.duration;t._dispatchEvent(b.a.UI.Event.SEEK,r)}})),n.playerView=window.PlayerView,n._container=Object(m.a)(b.a.UI.SCRUBBER),n._bufferEl=Object(m.a)(b.a.UI.SCRUBBER_BUFFER),n._progressEl=Object(m.a)(b.a.UI.SCRUBBER_PROGRESS),n}return p()(i,[{key:"init",value:function(){var e=this;e.updateAppearance(),e._slider=new E.a("scrubber",{handleClass:"scrubber-handle",vertical:!1,horizontal:!0,loose:!0,speed:1,animationCallback:e._onSliderUpdate.bind(e),dragStartCallback:e._onSliderDragStart.bind(e),dragStopCallback:e._onSliderDragStop.bind(e)}),e._slider.reflow(),window.client.isMobile?e._container.addEventListener("touchstart",e.handleTimebarClick):e._container.addEventListener("click",e.handleTimebarClick),e.playerView.addEventListener(b.a.Media.Event.DURATION_CHANGE,e.handleMediaEvent),e.playerView.addEventListener(b.a.Media.Event.CONFIG_CHANGED,e.handleMediaEvent),e.playerView.addEventListener(b.a.Media.Event.START_TIME_CHANGED,e.handleMediaEvent),e.playerView.addEventListener(b.a.Media.Event.LOAD_PROGRESS,e.handleMediaEvent),e.playerView.addEventListener(b.a.Media.Event.LOAD_START,e.handleMediaEvent),e.playerView.addEventListener(b.a.Media.Event.TIME_UPDATE,e.handleMediaEvent),e.playerView.addEventListener(b.a.Media.Event.STOPPED,e.handleMediaEvent),e.playerView.addEventListener(b.a.UI.Event.PLAYER_CHANGED,(function(){var t=window.ContentPlayer;e._max=t.duration,e._current=t.currentTime,e.invalidate()})),e._tooltip=new S(e),e._tooltip.initTooltip(),window.client.isMobile&&(e._mobileDisplayTimer=new C,e._mobileDisplayTimer.init())}},{key:"_onSliderUpdate",value:function(e){this._isDragging&&(this._tooltip.showTooltipAtValue(e),this.updateProgress())}},{key:"_onSliderDragStart",value:function(){var e=this;e._slider&&(e._isDragging=!0,Object(T.a)(e._container,"scrubber-drag"))}},{key:"_onSliderDragStop",value:function(){var e=this;e._slider&&(e._isDragging=!1,e._tooltip.hide(),window.ContentPlayer.seek(e._slider.getValue()[0]*window.ContentPlayer.duration),Object(T.d)(e._container,"scrubber-drag"))}},{key:"updateBuffer",value:function(){var e=this,t=window.ContentPlayer;if(!e._fixedValues){var i=t.buffered*t.duration/100/e._pixelTimeFactor;e._bufferEl.style.width="".concat(100*i/e._container.clientWidth,"%")}}},{key:"updateProgress",value:function(){var e=this,t=window.ContentPlayer;if(!e._fixedValues)if(!window.AdPlaying||!isNaN(t.duration)&&t.duration){var i=e._isDragging?e._slider.offset.current[0]:t.currentTime/e._pixelTimeFactor;e._progressEl.style.width="".concat(i,"px")}else e._progressEl.style.width="100%"}},{key:"setVideoStartTime",value:function(e){this._videoStartTime=e,this.invalidate()}},{key:"resetWidths",value:function(){var e=this;if(!e._fixedValues){var t=e.videoStartTime&&e._pixelTimeFactor!==1/0?"".concat(e.videoStartTime/e._pixelTimeFactor*100/e._container.clientWidth,"%"):0;e._progressEl.style.width=t,e._bufferEl.style.width=t,e.updateBuffer(),e.updateProgress(),e._slider.reflow()}}},{key:"invalidate",value:function(){var e=this,t=window.ContentPlayer;t&&(e._pixelTimeFactor=t.duration/e._container.clientWidth),e.resetWidths(),window.AdPlaying?e._slider.disable():e._slider.enable()}},{key:"open",value:function(e){this._isOpen||(this._isOpen=!0,this.invalidate())}},{key:"close",value:function(e){this._isOpen&&(this._isOpen=!1)}}]),i}(f.a)}}]);
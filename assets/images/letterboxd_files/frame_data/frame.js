(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{21:function(e,t){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(t)}e.exports=i},22:function(e,t,i){var n=i(9),a=i(24);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?a(e):t}},23:function(e,t,i){var n=i(32);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},24:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},26:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(9),a=i.n(n),o=i(6),d=i.n(o),r=i(7),s=i.n(r),l=i(29),u=function(){function e(){d()(this,e),l.a.mixinEvents(this)}return s()(e,[{key:"_dispatchEvent",value:function(e,t,i){var n=this;if("string"==typeof e)n.emit(e,{type:e,target:i||n,data:t});else if("object"===a()(e)&&e.hasOwnProperty("type")){var o=e;n.emit(o.type,{target:o.target,type:o.type,data:o.data})}}},{key:"addOnceEventListener",value:function(e,t,i){this.on(e,t,i,!0)}},{key:"addEventListener",value:function(e,t,i){this.on(e,t,i)}},{key:"removeEventListener",value:function(e,t){this.off(e,t)}},{key:"removeAllListeners",value:function(e){this.off(e)}},{key:"mixin",value:function(e){var t;l.a.mixinEvents(e),(t=void 0!==e.prototype?e.prototype:e)._dispatchEvent=function(t,i,n){if("string"==typeof t)e.emit(t,{type:t,target:n||e,data:i});else if("object"===a()(t)&&t.hasOwnProperty("type")){var o=t;e.emit(o.type,{type:o.type,target:o.target,data:o.data})}},t.addOnceEventListener=function(t,i,n){e.on(t,i,n,!0)},t.addEventListener=function(t,i,n){e.on(t,i,n)},t.removeEventListener=function(t,i){e.off(t,i)},t.removeAllListeners=function(t){e.off(t)}}}]),e}()},27:function(e,t,i){var n=i(36);function a(t,i,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=a=Reflect.get:e.exports=a=function(e,t,i){var a=n(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(i):o.value}},a(t,i,o||t)}e.exports=a},28:function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var n=i(3),a=i.n(n),o=i(6),d=i.n(o),r=i(7),s=i.n(r),l=i(24),u=i.n(l),c=i(22),h=i.n(c),v=i(21),w=i.n(v),y=i(23),E=i.n(y),f=i(26),p=i(2),_=i(10),g=i(0);function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var m=new p.a("VIDEO-BASE"),P=function(e){E()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var i,n=w()(e);if(t()){var a=w()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return h()(this,i)}}(n);function n(){var e;return d()(this,n),(e=t.call(this)).video=null,e._poster=null,e._pastFirstQuartile=!1,e._pastMidpoint=!1,e._pastThirdQuartile=!1,e._bufferedTime=0,e._source=null,e.fastSeekEnabled=!1,e._isEnabled=!0,e._isRemoved=!1,e.type="native",e.videoPlayCount=0,e.containerId=null,e.videoId=null,e.sourceChanged=!1,e._isAd=!1,e.buffered=0,e.ended=!1,e.paused=!1,e.muted=!0,e.fullscreen=!1,e.videoWidth=NaN,e.videoHeight=NaN,e.metadata=null,e.currentTime=0,e.duration=0,e.startTime=0,e.width=0,e.height=0,e.playing=!1,e.parent=null,e.canplay=!1,e.canplaythrough=!1,e.volume=1,e.loop=null,e.stopped=!1,e.hasStarted=!1,e.qualityChanged=!1,e.seekTime=null,e.adsCuepoints=[],e.previousCuepointIndex=-1,e.currentQuality=null,e.relatedVideos=[],e.autoplay=!1,e.waiting=!1,e._stalled=!1,e._originalSource=null,e._onLoadStart=e._onLoadStart.bind(u()(e)),e._onLoadedMetadata=e._onLoadedMetadata.bind(u()(e)),e._onLoadedData=e._onLoadedData.bind(u()(e)),e._onDurationChanged=e._onDurationChanged.bind(u()(e)),e._onPlay=e._onPlay.bind(u()(e)),e._onPause=e._onPause.bind(u()(e)),e._onSeeked=e._onSeeked.bind(u()(e)),e._onTimeUpdate=e._onTimeUpdate.bind(u()(e)),e._onWaiting=e._onWaiting.bind(u()(e)),e._onPlaying=e._onPlaying.bind(u()(e)),e._onProgress=e._onProgress.bind(u()(e)),e._onCanPlay=e._onCanPlay.bind(u()(e)),e._onCanPlayThrough=e._onCanPlayThrough.bind(u()(e)),e._onVolumeChange=e._onVolumeChange.bind(u()(e)),e._onEnded=e._onEnded.bind(u()(e)),e._onEmptied=e._onEmptied.bind(u()(e)),e._onStalled=e._onStalled.bind(u()(e)),e._onError=e._onError.bind(u()(e)),e._onAbort=e._onAbort.bind(u()(e)),e}return s()(n,[{key:"_init",value:function(e,t,i){if(this._isAd=i,this.containerId=e,this.videoId=t,this.video=document.getElementById(t),this.parent=this.video.parentNode,this._source=this.video.src,this.startTime=this.video.startTime||0,this.width=this.video.clientWidth,this.height=this.video.clientHeight,this.volume=this.video.getAttribute("volume")||1,this.muted=this.video.muted,this.videoHeight=this.video.clientHeight,this.videoWidth=this.video.clientWidth,this.initHeavyAdListener(),!i){if(this.loop=window.CurrentVideoConfig.settings.loop,this._poster=window.CurrentVideoConfig.settings.poster,!this._poster){var n=window.CurrentVideoConfig.content.posterVersions;n?window.client.browser.chrome&&n.webp?this._poster=n.webp:n.optimized&&(this._poster=n.optimized):window.CurrentVideoConfig&&window.CurrentVideoConfig.content?this._poster=window.CurrentVideoConfig.content.poster:this._poster=this.video.poster}this._poster=Object(_.g)(this._poster),m.debug("Poster",this._poster),this.currentQuality=window.CurrentVideoConfig.settings.defaultHd?"hd":"sd",this.onVideoConfigChanged()}}},{key:"initHeavyAdListener",value:function(){var e=this,t=document.createElement("script");t.id="__pwHeavyAdListenerScript",null!==document.getElementById("__pwHeavyAdListenerScript")&&(t.innerHTML="\n                // Example to simulate heavy ad intervention\n                //const img = document.createElement('img');\n                // img.src = 'http://www.rickygervais.com/images/2562_GERVAIS_SCIENTIST-0225.jpg';\n                // document.body.appendChild(img);\n\n                function sendReports(reports) {\n                    for (let report of reports) {\n                        // Log the 'report' json via your own reporting process\n                        const data = {};\n                        // id for us to recognize message outside of the iframe\n                        data.id = 'pwHeavyAdIntervention';\n                        // Distinguish Bolt so it doesn't double log with tyche display ads\n                        data.product = 'bolt';\n                        // Actual report data\n                        data.report = JSON.stringify(report);\n                        // Post message outside of iframe\n                        window.postMessage(JSON.stringify(data), '*');\n                    }\n                }\n\n                const observer = new ReportingObserver((reports, observer) => {\n                    sendReports(reports);\n                }, { buffered: true });\n                observer.observe();\n                window.addEventListener('unload', (event) => {\n                    let reports = observer.takeRecords();\n                    sendReports(reports);\n                });\n                ",document.head.appendChild(t),window.addEventListener("message",(function(t){try{var i=JSON.parse(t.data),n=JSON.parse(i.report);if("pwHeavyAdIntervention"===i.id&&"bolt"===i.product&&"intervention"===n.type&&"HeavyAdIntervention"===n.body.id){var o=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){a()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({product:i.product,type:"heavyAd",id:i.id,url:n.url,ad:!1,reportType:n.type},n.body),d={id:e.embedId,type:"heavyAd",msgData:o};window.parent.postMessage(JSON.stringify(d),"*")}}catch(t){}})))}},{key:"isAd",value:function(e){m.debug("isAd() ABSTRACT METHOD")}},{key:"preload",value:function(){var e=this,t=document.body.getAttribute("data-default-src");e._enableVideoListeners(),e._isAd||null!==e._source&&""!==e._source||e.setSource(t),m.debug("Preload source",{id:e.containerId,src:e._source}),e._isEnabled||e.enable(!0),e.hls&&e.hls.destroy();e._source.indexOf(".m3u8")>-1&&!window.client.nativeHLS?(e.hlsLoading=!0,i.e(3).then(i.t.bind(null,47,7)).then((function(t){var i=t.default;e.hls=new i,e.hls.ErrorTypes=i.ErrorTypes,e.hls.ErrorDetails=i.ErrorDetails,e.hls.DefaultConfig=i.DefaultConfig,e.hls.Events=i.Events,e.hls.attachMedia(e.video),e.hls.on(e.hls.Events.MANIFEST_PARSED,e._onHLSManifestParsed.bind(e)),e.hls.loadSource(e._source)}))):(e.video.src=e._source,window.window.client.browser.firefox>0&&e.video.setAttribute("preload","metadata"),e.video.load())}},{key:"_playVideo",value:function(){var e=this,t=e.video.play();void 0!==t&&t.then((function(){m.info("Autoplay worked, playing video")})).catch((function(t){e.pause(),m.warn("Caught Error (Play promise)",{message:t.message,stack:t.stack})}))}},{key:"_onHLSManifestParsed",value:function(e,t){m.info("HLS manifest loaded, found ".concat(t.levels.length," quality level")),window.AdManagerProxy&&window.AdManagerProxy.sequentialPrerollAdRequested||this.play()}},{key:"play",value:function(){m.debug("Play",{id:this.containerId}),this.show(!0),this.ended?this.replay():(this._isEnabled||this.enable(!0),this._playVideo())}},{key:"replay",value:function(){m.debug("Replay",{id:this.containerId}),this.ended=!1,this.fastSeekEnabled?(m.debug("Pseudostream replay",{id:this.containerId,startTime:this.startTime}),this.startTime>0?(this.autoplay=!0,this.seek(0)):(this.stop(),this.play())):(this.autoplay=!0,this.seek(0))}},{key:"pause",value:function(){m.debug("Pause",{id:this.containerId,time:this.currentTime}),this.paused=!0,this.video.pause()}},{key:"resume",value:function(){this.playing||(m.debug("Resume",{id:this.containerId,time:this.video.currentTime}),this.show(!0),this._playVideo())}},{key:"stop",value:function(){this.stopped||(m.debug("Stop",{id:this.containerId}),this.stopped=!0,this.video.pause(),this.video.currentTime=0)}},{key:"seek",value:function(e){var t=e/this.duration*100;this._pastThirdQuartile=t>=75,this._pastMidpoint=t>=50||this._pastThirdQuartile,this._pastFirstQuartile=t>=25||this._pastMidpoint,this._pastFirstQuartile&&m.info("Seeking past first quartile"),this._pastMidpoint&&m.info("Seeking past midpoint"),this._pastThirdQuartile&&m.info("Seeking past third quartile")}},{key:"mute",value:function(e){m.warn("ABSTRACT METHOD NO OP")}},{key:"setVolume",value:function(e){m.warn("ABSTRACT METHOD NO OP")}},{key:"remove",value:function(e){m.debug("Remove",{id:this.containerId,videoId:this.videoId}),this._isRemoved=!0,this.video&&(this._disableVideoListeners(),this.video.pause(),this.video.src="",this.video.poster="",!0===e?(this.video.parentNode.removeChild(this.video),this.video=null):this._enableVideoListeners()),this._dispatchEvent(g.a.Player.Event.REMOVED),this.removeAllListeners()}},{key:"setSource",value:function(e){e=Object(_.g)(e),this._isRemoved=!1,this._originalSource=e,this.resetQuartiles(),this.metadata=null,this.playing=!1,this.hasStarted=!1,this.paused=!1,this.ended=!1,this.sourceChanged=!0,this.duration=0,this.buffered=0,this._bufferedTime=0,this.startTime=0,this.currentTime=0,this.waiting=!1,this._dispatchEvent(g.a.Media.Event.START_TIME_CHANGED,this.startTime),this._dispatchEvent(g.a.Player.Event.CONTENT_CHANGED,e),this.fastSeekEnabled=Object(_.a)(e),m.debug("Pseudo streaming enabled",{id:this.containerId,fastSeek:this.fastSeekEnabled}),this._enableVideoListeners(),this._updateVideoSource(e)}},{key:"setQuality",value:function(e,t){e!==this.currentQuality&&(m.debug("setQuality",{id:this.containerId,quality:e,url:t}),this._originalSource=t,this.autoplay=!0,this.currentQuality=e,this.qualityChanged=!0,this._dispatchEvent(g.a.Player.Event.QUALITY_CHANGED,this.currentQuality),this._updateVideoSource(t))}},{key:"_updateVideoSource",value:function(e){m.warn("ABSTRACT METHOD NO OP")}},{key:"getSource",value:function(){return this._source}},{key:"size",value:function(e,t){this.video.setAttribute("width",e),this.video.setAttribute("height",t),this.width=this.video.clientWidth,this.height=this.video.clientHeight,this._dispatchEvent(g.a.Player.Event.SIZE_CHANGED)}},{key:"setFullscreen",value:function(e){e!==this.fullscreen&&(this.fullscreen=e)}},{key:"show",value:function(e){!0===e&&"block"!==this.video.style.display?(m.debug("Show video",{id:this.containerId}),this.video.style.display="block"):!1===e&&"none"!==this.video.style.display&&(m.debug("Hide video",{id:this.containerId}),this.video.style.display="none")}},{key:"hitAdCuepoint",value:function(e){this.previousCuepointIndex=window.CurrentVideoConfig.advertising.cuepoints.indexOf(e)}},{key:"unload",value:function(){var e=this;m.info("Unload video",{id:e.containerId,src:this.video.currentSrc}),e._isRemoved=!0,e._disableVideoListeners(),e.hls?e.hls.destroy():(e.video.src="",e.video.load())}},{key:"enable",value:function(e){this._isEnabled=e,!0===e?(m.info("Enable Video",{id:this.containerId}),this._enableVideoListeners(),this.setSource(this._source)):(m.info("Disable Video",{id:this.containerId}),this.unload())}},{key:"_onDurationChanged",value:function(){m.warn("ABSTRACT METHOD NO OP")}},{key:"_onPlay",value:function(){this.stopped=!1,this.ended=!1,this.hasStarted?this.paused&&(this.paused=!1,this._dispatchEvent(g.a.Media.Event.RESUME)):(m.info("Dispatching play event"),this._dispatchEvent(g.a.Media.Event.PLAY),this.hasStarted=!0)}},{key:"_onPause",value:function(){m.info("onPause",{id:this.containerId,time:this.currentTime}),this.paused=!0,this.playing=!1,this._dispatchEvent(g.a.Media.Event.PAUSED),this.stopped&&this._dispatchEvent(g.a.Media.Event.STOPPED)}},{key:"_onSeeked",value:function(){m.info("onSeeked"),this.stopped||(this._dispatchEvent(g.a.Media.Event.SEEKED),this.autoplay&&this._playVideo()),this.seekTime=null}},{key:"_onTimeUpdate",value:function(){if(this.video){if(this._stalled=!1,this.qualityChanged)m.info("Quality changed",{id:this.containerId,quality:this.qualityChanged});else if(this.currentTime=this.video.currentTime+this.startTime,this.currentTime>this.duration&&(this.currentTime=this.duration),this._dispatchEvent(g.a.Media.Event.TIME_UPDATE,this.currentTime),this._checkQuartiles(),window.client.system.android>0&&28===window.client.browser.chrome&&Math.floor(this.currentTime)===Math.floor(this.video.duration)){var e=new CustomEvent("ended");this.video.dispatchEvent(e)}}else m.error("Video is null ".concat(this.containerId))}},{key:"_onWaiting",value:function(){this.waiting=!0,this._dispatchEvent(g.a.Media.Event.WAITING)}},{key:"_onPlaying",value:function(){m.debug("onPlaying",{id:this.containerId}),this.playing=!0,this.paused=!1,this._dispatchEvent(g.a.Media.Event.PLAYING)}},{key:"_onProgress",value:function(){try{var e=this.fastSeekEnabled?this.video.buffered.end(0)+this.startTime:this.video.buffered.end(0);e!==this._bufferedTime&&(e>this._bufferedTime&&(this._bufferedTime=e),this.buffered=Math.round(100*this._bufferedTime/this.duration),this.buffered>100&&(this.buffered=100))}catch(e){this.buffered=0,this._bufferedTime=0}this._dispatchEvent(g.a.Media.Event.LOAD_PROGRESS,this.buffered)}},{key:"_onLoadedMetadata",value:function(){this.metadata||(this.metadata={duration:this.video.duration,videoWidth:this.video.videoWidth,videoHeight:this.video.videoHeight},m.debug("Video metadata",{id:this.containerId}),this._dispatchEvent(g.a.Media.Event.METADATA,this.metadata))}},{key:"_onCanPlay",value:function(){m.debug("onCanPlay",{id:this.containerId}),this.waiting=!1,this.canplay=!0,this._dispatchEvent(g.a.Player.Event.CANPLAY),this._stalled&&(m.debug("onCanPlay after stalled",{id:this.containerId}),this._stalled=!1,this._playVideo())}},{key:"_onCanPlayThrough",value:function(){this.canplaythrough=!0,this._dispatchEvent(g.a.Player.Event.CANPLAYTHROUGH)}},{key:"_onVolumeChange",value:function(){this.muted||0!==this.video.volume||(this.video.volume=1),this.volume=this.video.volume,m.info("onVolumeChange",{value:this.volume}),this._dispatchEvent(g.a.Media.Event.VOLUME_CHANGED,this.volume)}},{key:"_onEnded",value:function(){this._isAd||m.debug("onEnded",{id:this.containerId}),this.ended=!0,this.playing=!1,this.paused=!1,this.hasStarted=!1,this._dispatchEvent(g.a.Media.Event.ENDED)}},{key:"_onEmptied",value:function(){this._isRemoved||this.sourceChanged||(this._isAd||m.debug("onEmptied",{id:this.containerId}),this._dispatchEvent(g.a.Media.Event.EMPTIED))}},{key:"_onStalled",value:function(){this._isRemoved||(this._stalled=!0,this.playing&&(m.debug("Video stalled, calling play",{id:this.containerId}),this._playVideo()))}},{key:"_onError",value:function(){var e="";if(!this._isRemoved){if(this.video.error.code)switch(this.video.error.code){case 1:e="USER ABORT";break;case 2:e="NETWORK ERROR";break;case 3:e="DECODE ERROR";break;case 4:e="MEDIA NOT SUPPORTED"}m.error("Video Error: ".concat(this.containerId),{message:e,errorCode:this.video.error.code}),4===this.video.error.code?window.client.browser.firefoxWithoutMp4&&this._source.indexOf(".mp4")>-1?this._dispatchEvent(g.a.Media.Event.NOT_SUPPORTED):this._dispatchEvent(g.a.Media.Event.NOT_FOUND):""===this.video.src||this._isRemoved||this.sourceChanged||this._dispatchEvent(g.a.ERROR)}}},{key:"_onLoadedData",value:function(){this._isLoading=!1,m.debug("onLoadedData",{id:this.containerId}),this._dispatchEvent(g.a.Media.Event.LOADED)}},{key:"_onLoadStart",value:function(){this.video&&(this._isLoading=!0,m.debug("onLoadStart",{id:this.containerId}),this._dispatchEvent(g.a.Media.Event.WAITING))}},{key:"_onAbort",value:function(e){m.debug("onAbort",{id:this.containerId})}},{key:"_enableVideoListeners",value:function(){m.debug("Enable video listeners",{videoId:this.videoId}),this.video.addEventListener("loadstart",this._onLoadStart),this.video.addEventListener("loadedmetadata",this._onLoadedMetadata),this.video.addEventListener("loadeddata",this._onLoadedData),this.video.addEventListener("durationchange",this._onDurationChanged),this.video.addEventListener("play",this._onPlay),this.video.addEventListener("pause",this._onPause),this.video.addEventListener("seeked",this._onSeeked),this.video.addEventListener("timeupdate",this._onTimeUpdate),this.video.addEventListener("waiting",this._onWaiting),this.video.addEventListener("playing",this._onPlaying),this.video.addEventListener("progress",this._onProgress),this.video.addEventListener("canplay",this._onCanPlay),this.video.addEventListener("canplaythrough",this._onCanPlayThrough),this.video.addEventListener("volumechange",this._onVolumeChange),this.video.addEventListener("ended",this._onEnded),this.video.addEventListener("emptied",this._onEmptied),this.video.addEventListener("stalled",this._onStalled),this.video.addEventListener("error",this._onError),this.video.addEventListener("abort",this._onAbort)}},{key:"_disableVideoListeners",value:function(){m.debug("Disable video listeners",{id:this.containerId}),this.video.removeEventListener("loadstart",this._onLoadStart),this.video.removeEventListener("loadedmetadata",this._onLoadedMetadata),this.video.removeEventListener("loadeddata",this._onLoadedData),this.video.removeEventListener("durationchange",this._onDurationChanged),this.video.removeEventListener("play",this._onPlay),this.video.removeEventListener("pause",this._onPause),this.video.removeEventListener("seeked",this._onSeeked),this.video.removeEventListener("timeupdate",this._onTimeUpdate),this.video.removeEventListener("waiting",this._onWaiting),this.video.removeEventListener("playing",this._onPlaying),this.video.removeEventListener("progress",this._onProgress),this.video.removeEventListener("canplay",this._onCanPlay),this.video.removeEventListener("canplaythrough",this._onCanPlayThrough),this.video.removeEventListener("volumechange",this._onVolumeChange),this.video.removeEventListener("ended",this._onEnded),this.video.removeEventListener("emptied",this._onEmptied),this.video.removeEventListener("stalled",this._onStalled),this.video.removeEventListener("error",this._onError),this.video.removeEventListener("abort",this._onAbort),this.video.removeEventListener("ended",this._onEnded)}},{key:"onVideoConfigChanged",value:function(){(this.playing||this.paused)&&this.enable(!1),this.ended=!1;var e=window.CurrentVideoConfig;this._poster=e.content.poster,void 0===this.loop&&void 0===window.Playlist&&(this.loop=e?e.settings.loop:this.loop),this.adsCuepoints=void 0!==e.advertising.cuepoints?e.advertising.cuepoints.concat():[],this._dispatchEvent(g.a.Player.Event.CONFIG_CHANGED)}},{key:"resetQuartiles",value:function(){this._pastFirstQuartile=!1,this._pastMidpoint=!1,this._pastThirdQuartile=!1}},{key:"_checkQuartiles",value:function(){if(this.currentTime&&this.duration){var e=this.currentTime/this.duration*100;!this._pastFirstQuartile&&e>=25?(this._pastFirstQuartile=!0,this._dispatchEvent(g.a.Media.Event.FIRSTQUARTILE,null)):!this._pastMidpoint&&e>=50?(this._pastMidpoint=!0,this._dispatchEvent(g.a.Media.Event.MIDPOINT,null)):!this._pastThirdQuartile&&e>=75&&(this._pastThirdQuartile=!0,this._dispatchEvent(g.a.Media.Event.THIRDQUARTILE,null))}}}]),n}(f.a)},29:function(e,t,i){"use strict";var n=i(9),a=i.n(n);t.a=function(){var e=1;if(!Object.create)var t=function(){};var i=Array.prototype.slice,n={attributes:{},eventHandlers:{"-1":{}},guid:-1,addEvent:function(e){n.eventHandlers[e.guid][e.type]||(n.eventHandlers[e.guid][e.type]=[]),n.eventHandlers[e.guid][e.type].push({guid:e.guid,handler:e.handler,scope:e.scope,type:e.type,once:e.once})},addEventHandler:function(e,t,i,a){var o,d={};for(var r in"string"==typeof e?(o=i||!1,d[e]=t):(o=t||!1,d=e),d)for(var s=d[r],l=r.split(" "),u=0,c=l.length;u<c;u++){var h=l[u];n.addEvent.call(this,{guid:this._guid||this._.guid,handler:s,scope:o,type:h,once:a})}},addGuid:function(t,i){t._guid&&!i||(t._guid=e++,n.attributes[t._guid]={},n.eventHandlers[t._guid]={})},attr:function(e){return n.attributes[e]},clone:function(e){var t=n.typeOf(e);return"object"===t?n.extend({},e):"array"===t?e.slice(0):void 0},create:function(e){return Object.create?Object.create(e):(t.prototype=e,new t)},emitEvents:function(e,t,a,o){a=a||!1,o=o||this._guid;for(var d=i.call(n.eventHandlers[o][e]),r=0,s=d.length;r<s;r++){var l=n.extend({},d[r]),u=l.scope?l.scope:this;a&&(l.type=a),l.scope=u,l.handler.call(l.scope,t,l),l.once&&n.removeEventHandler.call(this,l.type,l.handler)}},extend:function(){for(var e=i.call(arguments),t=e.shift(),n=0,a=e.length;n<a;n++){var o=e[n];for(var d in o)t[d]=o[d]}return t},extendThis:function(){var e=i.call(arguments);return e.unshift(this),n.extend.apply(this,e)},makeUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},removeAttribute:function(e,t){t=t||!1;for(var i=n.trim(e).split(" "),a={},o=0,d=i.length;o<d;o++){var r=n.trim(i[o]);r&&(a.key=r,a.oldValue=n.attr(this._guid)[r],delete n.attr(this._guid)[r],t||(this.emit("change",r),this.emit("change:"+r),this.emit("mutate",a),this.emit("mutate:"+r,a),this.emit("remove",r),this.emit("remove:"+r)),delete a.oldValue)}},removeEventHandler:function(e,t){var i=n.eventHandlers[this._guid];if(e&&t){if(!(i=i[e]))return;for(var a,o=0,d=i.length;o<d;o++)(a=i[o].handler)&&a===t&&(i.splice(o--,1),d--)}else e?delete i[e]:n.eventHandlers[this._guid]={}},setAttribute:function(e,t,i){i=i||!1;var a=this.has(e),o=n.attr(this._guid)[e];if(t!==o&&(n.attr(this._guid)[e]=t,!i)){this.emit("change",e),this.emit("change:"+e,t);var d={key:e,newValue:t,oldValue:o||null};this.emit("mutate",d),this.emit("mutate:"+e,d);var r=a?"update":"create";this.emit(r,e),this.emit(r+":"+e,t)}},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},typeOf:function(e){return null==e?String(e):Object.prototype.toString.call(e).replace(/\[object |\]/g,"").toLowerCase()},updateAttribute:function(e,t,i){var a=this.get(e),o=n.typeOf(a);"object"!==o&&"array"!==o||(a=n.clone(a));var d=t.call(this,a,e);n.setAttribute.call(this,e,d,i||!1)}},o={emit:function(e,t){t=void 0===t?null:t;for(var i=e.split(" "),a=0,o=i.length;a<o;a++){var d=i[a];n.eventHandlers[-1].all&&n.emitEvents.call(this,"all",t,d,-1),n.eventHandlers[-1][d]&&n.emitEvents.call(this,d,t,d,-1),"number"==typeof this._guid&&(n.eventHandlers[this._guid].all&&n.emitEvents.call(this,"all",t,d),n.eventHandlers[this._guid][d]&&n.emitEvents.call(this,d,t))}},off:function(){n.removeEventHandler.apply(this,arguments)},on:function(){n.addEventHandler.apply(this,arguments)}};n.Module=function(){},n.Module.prototype={each:function(e,t){var i=n.attr(this._guid);for(var a in i){var o=i[a];e.call(t||this,o,a)}},extend:function(){return n.extendThis.apply(this,arguments)},filter:function(e){var t=[],i=n.attr(this._guid);for(var a in i)e.call(this,i[a],a)&&t.push(i[a]);return t},get:function(e){if("string"==typeof e){if(arguments.length>1){for(var t={},i=0,a=arguments.length;i<a;i++){var o=arguments[i];t[o]=this.get(o)}return t}return this.has(e)?n.attr(this._guid)[e]:null}if("function"==typeof e){var d=this.filter(e);return d.length?d[0]:null}},getAll:function(){return n.clone(n.attr(this._guid))},getAllAsArray:function(){var e=[],t=n.attr(this._guid);for(var i in t){var a=t[i];"object"!==n.typeOf(a)||a.id||(a.id=i),e.push(a)}return e},has:function(e){return void 0!==n.attr(this._guid)[e]},map:function(e,t){var i=[];return this.each((function(n,a){i.push(e.call(t||this,n,a))}),t||this),i},push:function(e,t){if("array"===n.typeOf(e))for(var i=0,a=e.length;i<a;i++)n.setAttribute.call(this,n.makeUuid(),e[i],t||!1);else n.setAttribute.call(this,n.makeUuid(),e,t||!1);return this},remove:function(e,t){return void 0===e?(n.attributes[this._guid]={},this.emit("change remove")):"function"==typeof e?this.each((function(i,a){e(i)&&n.removeAttribute.call(this,a,t)})):n.removeAttribute.call(this,e,t||!1),this},set:function(e,t,i){if("object"===a()(e))for(var o in e)n.setAttribute.call(this,o,e[o],t||!1);else n.setAttribute.call(this,e,t,i||!1);return this},size:function(){var e=0,t=n.attr(this._guid);for(var i in t)e++;return e},update:function(e,t,i){return"string"==typeof e?n.updateAttribute.call(this,e,t,i||!1):"function"==typeof e&&this.each((function(t,i){n.updateAttribute.call(this,i,e)})),this}};var d={_:n,extend:function(){return n.extendThis.apply(n.Module.prototype,arguments)},mixinEvents:function(e){return e=e||{},n.addGuid(e),n.extend(e,o)},on:function(){n.addEventHandler.apply(this,arguments)},version:"0.8.1"};return window.Stapes=d,d}()},32:function(e,t){function i(t,n){return e.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(t,n)}e.exports=i},33:function(e,t,i){"use strict";(function(e){var n=new(i(2).a)("MODULE-FACTORY"),a={buildLoadingIndicator:function(t){i.e(4).then(i.bind(null,39)).then((function(e){var i=new(0,e.default)(window.ContentPlayer);i.init(),t.call(null,i),n.debug("Module ready",{module:"LoadingIndicator"})})).catch((function(t){n.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildWatermark:function(t){i.e(9).then(i.bind(null,41)).then((function(e){var i=new(0,e.default)(window.ContentPlayer);i.init(),t.call(null,i),n.debug("Module ready",{module:"Watermark"})})).catch((function(t){n.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildContent:function(t){i.e(6).then(i.bind(null,48)).then((function(e){var i=new(0,e.default)(window.ContentPlayer);i.init(),i.invalidate(),t.call(null,i),n.debug("Module ready",{module:"Content"})})).catch((function(t){n.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildVolume:function(t){Promise.all([i.e(0),i.e(7)]).then(i.bind(null,30)).then((function(e){var i=new(0,e.default)(window.ContentPlayer);i.init(),t.call(null,i),n.debug("Module ready",{module:"Volume"})})).catch((function(t){n.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildControlBar:function(t){Promise.all([i.e(0),i.e(7)]).then(i.bind(null,42)).then((function(e){var i=new(0,e.default)(window.ContentPlayer);i.init(),t.call(null,i),n.debug("Module ready",{module:"ControlBar"})})).catch((function(t){n.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildPrerollScreen:function(t){i.e(10).then(i.bind(null,43)).then((function(e){var i=new(0,e.default)(window.ContentPlayer);i.init(),t.call(null,i),n.debug("Module ready",{module:"PrerollScreen"})})).catch((function(t){n.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildScrubber:function(t){Promise.all([i.e(0),i.e(12)]).then(i.bind(null,44)).then((function(e){var i=new(0,e.default)(window.ContentPlayer);i.init(),t.call(null,i),n.debug("Module ready",{module:"Scrubber"})})).catch((function(t){n.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildRelatedVideos:function(t,a){i.e(11).then(i.bind(null,45)).then((function(e){var i=new(0,e.default)(window.ContentPlayer);i.init(a),t.call(null,i),n.debug("Module ready",{module:"RelatedVideosUI"})})).catch((function(t){n.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildAgeGate:function(t){i.e(1).then(i.bind(null,46)).then((function(e){var i=new(0,e.default)(window.ContentPlayer);i.init(),t.call(null,i),n.debug("Module ready",{module:"AgeGateUI"})})).catch((function(t){n.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))},buildAppearanceManager:function(t){i.e(5).then(i.bind(null,49)).then((function(e){var i=new(0,e.default);i.init(),t.call(null,i),n.debug("Module ready",{module:"AppearanceManager"})})).catch((function(t){n.error("Failed to load module: ".concat(e),{message:t.message,stack:t.stack})}))}};t.a=a}).call(this,i(34)(e))},34:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},35:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return m}));var n=i(6),a=i.n(n),o=i(7),d=i.n(o),r=i(24),s=i.n(r),l=i(27),u=i.n(l),c=i(22),h=i.n(c),v=i(21),w=i.n(v),y=i(23),E=i.n(y),f=i(3),p=i.n(f),_=i(28),g=i(0);var b=new(i(2).a)("IOS-VIDEO"),m=function(e){E()(i,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var i,n=w()(e);if(t()){var a=w()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return h()(this,i)}}(i);function i(e,n,o){var d;a()(this,i),d=t.call(this),p()(s()(d),"hasBeenTouched",!1),p()(s()(d),"_isEnabled",!1);var r=s()(d);return r._init(e,n,o),window.PlayerSettings.autoplay&&(r.hasBeenTouched=!0,r.mute(!0)),r.video.addEventListener("webkitendfullscreen",(function(){r.video.controls&&(r.video.controls=!1)})),d}return d()(i,[{key:"_updateVideoSource",value:function(e){b.debug(this.containerId,"'updateSource:' ".concat(e,", 'autoplay:' ").concat(this.autoplay));var t=-1===e.indexOf("?")?"?":"&";this.qualityChanged&&this.fastSeekEnabled&&this.currentTime>0&&(t=-1===e.indexOf("?")?"?":"&",e="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)),e===this.video.src&&(t=-1===e.indexOf("?")?"?":"&",e=this._source+t+Date.now()),this._source=e,this.qualityChanged&&this.hasStarted&&this.preload()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"seek",value:function(e){b.debug("Seek",e),u()(w()(i.prototype),"seek",this).call(this,e);var t=this;t.seekTime=e;var n=function(){var i=-1===t._originalSource.indexOf("?")?"?":"&";t.startTime=e,t._dispatchEvent(g.a.Media.Event.START_TIME_CHANGED,e),t.video.src=e>0?"".concat(t._originalSource+i,"ec_seek=").concat(e,"&start=").concat(e):t._source,t.video.load()};t.fastSeekEnabled?t.startTime>0?n():e<=t._bufferedTime?t.video.currentTime=e:n():(t.video.currentTime=e,t.playing||t.hasBeenTouched&&t.play())}},{key:"_onDurationChanged",value:function(){b.debug("On duration changed",{id:this.containerId,action:"durationChanged",duration:this.video.duration}),this.sourceChanged?(this.duration=this.video.duration,this._dispatchEvent(g.a.Media.Event.DURATION_CHANGE,this.duration),b.debug("On duration changed",{id:this.containerId,action:"sourceChanged",duration:this.video.duration}),this.sourceChanged=!1,this.hasBeenTouched&&this.autoplay&&this.play()):this.qualityChanged?b.debug("On duration changed",{id:this.containerId,action:"qualityChanged",duration:this.video.duration}):this.seekTime?(b.debug("On duration changed",{id:this.containerId,action:"seekTime",seek:this.seekTime,duration:this.video.duration}),this.fastSeekEnabled&&(this.seekTime=null,this.hasBeenTouched&&this.play())):this.autoplay&&this.hasBeenTouched&&(b.debug("Duration changed & play"),this.play())}},{key:"_onLoadedData",value:function(){if(this.qualityChanged)b.debug("On loaded data: new quality"),this.qualityChanged=!1,this.fastSeekEnabled?(this.startTime=this.currentTime,this._dispatchEvent(g.a.Media.Event.START_TIME_CHANGED,this.currentTime),this.hasBeenTouched&&this.play()):this.seek(this.currentTime);else if(b.debug("onLoadedData"),u()(w()(i.prototype),"_onLoadedData",this).call(this),window.client.system.ios&&window.PlayerView.fullscreen)try{this.video.webkitEnterFullscreen()}catch(e){b.warn("Caught Error",{message:e.message,stack:e.stack}),window.PlayerView.fullscreen=!1,window.PlayerView.setFullscreen(!1)}}},{key:"touch",value:function(){b.debug("Touch",{videoId:this.videoId}),this.enable(!1),this.hasBeenTouched=!0}},{key:"mute",value:function(e){this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(g.a.Media.Event.MUTED):this._dispatchEvent(g.a.Media.Event.UNMUTED)}}]),i}(_.a)},36:function(e,t,i){var n=i(21);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},37:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return g}));var n=i(6),a=i.n(n),o=i(7),d=i.n(o),r=i(24),s=i.n(r),l=i(27),u=i.n(l),c=i(22),h=i.n(c),v=i(21),w=i.n(v),y=i(23),E=i.n(y),f=i(28),p=i(0);var _=new(i(2).a)("MOBILE-VIDEO"),g=function(e){E()(i,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var i,n=w()(e);if(t()){var a=w()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return h()(this,i)}}(i);function i(e,n,o){var d;a()(this,i),d=t.call(this);var r=s()(d);return r._init(e,n,o),r.hasBeenTouched=!1,r._isEnabled=!1,window.client.system.android&&window.PlayerSettings.autoplay&&(r.hasBeenTouched=!0,r.mute(!0)),window.PlayerSettings.automute&&r.video.addEventListener("webkitbeginfullscreen",(function(){r.mute(!1)})),d}return d()(i,[{key:"_init",value:function(e,t,n){u()(w()(i.prototype),"_init",this).call(this,e,t,n),_.debug("Init",{id:this.containerId})}},{key:"_updateVideoSource",value:function(e){_.debug("Update source",{id:this.containerId,src:e,currentSrc:this.video.src});var t=-1===e.indexOf("?")?"?":"&";this.qualityChanged&&this.fastSeekEnabled&&this.currentTime>0&&(t=-1===e.indexOf("?")?"?":"&",e="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)),e===this.video.src&&(t=-1===e.indexOf("?")?"?":"&",e=this._source+t+Date.now()),this._source=e,this.qualityChanged&&this.hasStarted&&this.preload()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"seek",value:function(e){_.debug("Seek",{val:e}),u()(w()(i.prototype),"seek",this).call(this,e);var t=this;t.seekTime=e;var n=function(){t.startTime=e,t._dispatchEvent(p.a.Media.Event.START_TIME_CHANGED,e);var i=-1===t._originalSource.indexOf("?")?"?":"&";t.video.src=e>0?"".concat(t._originalSource+i,"ec_seek=").concat(e,"&start=").concat(e):t._source,t.video.load()};t.fastSeekEnabled?t.startTime>0?n():e<=t._bufferedTime?t.video.currentTime=e:n():(t.video.currentTime=e,t.playing||t.hasBeenTouched&&t.play())}},{key:"_onDurationChanged",value:function(){_.debug("On duration changed",{id:this.containerId,action:"durationChanged",duration:this.video.duration}),this.sourceChanged?(this.duration=this.video.duration,this._dispatchEvent(p.a.Media.Event.DURATION_CHANGE,this.duration),_.debug("On duration changed",{id:this.containerId,action:"sourcechanged",duration:this.video.duration}),this.sourceChanged=!1,this.hasBeenTouched&&this.autoplay&&this.play()):this.qualityChanged?(_.debug("On duration changed",{id:this.containerId,action:"qualityChanged",duration:this.video.duration}),this.fastSeekEnabled?(this.startTime=this.currentTime,this._dispatchEvent(p.a.Media.Event.START_TIME_CHANGED,this.currentTime),this.hasBeenTouched&&this.video.play()):this.seek(this.currentTime),this.qualityChanged=!1):this.seekTime?(_.debug("On duration changed",{id:this.containerId,action:"seekTime",seek:this.seekTime,duration:this.video.duration}),this.fastSeekEnabled&&(this.seekTime=null,this.hasBeenTouched&&this.video.play())):this.autoplay&&this.hasBeenTouched&&(_.debug("Duration changed & play"),this.video.play())}},{key:"touch",value:function(){_.debug("Touch",{videoId:this.videoId}),this.enable(!1),this.hasBeenTouched=!0}},{key:"mute",value:function(e){window.client.system.android&&(this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(p.a.Media.Event.MUTED):this._dispatchEvent(p.a.Media.Event.UNMUTED))}}]),i}(f.a)},38:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return p}));var n=i(6),a=i.n(n),o=i(7),d=i.n(o),r=i(27),s=i.n(r),l=i(22),u=i.n(l),c=i(21),h=i.n(c),v=i(23),w=i.n(v),y=i(28),E=i(0);var f=new(i(2).a)("VIDEO"),p=function(e){w()(i,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var i,n=h()(e);if(t()){var a=h()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return u()(this,i)}}(i);function i(e,n,o,d){var r;return a()(this,i),(r=t.call(this))._init(e,n,o,d),r}return d()(i,[{key:"_init",value:function(e,t,n){s()(h()(i.prototype),"_init",this).call(this,e,t,n),this.video.oncontextmenu=function(){return!1},this._source&&(this.setSource(this._source),f.debug("Pseudo streaming enabled",{fastSeek:this.fastSeekEnabled})),this._enableVideoListeners()}},{key:"isAd",value:function(e){if(void 0===e)return this._isAd;this._isAd=e}},{key:"mute",value:function(e){f.info("mute",e),this.video.muted=e,this.muted=this.video.muted,this.muted?this._dispatchEvent(E.a.Media.Event.MUTED):this._dispatchEvent(E.a.Media.Event.UNMUTED)}},{key:"setVolume",value:function(e){var t=void 0===e?1:parseFloat(e);f.info("set volume",t),this.video.volume=t,this.volume=this.video.volume}},{key:"_updateVideoSource",value:function(e){if(f.debug("Update source",{id:this.containerId,url:e}),this._source=e,this.qualityChanged){if(this.fastSeekEnabled&&this.currentTime>0){var t=-1===e.indexOf("?")?"?":"&";this._source="".concat(e+t,"ec_seek=").concat(this.currentTime,"&start=").concat(this.currentTime)}this.hasStarted&&this.preload()}}},{key:"_onDurationChanged",value:function(){var e=this;e.sourceChanged?(e.duration=e.video.duration,e._dispatchEvent(E.a.Media.Event.DURATION_CHANGE,e.duration),f.debug("On duration changed",{id:this.containerId,action:"sourceChanged",duration:this.video.duration}),e.sourceChanged=!1,!e.autoplay||window.AdManagerProxy&&window.AdManagerProxy.sequentialPrerollAdRequested||e.play()):e.qualityChanged?(f.debug("On duration changed",{id:this.containerId,action:"qualityChanged",duration:this.video.duration}),e.fastSeekEnabled?(e.startTime=e.currentTime,e._dispatchEvent(E.a.Media.Event.START_TIME_CHANGED,e.currentTime),e.play()):e.seek(e.currentTime),e.qualityChanged=!1):e.seekTime?(f.debug("On duration changed",{id:this.containerId,action:"seekTime",seek:this.seekTime,duration:this.video.duration}),e.fastSeekEnabled&&(e.seekTime=null,e.play())):e.autoplay&&window.AdManagerProxy&&!window.AdManagerProxy.sequentialPrerollAdRequested&&e.play()}},{key:"seek",value:function(e){f.debug("Seek",e),s()(h()(i.prototype),"seek",this).call(this,e);var t=this;t.seekTime=e;var n=function(){t.startTime=e,t._dispatchEvent(E.a.Media.Event.START_TIME_CHANGED,e);var i=-1===t._originalSource.indexOf("?")?"?":"&";if(window.client.browser.firefox>0){t._disableVideoListeners();t.video.addEventListener("emptied",(function n(){f.info("FF video reset"),t.video.removeEventListener("emptied",n),t.video.src=e>0?"".concat(t._originalSource+i,"ec_seek=").concat(e,"&start=").concat(e):t._source,t._enableVideoListeners(),t.video.load()})),t.video.src=""}else t.video.src=e>0?"".concat(t._originalSource+i,"ec_seek=").concat(e,"&start=").concat(e):t._source,t.video.load()};t.fastSeekEnabled?t.startTime>0?n():e<=t._bufferedTime?(f.info("Seeking pseudo-streamed video within the buffer:".concat(e," of ").concat(t._bufferedTime)),t.video.currentTime=e,t.seekTime=null):n():(t.video.currentTime=e,t.seekTime=null,t.playing||t.play())}}]),i}(y.a)},53:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return pe}));var n=i(9),a=i.n(n),o=i(6),d=i.n(o),r=i(7),s=i.n(r),l=i(3),u=i.n(l),c=i(2),h=i(1),v=i(29),w=new c.a("PLAYER-STATE");function y(){this._data={},this._state=null,this._previousState=null,this._waitingStateDelay=null,v.a.mixinEvents(this),this.delayedWaitingState=this.delayedWaitingState.bind(this)}y.prototype={STATE_CHANGED:"stateChanged",AGE_GATE:"age-gate",START:"start",WAITING:"waiting",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",ERROR:"error",RELATED_VIDEOS:"related-videos",delayedWaitingState:function(e){var t=this;clearTimeout(t._waitingStateDelay),t._waitingStateDelay=setTimeout((function(){t.state=y.WAITING}),e)},get previousState(){return this._previousState},get state(){return this._state},set state(e){if(e){e!==this._state&&(clearTimeout(this._waitingStateDelay),e===this.WAITING&&this._state===this.PLAYING||Object(h.d)(window.document.body,"bolt-state-"+this._state),this._previousState=this._state,this._state=e,w.info("Player state:",{state:this._state,prevState:this._previousState}),Object(h.a)(window.document.body,"bolt-state-"+e),this.emit(this.STATE_CHANGED))}},get data(){return this._data},set data(e){this._data=e}};var E=y,f=i(0),p=i(10),_=i(22),g=i.n(_),b=i(21),m=i.n(b),P=i(23),C=i.n(P),A=i(26);var S=function(e){C()(i,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var i,n=m()(e);if(t()){var a=m()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}(i);function i(){var e;return d()(this,i),(e=t.call(this)).data=null,e.docked,e.closeButtonClicked=!1,e}return s()(i,[{key:"update",value:function(e){var t=this,i=!0;t.data&&(i=t.data.top!==e.top||t.data.left!==e.left||t.data.right!==e.right||t.data.bottom!==e.bottom||t.data.percent!==e.percent),i&&(this.data=e,this._dispatchEvent("changed",this.data))}},{key:"requestMetrics",value:function(){var e={type:"zeus_event",name:"requestViewabilityMetrics",id:window.id};window.parent.postMessage(JSON.stringify(e),"*")}}]),i}(A.a),T=function e(t,i){var n=this;d()(this,e),u()(this,"controller",void 0),u()(this,"view",void 0),u()(this,"_handleMediaEvents",(function(e){var t=n,i=e.target;e.type===f.a.Media.Event.PLAY?window.AdPlaying||window.PlayerState.delayedWaitingState(500):e.type===f.a.Media.Event.PLAYING?(window.PlayerState.state=window.PlayerState.PLAYING,window.AdPlaying||void 0===document.visibilityState||"hidden"!==document.visibilityState||t.controller.pause()):e.type===f.a.Media.Event.PAUSED?window.PlayerState.state=window.PlayerState.PAUSED:e.type===f.a.Media.Event.RESUME||(e.type===f.a.Media.Event.ENDED?(window.PlayerState.state=window.PlayerState.ENDED,window.AdPlaying||t.controller._adEnded()):e.type===f.a.Media.Event.DURATION_CHANGE?window.PlayerState.data.duration=window.ContentPlayer.duration:e.type===f.a.Media.Event.TIME_UPDATE?i.playing&&!i.paused&&(window.PlayerState.state=window.PlayerState.PLAYING,window.PlayerState.data.currentTime=window.ContentPlayer.currentTime,t.controller._onTimeUpdated()):e.type===f.a.Media.Event.LOADED||(e.type===f.a.Media.Event.WAITING?window.AdPlaying?window.PlayerState.state=window.PlayerState.WAITING:window.PlayerState.delayedWaitingState(500):e.type===f.a.Media.Event.MUTED?(window.PlayerSettings.automute=!0,window.PlayerState.data.muted=window.PlayerSettings.automute):e.type===f.a.Media.Event.UNMUTED?(window.PlayerSettings.automute=!1,window.PlayerState.data.muted=window.PlayerSettings.automute):e.type===f.a.Media.Event.VOLUME_CHANGED?(window.PlayerSettings.volume=e.data,window.PlayerState.data.currentVolume=window.PlayerSettings.volume):e.type===f.a.Media.Event.SEEKED&&window.PlayerState.previousState===window.PlayerState.PAUSED&&(window.PlayerState.state=window.PlayerState.previousState)))})),u()(this,"_handleUIEvents",(function(e){var t,i=n,a=window.ContentPlayer;switch(e.type){case f.a.UI.Event.REPLAY:case f.a.UI.Event.PLAYPAUSE:i.controller.togglePlayPause();break;case f.a.UI.Event.TOGGLE_MUTE:if(t=!a.muted,a.mute(t),window.ContentPlayer.mute(t),!1===t&&0===parseFloat(a.volume)){var o=parseFloat(a.volume.toFixed(2));a.setVolume(o||1)}break;case f.a.UI.Event.CHANGE_VOLUME:a.setVolume(e.data),a.mute(0===e.data);break;case f.a.UI.Event.SEEK:i.controller.seek(e.data);break;case f.a.UI.Event.RELATED_VIDEO_SELECTED:a.autoplay=!0,i.controller.relatedVideosHelper.loadSelectedRelatedVideo(e.data);break;case f.a.UI.Event.AGE_GATE_FAILED:window.PlayerState.state=window.PlayerState.AGE_GATE;break;case f.a.UI.Event.IOS_FULLSCREEN_CHANGED:}}));var a=this;a.view=t,a.controller=i,t.addEventListener(f.a.Media.Event.PLAY,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.PLAYING,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.PAUSED,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.RESUME,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.DURATION_CHANGE,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.ENDED,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.TIME_UPDATE,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.LOADED,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.MUTED,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.UNMUTED,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.VOLUME_CHANGED,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.WAITING,a._handleMediaEvents),t.addEventListener(f.a.Media.Event.SEEKED,a._handleMediaEvents),t.addEventListener(f.a.UI.Event.REPLAY,a._handleUIEvents),t.addEventListener(f.a.UI.Event.PLAYPAUSE,a._handleUIEvents),t.addEventListener(f.a.UI.Event.TOGGLE_MUTE,a._handleUIEvents),t.addEventListener(f.a.UI.Event.CHANGE_VOLUME,a._handleUIEvents),t.addEventListener(f.a.UI.Event.SEEK,a._handleUIEvents),t.addEventListener(f.a.UI.Event.RELATED_VIDEO_SELECTED,a._handleUIEvents),t.addEventListener(f.a.UI.Event.AGE_GATE_FAILED,a._handleUIEvents),t.addEventListener(f.a.UI.Event.IOS_FULLSCREEN_CHANGED,a._handleUIEvents)},M=i(4),k=new c.a("CONTENT-HELPER"),L=function(){function e(t){d()(this,e),this.controller=t}return s()(e,[{key:"loadVideoWithQuality",value:function(e,t,i,n){var a=window.ContentPlayer;if(e!==a.currentQuality||i){var o=a.getSource(),d=Object(p.c)(t,o,e);if(d){var r=d.quality,s=d.source;a.fastSeekEnabled=Object(p.a)(s),k.info("old src= ",o," new=",s," quality=",r,"autoplay",n,"fast seek enabled",a.fastSeekEnabled),a.autoplay=n,!0===i?(k.info("loadVideoQuality",{quality:r}),a.currentQuality=r,a.setSource(s),n&&(a.preload(),window.PlayerState.delayedWaitingState(500))):(k.info("loadVideoQuality",{quality:r}),a.setQuality(r,s),window.PlayerState.delayedWaitingState(500)),window.PlayerSettings.defaultHd="hd"===e,window.PlayerView.enableControls(!0)}}else k.info("secleting the same video")}},{key:"loadNewVideo",value:function(e,t){var i=this;window.CurrentVideoConfig=e,window.PlayerView.setPoster(window.CurrentVideoConfig.content.poster);!function(){if(window.CurrentVideoConfig.settings=Object(p.f)(window.CurrentVideoConfig.settings,window.PlayerSettings),Object(h.e)(),window.CurrentVideoConfig.advertising.on&&window.CurrentVideoConfig.advertising.cuepoints&&(window.CurrentVideoConfig.advertising.cuepoints=Object(p.j)(window.CurrentVideoConfig.advertising.cuepoints)),window.Playlist)for(var n=0;n<window.Playlist.length;n++){if(window.Playlist[n].videoId===e.content.videoId){window.CurrentPlaylistIndex=n,k.info("Current playlist index",window.CurrentPlaylistIndex);break}}k.info("Load new video",{config:e}),Object(p.h)(e.content.media,(function(n){void 0!==e.content.media.f4m?(k.info("Processed media",{media:n}),n&&(e.content.media=n)):(e.content.media=n,k.info("Transformed media",{media:e.content.media})),k.info("Media data",{media:e.content.media});var a=window.CurrentVideoConfig.settings.minAge>0;i.loadVideoWithQuality(window.ContentPlayer.currentQuality,e.content.media,!0,!1),a?(Object(M.b)(f.a.UI.POSTER),window.PlayerView.addOnceEventListener(f.a.UI.Event.AGE_GATE_PASSED,(function(){t&&(k.info("Age gate",{val:"passed"}),i.controller.playPrerollAd())})),window.PlayerView.addOnceEventListener(f.a.UI.Event.AGE_GATE_FAILED,(function(){window.PlayerState.state=window.PlayerState.AGE_GATE}))):t&&(k.info("No age-gate"),i.controller.playPrerollAd((function(){window.PlayerState.state=window.PlayerState.START}))),window.AdManagerProxy&&!window.AdManagerProxy.sequentialPrerollAdRequested&&window.ContentPlayer.onVideoConfigChanged()}))}()}},{key:"loadNewVideoConfig",value:function(e,t){window.postCommand(f.a.Message.VIDEO_CONFIG_REQUESTED,{configUrl:e,autoplay:t})}}]),e}(),I=new c.a("RELATED-VIDEOS-HELPER"),O=function(){function e(t){var i=this;d()(this,e),u()(this,"_relatedVideosFetched",(function(e){var t=i;if(e){var n="string"==typeof e?JSON.parse(e):e;window.RelatedVideos=n,window.RelatedVideos.length>0?(t.playerView.setRelatedVideosFetched(!0),t.playerView.setRelatedVideos(window.RelatedVideos),I.debug("Related videos",window.RelatedVideos)):(t._skipRelatedVideos(),I.debug("No related videos found"))}else t._skipRelatedVideos()})),u()(this,"_skipRelatedVideos",(function(){i.playerView.setRelatedVideosFetched(!0),i.playerView.setRelatedVideos(null)})),this.contentHelper=t,this.playerView=window.PlayerView}return s()(e,[{key:"fetch",value:function(){var e=this;window.CurrentVideoConfig.related?e.playerView.isRelatedVideoListFetched()||window.PlayerState.state!==window.PlayerState.PLAYING||(I.info("Fetching related videos"),e.playerView.setRelatedVideosFetched(!0),Object(p.n)({url:window.CurrentVideoConfig.related,method:"get",dataFormat:"json"}).then((function(t){e._relatedVideosFetched(t.data)})).catch(e._skipRelatedVideos)):(e._skipRelatedVideos(),I.debug("No related videos"))}},{key:"shouldAttemptPrefetch",value:function(){this.playerView=window.PlayerView;var e=window.ContentPlayer;if(!window.CurrentVideoConfig.related)return!1;var t=!this.playerView.isRelatedVideoListFetched()&&0!==e.duration&&e.currentTime>e.duration-f.a.UI.RELATED_FETCH_TIME_BEFORE_VID_ENDS;return I.debug("Should attempt prefetching related videos",{value:!!t}),t}},{key:"showRelatedVideosMenu",value:function(){return!!this.playerView.isRelatedVideoListFetched()&&(Array.isArray(window.RelatedVideos)&&window.RelatedVideos.length>0?(I.debug("Show related videos"),this.playerView.showRelatedVideosMenu(),window.PlayerState.state=window.PlayerState.RELATED_VIDEOS):(I.debug("No related videos"),window.PlayerState.state=window.PlayerState.START),!0)}},{key:"loadSelectedRelatedVideo",value:function(e){var t;this.playerView.setRelatedVideosFetched(!1),window.PlayerState.delayedWaitingState(500);for(var i=0;i<window.RelatedVideos.length&&(t=window.RelatedVideos[i]).videoId!==e;i++);I.debug("Related video to load",{videoId:t.videoId}),this.contentHelper.loadNewVideoConfig(t.config,!0)}}]),e}(),V=new c.a("FRAME-PLAYLIST-HELPER"),D=function(){function e(t){d()(this,e),this.contentHelper=t}return s()(e,[{key:"processPlaylist",value:function(){var e=window.Playlist;if(window.CurrentPlaylistIndex<e.length-1){var t=e[++window.CurrentPlaylistIndex],i=!!window.PlayerSettings.playlistPlaythrough;V.info("Process playlist, player settings:",window.PlayerSettings),this.loadPlaylistVideo(t,i)}else window.PlayerState.state=window.PlayerState.ENDED}},{key:"loadPlaylistVideo",value:function(e,t){var i;window.PlayerState.delayedWaitingState(500),V.debug("Load playlist video",e),window.PlayerView.enableControls(!1),(null===(i=window.AdManagerProxy)||void 0===i?void 0:i.sequentialPrerollAdRequested)||window.ContentPlayer.unload(),this.contentHelper.loadNewVideoConfig(e.config,t)}}]),e}(),R=new c.a("CONTROLLER"),N=function(){function e(){var t=this;d()(this,e),u()(this,"viewEventHandler",void 0),u()(this,"contentHelper",void 0),u()(this,"relatedVideosHelper",void 0),u()(this,"playlistHelper",void 0),u()(this,"_shouldRequestPreroll",(function(){return"adsonly"!==window.PlayerSettings.playerType&&!window.DebugMode.noPreroll&&window.AdManagerProxy&&t._prerollEnabled&&window.CurrentVideoConfig.advertising.on&&(window.ContentPlayer.videoPlayCount-1)%window.ContentPlayer.videoAdRatio==0})),u()(this,"_onViewabilityMetricsChanged",(function(e){var i=t,n=e.data,a=window.PlayerSettings.minimumViewability;window.ContentPlayer&&a&&(n.percent<a?window.PlayerState.state!==window.PlayerState.PLAYING||void 0!==i.viewability.docked&&!i.viewability.closeButtonClicked||(R.info("Viewability metrics changed",{msg:"below threshold",action:"pause"}),i.pause()):window.PlayerState.state===window.PlayerState.PAUSED?(R.info("Viewability metrics changed",{msg:"above threshold",action:"resume"}),i.resume()):window.PlayerState.state===window.PlayerState.START&&i.autoplayWhenViewabilityMetricsChanged&&(R.info("Viewability metrics changed",{msg:"above threshold",action:"autoplay"}),i.autoplayWhenViewabilityMetricsChanged=!1,i.playPrerollAd()))})),this.currentVideoConfig=window.CurrentVideoConfig,this.replay=this.replay.bind(this),this.viewability=new S,this.contentHelper=new L(this),this.relatedVideosHelper=new O(this.contentHelper),this.playlistHelper=new D(this.contentHelper)}return s()(e,[{key:"_doStartUp",value:function(){var e=this;window.ContentPlayer.pseudoAdsCuepoints=[],window.ContentPlayer.videoAdRatio=void 0!==e.currentVideoConfig.advertising.videoAdRatio?e.currentVideoConfig.advertising.videoAdRatio:1,window.ContentPlayer.videoPlayCount=1,e.viewEventHandler=new T(window.PlayerView,this),window.readyCallback.call(null,window.ContentPlayer.containerId);!function(){if(window.PlayerSettings.autoplay)if(window.PlayerSettings.minimumViewability){var t=window.PlayerSettings.minimumViewability;e.viewability.addOnceEventListener("changed",(function(i){var n=i.data;n.percent>=t?(R.info("Viewability metrics changed",{msg:"above threshold",action:"play",value:{inView:n.percent,threshold:t}}),window.AdManagerProxy?window.AdManagerProxy.status!==f.a.Message.Ad.REQUESTING&&e.playPrerollAd():e.play()):(R.info("Viewability metrics changed",{msg:"below threshold",action:"Defer autoplay",value:{inView:n.percent,threshold:t}}),window.PlayerState.state=window.PlayerState.START),e.autoplayWhenViewabilityMetricsChanged=!0,e.viewability.addEventListener("changed",e._onViewabilityMetricsChanged)})),e.viewability.requestMetrics()}else e.playPrerollAd();else window.PlayerState.state=window.PlayerState.START,window.PlayerSettings.minimumViewability&&(e.viewability.requestMetrics(),e.viewability.addEventListener("changed",e._onViewabilityMetricsChanged))}()}},{key:"replay",value:function(){var e=window.ContentPlayer;window.AdPlaying||(R.info("Replay content",{title:window.CurrentVideoConfig.settings.title}),e.replay(),e.videoPlayCount++)}},{key:"_onTimeUpdated",value:function(){var e=this,t=window.ContentPlayer;window.PlayerState.state=window.PlayerState.PLAYING;var i=null,n=null,a=!1;if(t.adsCuepoints&&t.adsCuepoints.length>0?(n=t.adsCuepoints,a=!1):t.pseudoAdsCuepoints&&t.pseudoAdsCuepoints.length>0&&(n=t.pseudoAdsCuepoints,a=!0),!window.DebugMode.noMidroll&&n){for(var o=0;o<n.length;o++){if(n[o]<t.currentTime){i=n.shift(),a||t.hitAdCuepoint(i);break}}i&&(e._currentCuepoint=i,R.info("Event CB",{evt:"_onTimeUpdated",value:t.currentTime,data:{cue:i}}),e._playMidrollAd())}t.currentTime>=t.duration-f.a.UI.RELATED_FETCH_TIME_BEFORE_VID_ENDS&&e.relatedVideosHelper.shouldAttemptPrefetch()&&e.relatedVideosHelper.fetch({})}},{key:"seek",value:function(e){var t=window.ContentPlayer;if(!window.AdPlaying){var i=e;if(window.PlayerState.state=window.PlayerState.WAITING,!window.DebugMode.noMidroll&&window.CurrentVideoConfig.advertising.on){var n=t.adsCuepoints;if(n.length>0)for(var a=0;a<n.length;a++){var o=n[a];if(o<e){i=o;break}}}t.seek(i)}}},{key:"_requestAd",value:function(e,t){window.AdManagerProxy.requestAd(e,t,this.adCompleteCallback)}},{key:"adCompleteCallback",value:function(e){var t=this,i=window.AdManagerProxy;if(R.info("Preroll",{func:"finishedCallback",action:"adComplete"}),window.PlayerSettings.adLoop)return R.info("Preroll",{func:"finishedCallback",action:"adLoop"}),void this._requestAd("preroll");if(i.prefetchEnabled){var n=window.CurrentVideoConfig.advertising.cuepoints||[];!window.DebugMode.noMidroll&&n.length>0&&i.prefetchAds("midroll")}window.client.isMobile?setTimeout((function(){"function"==typeof e?e():t.play()}),500):"function"==typeof e?e():i&&"prefetching"!==i.status&&t.play()}},{key:"playPrerollAd",value:function(e){var t=this;window.CurrentVideoConfig.advertising.on||window.postLogMessage("Advertising is disabled for the current video","warn"),window.AdBlockDetected&&(window.AdBlocked.track("preroll"),window.AdManagerProxy||t.play()),t._shouldRequestPreroll()?(R.info("Preroll",{func:"playPrerollAd",action:"request"}),t._requestAd("preroll")):window.client.isMobile?setTimeout((function(){"function"==typeof e?e():t.play()}),500):"function"==typeof e?e():t.play()}},{key:"_shouldRequestMidroll",value:function(e){var t=e.contentPlayer,i=void 0===t?window.ContentPlayer:t,n=e.adMgr,a=void 0===n?window.AdManagerProxy:n;return!window.DebugMode.noMidroll&&a&&window.CurrentVideoConfig.advertising.on&&(i.videoPlayCount-1)%i.videoAdRatio==0}},{key:"_playMidrollAd",value:function(e){var t=window.ContentPlayer,i=window.AdManagerProxy;window.AdBlockDetected&&window.AdBlocked.track("midroll"),this._shouldRequestMidroll({contentPlayer:t,adMgr:i})&&this._requestAd("midroll",e)}},{key:"_adEnded",value:function(){var e=this;if(R.info("AdEnded",{func:"_adEnded",videoPlayCount:window.ContentPlayer.videoPlayCount}),window.PlayerState.state=window.PlayerState.WAITING,window.AdManagerProxy&&!window.AdManagerProxy.sequentialPrerollAdRequested&&window.CurrentVideoConfig.advertising.on&&(window.ContentPlayer.videoPlayCount-1)%window.ContentPlayer.videoAdRatio==0){window.Playlist&&window.CurrentPlaylistIndex!==window.Playlist.length-1?e.playlistHelper.processPlaylist():(window.PlayerState.state=window.PlayerState.WAITING,function(){R.info("AdEnded",{func:"finishedCallback",action:"adComplete"});var t=!1;if(window.Playlist)e.playlistHelper.processPlaylist();else if(window.ContentPlayer.loop?t=!0:(window.client.system.ios&&window.PlayerView.fullscreen&&window.ContentPlayer.video.webkitExitFullscreen(),window.ContentPlayer.show(!1)),t)var i=setTimeout((function(){clearTimeout(i),R.info("AdEnded",{func:"finishedCallback",action:"replay"}),e.playPrerollAd()}),100);else window.CurrentVideoConfig.related?(window.PlayerState.state=window.PlayerState.WAITING,e.relatedVideosHelper.showRelatedVideosMenu()):window.PlayerState.state=window.PlayerState.START}())}else window.Playlist?e.playlistHelper.processPlaylist():window.ContentPlayer.loop?e.play():window.CurrentVideoConfig.related?(window.PlayerState.state=window.PlayerState.WAITING,e.relatedVideosHelper.showRelatedVideosMenu()):window.PlayerState.state=window.PlayerState.START}},{key:"_showHiddenContainer",value:function(){var e=window.PlayerSettings.hiddenContainer||window.PlayerSettings.postAdContainer;e&&(R.info("Showing post content container",{hcId:e}),window.Zeus.dispatchEvent(window.Bolt.BOLT_AD_SESSION_COMPLETE,{hcId:e}))}},{key:"_setSize",value:function(e,t,i){window.PlayerView.size(t,i)}},{key:"play",value:function(){var e=window.ContentPlayer;e&&!e.playing&&(e.hasStarted&&e.paused?this.resume():e.ended?this.replay(e):(window.PlayerState.delayedWaitingState(500),"native"!==e.type&&"hls_xt"!==e.type||e.preload(),e.hlsLoading||e.play(),e.videoPlayCount++,window.Zeus.sessionVideoPlayCount++))}},{key:"pause",value:function(){var e=window.ContentPlayer;if(!e||window.AdPlaying){if("function"!=typeof e.pauseAd)return;e.pauseAd()}window.PlayerState.state=window.PlayerState.PAUSED,e.pause()}},{key:"togglePlayPause",value:function(){var e=this,t=window.ContentPlayer;if(t){if(window.client.isMobile&&!t.hasBeenTouched)try{t.touch()}catch(e){R.warn("Caught Error",{message:e.message,stack:e.stack})}t.hasStarted?t.paused?e.resume():e.pause():window.AdPlaying?e.play():e.playPrerollAd()}}},{key:"resume",value:function(){window.ContentPlayer&&(window.PlayerState.state=window.PlayerState.PLAYING,window.ContentPlayer.resume())}},{key:"stop",value:function(){window.ContentPlayer&&!window.AdPlaying&&window.ContentPlayer.stop()}},{key:"closeButtonClicked",value:function(){this.viewability.closeButtonClicked=!0}},{key:"dockVideo",value:function(){this.viewability.docked=!0}},{key:"undockVideo",value:function(){this.viewability.docked=!1}},{key:"setVolume",value:function(e){window.ContentPlayer&&window.ContentPlayer.setVolume(e)}},{key:"mute",value:function(e){window.ContentPlayer&&window.ContentPlayer.mute(e),window.Zeus.dispatchEvent("updateMuteState",{muted:e})}},{key:"updateViewabilityMetrics",value:function(e){this.viewability.update(e)}},{key:"_onVisibilityChange",value:function(){var e=this,t=window.PlayerState;R.info("Visibility State",{visibilityState:document.visibilityState,playerState:t.state,isAd:window.AdPlaying}),window.AdPlaying||t.state===t.START||("hidden"===document.visibilityState?e.paused||e.pause():t.state===t.PAUSED&&t.previousState===t.PLAYING?e.play():t.state===t.PAUSED&&e.pause())}},{key:"startUp",value:function(){var e=this,t=window.pageViews;window.BENCHMARK.end("bolt_coreJSLoaded_to_controllerStartUp");var i,n=window.PlayerSettings.skips||0;if(e._prerollEnabled=t>n,e._prerollEnabled||window.postLogMessage("Preroll is disabled because the video has been viewed more than ".concat(n," times"),"warn"),window.PlayerSettings.pageviewForAds){i=window.PlayerSettings.pageviewForAds.split(",");for(var a=0;a<i.length;a++)i[a]=parseInt(i[a],10);e._prerollEnabled=i.indexOf(t)>-1}R.info("Preroll",{func:"startUp",data:{enabled:e._prerollEnabled,viewsForAds:i,pageViews:t,pageViewsToSkip:n}}),e._prerollEnabled||"precontent"!==window.PlayerSettings.playerType?(void 0!==document.visibilityState&&document.addEventListener("visibilitychange",(function(){e._onVisibilityChange()}),!1),window.PlayerView.addEventListener(f.a.Player.Event.VIEW_READY,(function(){window.client.showHideIframe&&window.Zeus.dispatchEvent("showiframe"),window.CurrentVideoConfig.settings.minAge>0?(window.PlayerState.state=window.PlayerState.AGE_GATE,window.PlayerView.addOnceEventListener(f.a.UI.Event.AGE_GATE_PASSED,(function(){R.info("Age gate passed"),e._doStartUp()}))):e._doStartUp()})),!0===window.PlayerSettings.adOnly||"adsonly"===window.PlayerSettings.playerType?window.PlayerView.init(!1):window.PlayerView.init(window.CurrentVideoConfig.settings.minAge>0)):e._showHiddenContainer()}}]),e}(),U=i(24),G=i.n(U),H=i(33);var B,x=new c.a("VIEW"),F=window.BENCHMARK,j=function(e){C()(n,e);var t=function(e){function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var i,n=m()(e);if(t()){var a=m()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}(n);function n(e){var i;d()(this,n),i=t.call(this),u()(G()(i),"TINY_PLAYER_MAX_WIDTH",420);var a=G()(i);return i.cssClass=e,i._isReady=!1,i.mouseInput=null,i._volumeControl=null,i._relatedVideoMenu=null,i._content=null,i._prerollScreen=null,i._uiModules=[],i._ageGateHandler=null,i._watermark=null,i._coreModules=["_controlbar","_scrubber"],window.client.isMobile||(i._coreModules.push("_volumeControl"),i._coreModules.push("mouseInput")),i._defaultBoxModel=null,i.fullscreen=!1,i._enableAgeGate=!1,window.addEventListener("resize",(function(){window.PlayerSettings.tinyPlayer=!1,window.innerWidth<=i.TINY_PLAYER_MAX_WIDTH&&(window.PlayerSettings.tinyPlayer=!0);var e=setTimeout((function(){clearTimeout(e),a.invalidate()}),400)})),i.fixedControlbar=!1,i.fixedTitlebar=!1,i.fixedScrubber=!1,i.fixedBottomBar=!1,i}return s()(n,[{key:"enableAgeGate",value:function(e){var t=this;window.PlayerSettings.preview&&(e?window.ContentPlayer&&window.ContentPlayer.playing&&window.ContentPlayer.pause():window.PlayerState.state=window.PlayerState.START),e?t._ageGateHandler?(t._ageGateHandler.invalidate(),t._ageGateHandler.invalidateCookie()):H.a.buildAgeGate((function(e){t._ageGateHandler=e,t._ageGateHandler.addEventListener(f.a.UI.Event.AGE_GATE_PASSED,(function(e){x.debug("Age gate",{passed:!0}),t._dispatchEvent(e.type,e.data)})),t._ageGateHandler.addEventListener(f.a.UI.Event.AGE_GATE_FAILED,(function(e){x.debug("Age gate",{passed:!1}),t._dispatchEvent(e.type)})),t._ageGateHandler.invalidate(),t._ageGateHandler.invalidateCookie(),t._uiModules.push(t._ageGateHandler)})):(t._ageGateHandler?t._ageGateHandler.close():Object(M.b)(f.a.UI.AGE_GATE_LAYER),t._dispatchEvent(f.a.UI.Event.AGE_GATE_PASSED))}},{key:"showRelatedVideosMenu",value:function(){null!==this._relatedVideoMenu&&this._relatedVideoMenu.open()}},{key:"setRelatedVideos",value:function(e){var t=this;e?t._relatedVideoMenu?t._relatedVideoMenu.init(e):H.a.buildRelatedVideos((function(e){t._relatedVideoMenu=e,t._relatedVideoMenu.addEventListener(f.a.UI.Event.RELATED_VIDEO_SELECTED,(function(e){t._dispatchEvent(e.type,e.data)})),t._uiModules.push(t._relatedVideoMenu)}),e):t._relatedVideoMenu&&t._relatedVideoMenu.close()}},{key:"setRelatedVideosFetched",value:function(e){this._relatedVideosFetched=e}},{key:"isRelatedVideoListFetched",value:function(){return this._relatedVideosFetched}},{key:"enableControls",value:function(){}},{key:"toggleFullscreen",value:function(){x.debug("Toggle Fullscreen",{current:this.fullscreen}),this.setFullscreen(!this.fullscreen)}},{key:"setFullscreen",value:function(e){x.info("Set Fullscreen",{value:!!e});!1!==window.PlayerSettings.fullscreen?(this.fullscreenRequested=e,this.fullscreen=e,this._dispatchEvent(f.a.UI.Event.REQUEST_FULLSCREEN_CHANGE,e)):x.warn("Fullscreen is not allowed by the publisher")}},{key:"setCurrentPlayer",value:function(){var e=window.ContentPlayer,t=this;t._handlePlayerEvents=t._handlePlayerEvents.bind(this),e.addEventListener(f.a.Player.Event.CANPLAY,t._handlePlayerEvents),e.addEventListener(f.a.Player.Event.CONTENT_CHANGED,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.PLAY,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.PLAYING,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.DURATION_CHANGE,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.ENDED,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.PAUSED,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.RESUME,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.STOPPED,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.TIME_UPDATE,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.LOAD_PROGRESS,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.WAITING,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.LOAD_START,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.LOADED,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.FIRSTQUARTILE,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.MIDPOINT,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.THIRDQUARTILE,t._handlePlayerEvents),t._onMuted=t._onMuted.bind(this),e.addEventListener(f.a.Media.Event.MUTED,t._onMuted),t._onUnmuted=t._onUnmuted.bind(this),e.addEventListener(f.a.Media.Event.UNMUTED,t._onUnmuted),t._onVolumeChanged=t._onVolumeChanged.bind(this),e.addEventListener(f.a.Media.Event.VOLUME_CHANGED,t._onVolumeChanged),e.addEventListener(f.a.Media.Event.SEEKED,t._handlePlayerEvents),window.PlayerSettings.adOnly||(Object(h.a)(document.body,"bolt-content-on"),Object(h.d)(document.body,"bolt-linear-ad-on"),e.addEventListener(f.a.Ad.Event.CUEPOINT,t._handlePlayerEvents),e.addEventListener(f.a.Player.Event.QUALITY_CHANGED,t._handlePlayerEvents),e.addEventListener(f.a.Player.Event.CONFIG_CHANGED,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.NOT_FOUND,t._handlePlayerEvents),e.addEventListener(f.a.Media.Event.START_TIME_CHANGED,t._handlePlayerEvents),window.client.isMobile||t._volumeControl&&t._volumeControl.setPlayer(e),t.fixedControlbar=!1===window.PlayerSettings.appearance.controlbar.autohide),window.client.isMobile?e.mute(window.PlayerSettings.automute):(window.PlayerSettings.automute?e.setVolume(0):e.setVolume(window.PlayerSettings.volume||1),e.mute(window.PlayerSettings.automute)),t._isReady?(t._dispatchEvent(f.a.UI.Event.PLAYER_CHANGED),t.invalidate()):t._waitForCoreModules()}},{key:"_waitForCoreModules",value:function(){var e=this;x.debug("Core Modules",e._coreModules),B||(B=setInterval((function(){if(e._coreModules.every((function(t){return x.debug("Waiting for module...",t),!!e[t]}))){clearInterval(B),e._isReady=!0,x.debug("View is ready"),window.Skin.style.visibility="visible",e.appearanceManager.updateColors(),e.appearanceManager.updateTextColors();for(var t=0;t<e._uiModules.length;t++){e._uiModules[t].updateAppearance()}e._dispatchEvent(f.a.UI.Event.PLAYER_CHANGED),e.invalidate(),e._dispatchEvent(f.a.Player.Event.VIEW_READY),e.enableAgeGate(e._enableAgeGate)}}),100))}},{key:"_handlePlayerEvents",value:function(e){var t=this,i=window.ContentPlayer,n=f.a.UI;if(e.type===f.a.Player.Event.CONFIG_CHANGED){var a=window.CurrentVideoConfig;x.info("Player config changed",{data:{config:a,newConfig:i.config}}),a.settings.minAge>0?t.enableAgeGate(!0):t.enableAgeGate(!1),Object.keys(a.content.media).length>1?(Object(h.d)(window.Skin,"bolt-hd-disabled"),Object(h.a)(window.Skin,"bolt-hd-enabled")):(Object(h.d)(window.Skin,"bolt-hd-enabled"),Object(h.a)(window.Skin,"bolt-hd-disabled")),Object(M.b)(n.ERROR_CONTAINER)}else e.type===f.a.Media.Event.PLAY?(x.info("Player currently playing",{type:e.type,data:e.data,playerSource:i.getSource()}),window.AdPlaying||F.start("bolt_contentPlayRequested_to_contentPlaying"),t.invalidate()):e.type===f.a.Media.Event.PLAYING?window.AdPlaying||F.end("bolt_contentPlayRequested_to_contentPlaying"):e.type===f.a.Media.Event.PAUSED||(e.type===f.a.Media.Event.RESUME?(x.info("Resume",{playerSource:i.getSource()}),window.AdPlaying||window.client.isMobile&&i.show(!0)):e.type===f.a.Media.Event.STOPPED?x.info("Stopped",{playerSource:i.getSource()}):e.type===f.a.Media.Event.DURATION_CHANGE?x.debug("Duration change",{duration:i.duration,playerSource:i.getSource()}):e.type===f.a.Media.Event.WAITING?x.info("Waiting",{playerSource:i.getSource()}):e.type===f.a.Media.Event.LOAD_PROGRESS||e.type===f.a.Media.Event.TIME_UPDATE||(e.type===f.a.Media.Event.ENDED?window.AdPlaying?x.info("Ended Ad"):x.info("Ended",{playerSource:i.getSource()}):e.type===f.a.Media.Event.START_TIME_CHANGED?x.debug("Start time changed",{playerSource:i.getSource()}):e.type===f.a.Player.Event.CONTENT_CHANGED||e.type===f.a.Media.Event.NOT_FOUND||e.type===f.a.Media.Event.NOT_SUPPORTED&&(window.AdPlaying||t.showError("Media is not supported."))));t._dispatchEvent(e)}},{key:"showError",value:function(e){Object(M.f)(f.a.UI.ERROR_CONTAINER);var t=Object(M.a)(f.a.UI.ERROR_CONTAINER);t&&(t.firstElementChild.textContent=e);Object(M.b)(f.a.UI.LOADING_INDICATOR)}},{key:"init",value:function(e){var t=f.a.UI,n=this,a=window.Skin;a.style.width="100%",a.style.height="100%",n.cssClass&&Object(h.a)(window.Skin,n.cssClass),Object(h.g)(),Object(h.e)(),n._coreModules.push("appearanceManager"),H.a.buildAppearanceManager((function(e){n.appearanceManager=e})),!1===window.PlayerSettings.fullscreen&&(x.info("Fullscreen disabled"),Object(M.d)(t.FULLSCREEN_BTN)),window.PlayerSettings.adOnly?(n.fixedControlbar=!0,Object(h.a)(window.document.body,"bolt-linear-ad-on")):(n._enableAgeGate=e,n.fixedControlbar=!1===window.PlayerSettings.appearance.controlbar.autohide,x.info("Controlbar",{position:"fixed"}),n._coreModules.push("_loadingIndicator"),H.a.buildLoadingIndicator((function(e){n._loadingIndicator=e,n._uiModules.push(e)}))),window.client.isMobile?(n._buildVolumeControl(),Object(h.a)(document.body,"bolt-touch-input")):(n._buildVolumeControl(),i.e(14).then(i.bind(null,52)).then((function(e){var t=e.default;n.mouseInput=new t,n.mouseInput.on(f.a.UI.Event.MOUSE_OUT,(function(){n.onMouseOut(window.Skin)})),n.mouseInput.on(f.a.UI.Event.MOUSE_OVER,(function(){n.onMouseOver(window.Skin)}))})).catch((function(e){x.warn("Caught Error",{message:e.message,stack:e.stack})}))),n._defaultBoxModel={width:a.style.width,height:a.style.height,marginTop:a.style.marginTop,marginLeft:a.style.marginLeft,marginBottom:a.style.marginBottom,marginRight:a.style.marginRight,paddingTop:a.style.paddingTop,paddingLeft:a.style.paddingLeft,paddingBottom:a.style.paddingBottom,paddingRight:a.style.paddingRight,zIndex:a.style.zIndex,position:a.style.position,top:a.style.top,right:a.style.right,bottom:a.style.bottom,left:a.style.left},n._buildContent(),n._buildControlBar(),n._buildScrubber(),n._buildWatermark(),n.setCurrentPlayer()}},{key:"_buildContent",value:function(){var e=this;H.a.buildContent((function(t){e._uiModules.push(t),e._content=t}))}},{key:"_buildVolumeControl",value:function(){var e=this;e._volumeControl||H.a.buildVolume((function(t){e._uiModules.push(t),e._volumeControl=t,e._volumeControl.addEventListener(f.a.VALUE_CHANGED,(function(t){e._dispatchEvent(f.a.UI.Event.CHANGE_VOLUME,t.data)}))}))}},{key:"_buildScrubber",value:function(){var e=this;e._scrubber||H.a.buildScrubber((function(t){e._uiModules.push(t),e._scrubber=t,e._scrubber.on(f.a.UI.Event.SEEK,(function(t){x.info("Event: Seek",{currentTime:t.target._current,maxTime:t.target.max,seekTime:t.target.data,playerId:t.target.player.containerId}),e._dispatchEvent(t)}))}))}},{key:"_buildControlBar",value:function(){var e=this;e._controlbar||H.a.buildControlBar((function(t){e._uiModules.push(t),e._controlbar=t}))}},{key:"_buildPrerollScreen",value:function(){var e=this;e._prerollScreen||H.a.buildPrerollScreen((function(t){e._uiModules.push(t),e._prerollScreen=t}))}},{key:"_isEnabled",value:function(e){return!Object(h.b)(e,f.a.UI.UI_DISABLED_CLASS)}},{key:"_buildWatermark",value:function(){var e=this;H.a.buildWatermark((function(t){e._watermark=t,e._uiModules.push(e._watermark)}))}},{key:"_getModuleForElement",value:function(e){for(var t=0;t<this._uiModules.length;t++){var i=this._uiModules[t];if(i.UI===e)return i}return null}},{key:"size",value:function(e,t){var i=this,n=e,a=t;-1===e.indexOf("%")&&-1===e.indexOf("px")&&(n="".concat(e,"px")),-1===t.indexOf("%")&&-1===t.indexOf("px")&&(a="".concat(t,"px")),i._defaultBoxModel.width=n,i._defaultBoxModel.height=a,i.invalidate()}},{key:"onMouseOver",value:function(e){Object(h.d)(window.Skin,"bolt-mouse-out"),Object(h.a)(window.Skin,"bolt-mouse-over"),this._dispatchEvent(f.a.UI.Event.MOUSE_OVER,null,e)}},{key:"onMouseOut",value:function(e){Object(h.d)(window.Skin,"bolt-mouse-over"),Object(h.a)(window.Skin,"bolt-mouse-out"),this._dispatchEvent(f.a.UI.Event.MOUSE_OUT,null,e)}},{key:"invalidate",value:function(e){var t=this,i=t._uiModules;e&&(e.fullscreen!==t.fullscreen&&(t.fullscreen=e.fullscreen,t.mouseInput&&t.mouseInput.setFullscreen(t.fullscreen),x.debug("Invalidate",{fullscreen:t.fullscreen}),t._controlbar.open()),e.customizer&&t.appearanceManager.update(e.customizer)),t.fixedScrubber?Object(h.a)(window.Skin,"bolt-static-scrubber"):Object(h.d)(window.Skin,"bolt-static-scrubber"),t.fixedControlbar?(t._controlbar.open(),Object(h.a)(window.Skin,"bolt-static-control-bar")):Object(h.d)(window.Skin,"bolt-static-control-bar"),window.ContentPlayer&&window.ContentPlayer.setFullscreen(t.fullscreen);for(var n=0;n<i.length;n++){i[n].invalidate()}!0===t._isReady&&(window.client.browser.ie>0&&window.client.browser.ie<12?(t._controlbar.open(),t._titleBar&&t._titleBar.open()):window.Skin.style.visibility="visible"),Object(h.f)(window.Skin.clientWidth)}},{key:"_onVolumeChanged",value:function(e){void 0===e.data||e.data<0||e.data>1?x.info("Volume changed attempt, failed",{type:e.type,value:e.data}):(x.info("Volume changed",{type:e.type,value:e.data}),void 0!==e.data?this._dispatchEvent(e.type,e.data):x.warn("No volume data"))}},{key:"_onMuted",value:function(e){Object(h.d)(window.Skin,"bolt-automute-disabled"),Object(h.a)(window.Skin,"bolt-automute-enabled"),this._dispatchEvent(e.type)}},{key:"_onUnmuted",value:function(e){Object(h.d)(window.Skin,"bolt-automute-enabled"),Object(h.a)(window.Skin,"bolt-automute-disabled"),this._dispatchEvent(e.type)}},{key:"getAppearanceSettings",value:function(){this.appearanceManager.getInitialSettings()}},{key:"setPoster",value:function(e){this._content.setPoster(e)}}]),n}(A.a),W=i(12),q=new c.a("IFRAME-VIEW-EVENTS"),Q=function(){return Object(W.a)(window.CurrentVideoConfig,{category:window.zeus_ga.category,label:window.zeus_ga.label,isAd:window.AdPlaying})},Y=function(e){e.type,f.a.Media.Event.TIME_UPDATE,e.type===f.a.Player.Event.LOADED?J(e):e.type===f.a.Media.Event.METADATA?z(e):e.type===f.a.Media.Event.PLAY?K(e):e.type===f.a.Media.Event.PLAYING?Z(e):e.type===f.a.Media.Event.STOPPED?X(e):e.type===f.a.Media.Event.PAUSED?$(e):e.type===f.a.Media.Event.RESUME?ee(e):e.type===f.a.Media.Event.ENDED?te(e):e.type===f.a.Ad.Event.CUEPOINT?ie(e):e.type===f.a.Media.Event.FIRSTQUARTILE?ne(e):e.type===f.a.Media.Event.MIDPOINT?ae(e):e.type===f.a.Media.Event.THIRDQUARTILE?oe(e):e.type===f.a.Media.Event.NOT_FOUND?de(e):e.type===f.a.Player.Event.CONFIG_NOT_FOUND?re(e):e.type===f.a.UI.Event.REQUEST_FULLSCREEN_CHANGE?se(e):e.type===f.a.UI.Event.AGE_GATE_PASSED?le(e):e.type===f.a.UI.Event.AGE_GATE_FAILED?ue(e):e.type===f.a.UI.Event.APPEARANCE_SETTINGS_CHANGED?ce(e):e.type===f.a.UI.Event.INITIAL_APPEARANCE_SETTINGS_LOADED?he(e):e.type===f.a.Media.Event.VOLUME_CHANGED?ve(e):e.type===f.a.Media.Event.TIME_UPDATE?we(e):e.type===f.a.Player.Event.CONFIG_CHANGED?ye(e):e.type===f.a.Player.Event.CONTENT_CHANGED&&Ee(e)},J=function(e){window.Bolt.dispatchEvent("playerLoaded",e.data)},z=function(){window.Bolt.dispatchEvent(window.Bolt.BOLT_CONTENT_STATE_CHANGED,{state:"ready"})},K=function(e){var t=window.Bolt,i=Q(),n=i.videoId,a=i.publisherId,o=i.gaCategory,d=i.selectedGALabel;t.dispatchEvent(t.BOLT_CONTENT_STARTED,{videoId:n,publisherId:a,title:window.CurrentVideoConfig.settings.title,duration:window.CurrentVideoConfig.duration}),window.postLogMessage("Content starts"),t.dispatchAnalyticsEvent(t.BOLT_CONTENT_STARTED,o.state,d)},Z=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel;window.videoConfigChanged=!1,t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"playing"}),t.dispatchAnalyticsEvent("playing",n.state,a)},X=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel;t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"stopped"}),t.dispatchAnalyticsEvent("stopped",n.state,a)},$=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel;window.postLogMessage("Content is paused"),t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"paused"}),t.dispatchAnalyticsEvent("paused",n.state,a)},ee=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel;window.postLogMessage("Content is resumed"),t.dispatchEvent(t.BOLT_CONTENT_STATE_CHANGED,{state:"resume"}),t.dispatchAnalyticsEvent("resume",n.state,a)},te=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel,o=i.videoId,d=i.publisherId;window.postLogMessage("Content ends"),t.dispatchEvent(t.BOLT_CONTENT_COMPLETE,{videoId:o,publisherId:d}),t.dispatchAnalyticsEvent(t.BOLT_CONTENT_COMPLETE,n.state,a)},ie=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel;window.postLogMessage("Cuepoint at ".concat(e.data," seconds is hit")),t.dispatchEvent(t.BOLT_AD_CUEPOINT,{cuepoint:e.data}),t.dispatchAnalyticsEvent(t.BOLT_AD_CUEPOINT,n.state,a,e.data)},ne=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel,o=window.AdPlaying?"Ad":"Content";window.postLogMessage("".concat(o," reached first quartile")),t.dispatchAnalyticsEvent(t.BOLT_FIRST_QUARTILE,n.state,a)},ae=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel,o=window.AdPlaying?"Ad":"Content";window.postLogMessage("".concat(o," reached midpoint")),t.dispatchAnalyticsEvent(t.BOLT_MIDPOINT,n.state,a)},oe=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel,o=window.AdPlaying?"Ad":"Content";window.postLogMessage("".concat(o," reached third quartile")),t.dispatchAnalyticsEvent(t.BOLT_THIRD_QUARTILE,n.state,a)},de=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel;t.dispatchEvent(t.BOLT_CONTENT_ERROR),t.dispatchAnalyticsEvent("boltContentNotFound",n.state,a)},re=function(e){var t=window.Bolt,i=Q(),n=i.gaCategory,a=i.selectedGALabel;t.dispatchEvent(t.BOLT_CONTENT_ERROR),t.dispatchAnalyticsEvent("boltConfigNotFound",n.state,a)},se=function(e){window.Bolt.dispatchEvent(e.type,e.data)},le=function(e){var t=window.Bolt;window.CurrentVideoConfig.settings.minAge>0&&(q.info("Age gate",{passed:!0}),t.dispatchEvent(t.BOLT_AGE_GATE_PASSED,e.data))},ue=function(e){var t=window.Bolt;q.info("Age gate",{passed:!1}),t.dispatchEvent(t.BOLT_AGE_GATE_FAILED)},ce=function(e){window.Bolt.dispatchEvent(e.type,e.data)},he=function(e){window.Bolt.dispatchEvent(e.type,e.data)},ve=function(e){var t=window.Bolt;q.info("Volume changed",{value:e.data}),t.dispatchEvent(t.BOLT_VOLUME_CHANGED,e.data)},we=function(e){var t=window.Bolt;t.dispatchEvent(t.BOLT_TIME_CHANGED,e.data)},ye=function(){window.Bolt.dispatchEvent("videoConfigChanged",window.CurrentVideoConfig)},Ee=function(e){window.Bolt.dispatchEvent(f.a.Player.Event.CONTENT_CHANGED,e.data)},fe=new c.a("IFRAME"),pe=function(){function e(){var t=this;d()(this,e),u()(this,"BOLT_CONTENT_STARTED","boltContentStarted"),u()(this,"BOLT_CONTENT_COMPLETE","boltContentComplete"),u()(this,"BOLT_CONTENT_ERROR","boltContentError"),u()(this,"BOLT_CONTENT_STATE_CHANGED","boltContentStateChanged"),u()(this,"BOLT_TOGGLE_FULLSCREEN","boltToggleFullscreen"),u()(this,"BOLT_FIRST_QUARTILE","boltFirstQuartile"),u()(this,"BOLT_MIDPOINT","boltMidPoint"),u()(this,"BOLT_THIRD_QUARTILE","boltThirdQuartile"),u()(this,"BOLT_AD_STARTED","boltAdStarted"),u()(this,"BOLT_AD_IMPRESSION","boltAdImpression"),u()(this,"BOLT_AD_VIDEO_START","boltAdVideoStart"),u()(this,"BOLT_AD_PLAYING","boltAdPlaying"),u()(this,"BOLT_AD_PAUSED","boltAdPaused"),u()(this,"BOLT_AD_COMPLETE","boltAdComplete"),u()(this,"BOLT_AD_ERROR","boltAdError"),u()(this,"BOLT_AGE_GATE_PASSED","boltAgeGatePassed"),u()(this,"BOLT_AGE_GATE_FAILED","boltAgeGateFailed"),u()(this,"BOLT_VOLUME_CHANGED","boltVolumeChanged"),u()(this,"BOLT_AD_SESSION_COMPLETE","boltAdSessionComplete"),u()(this,"BOLT_AD_CUEPOINT","boltAdCuepoint"),u()(this,"BOLT_TIME_CHANGED","boltTimeChanged"),u()(this,"SET_IFRAME_VISIBILITY","boltSetIframeVisibility"),u()(this,"PRE_CONTENT_AD_ERROR","noAdsAvailable"),u()(this,"sessionVideoPlayCount",1),u()(this,"embeds",void 0),u()(this,"Video",void 0),u()(this,"onMediaConfigProcessed",(function(e){var i=t;i.PWBM.end("bolt_coreJSLoaded_to_manifestParsed");var n=window.PlayerSettings,a=n.skin||i._defaultSkin,o=n.css||i._defaultCss,d=n.cssClass;fe.info("Event CB",{evt:"onMediaConfigProcessed",value:e,data:window.CurrentVideoConfig.content.media}),void 0!==window.CurrentVideoConfig.content.media.f4m?e&&(window.CurrentVideoConfig.content.media=e):window.CurrentVideoConfig.content.media=e;var r=f.a.Player.ID_PREFIX+window.id;i._renderVideo(r,a,o,d)}));var i=this;i.PWBM=window.BENCHMARK,i.PWBM.end("bolt_bootCall_to_iframeScriptLoaded"),i.PWBM.start("bolt_iframeScriptLoaded_to_coreJSLoaded"),i.PWBM.start("bolt_coreJSLoaded_to_zeusAvailable"),i.PWBM.start("bolt_coreJSLoaded_to_renderPlayerCall"),i.PWBM.start("bolt_coreJSLoaded_to_initVideoCall"),i.PWBM.start("bolt_coreJSLoaded_to_initAdsCall"),i.PWBM.start("bolt_coreJSLoaded_to_manifestRequested"),i.PWBM.start("bolt_coreJSLoaded_to_manifestLoaded"),i.PWBM.start("bolt_coreJSLoaded_to_manifestParsed"),i.PWBM.start("bolt_coreJSLoaded_to_controllerStartUp"),i.PWBM.start("bolt_coreJSLoaded_to_skinRequested"),window.PlayerState=new E,i.controller=new N,i._isFullscreen=!1,i.playerRendered=!1,i._baseUrl=window.zeusBaseUrl,i._defaultSkin="".concat(i._baseUrl,"/skins/pegasus.html"),i._defaultAdSkin="".concat(i._baseUrl,"/skins/pegasus.html"),i._defaultCss="".concat(i._baseUrl,"/skins/pegasus.css"),i._dispatchTrackingEvent=i._dispatchTrackingEvent.bind(i),i.dispatchEvent=i.dispatchEvent.bind(i),i.dispatchAnalyticsEvent=i.dispatchAnalyticsEvent.bind(i),i.renderPlayer=i.renderPlayer.bind(i),i.setBaseUrl=i.setBaseUrl.bind(i),i.getBaseUrl=i.getBaseUrl.bind(i),i.getCSSUrl=i.getCSSUrl.bind(i),i.initVideo=i.initVideo.bind(i),i.playMedia=i.playMedia.bind(i),i.replayMedia=i.replayMedia.bind(i),i.closeVideo=i.closeVideo.bind(i),i.pauseMedia=i.pauseMedia.bind(i),i.togglePlay=i.togglePlay.bind(i),i.stopMedia=i.stopMedia.bind(i),i.setVolume=i.setVolume.bind(i),i.getVolume=i.getVolume.bind(i),i.muteMedia=i.muteMedia.bind(i),i.unmuteMedia=i.unmuteMedia.bind(i),i.seek=i.seek.bind(i),i.updateViewabilityMetrics=i.updateViewabilityMetrics.bind(i),i.PWBM.end("bolt_iframeScriptLoaded_to_coreJSLoaded"),i.PWBM.end("bolt_coreJSLoaded_to_zeusAvailable"),i.init()}return s()(e,[{key:"init",value:function(){}},{key:"setBaseUrl",value:function(e){this._baseUrl=e,this._defaultSkin="pegasus.html",this._defaultAdSkin="pegasus.html",this._defaultCss="pegasus.css"}},{key:"getBaseUrl",value:function(){return this._baseUrl}},{key:"renderPlayer",value:function(){var e=this;if(!e.playerRendered){e.PWBM.end("bolt_coreJSLoaded_to_renderPlayerCall"),e.playerRendered=!0,window.CurrentVideoConfig.settings=Object(p.f)(window.CurrentVideoConfig.settings,window.PlayerSettings),fe.info("Player settings",{data:window.PlayerSettings});!function(t){if(void 0===t.disabled)e.initVideo();else{var i=document.body;if(void 0!==t.disabled.image&&(i.style.backgroundImage="url('".concat(t.disabled.image,"')")),void 0!==t.disabled.message){var n=document.createElement("div");n.id="disabled-msg",n.innerHTML=t.disabled.message,n.style.fontSize="24px",n.style.backgroundColor="#ffffff",n.style.border="1px solid #000000",n.style.padding="5px",n.style.position="relative",n.style.top="40%",n.style.marginLeft="auto",n.style.marginRight="auto",n.style.textAlign="center",i.appendChild(n)}}}(window.CurrentVideoConfig)}}},{key:"initVideo",value:function(){this.PWBM.end("bolt_coreJSLoaded_to_initVideoCall"),Object(p.h)(window.CurrentVideoConfig.content.media,this.onMediaConfigProcessed)}},{key:"_renderVideo",value:function(e,t,n,a){var o,d=this,r=document.body,s=window.CurrentVideoConfig.settings.defaultHd;if(!0===s?(window.CurrentVideoConfig.content.media.hd&&(o=Object(p.i)(window.CurrentVideoConfig.content.media.hd)),o||(delete window.CurrentVideoConfig.content.media.hd,s=!1,o=Object(p.i)(window.CurrentVideoConfig.content.media.sd))):(window.CurrentVideoConfig.content.media.sd&&(o=Object(p.i)(window.CurrentVideoConfig.content.media.sd)),o||(delete window.CurrentVideoConfig.content.media.sd,s=!0,o=Object(p.i)(window.CurrentVideoConfig.content.media.hd))),window.PlayerSettings.defaultHd=s,o){r.setAttribute("data-default-src",o),d.PWBM.start("bolt_loadCSS_to_CSSLoaded");i.e(8).then(i.t.bind(null,50,7)).then((function(i){d.PWBM.end("bolt_loadCSS_to_CSSLoaded"),d._loadSkin(e,t,a)})).catch((function(e){fe.error("Caught Error",{message:e.message,stack:e.stack})}))}else{var l=document.createElement("p");l.id="err-msg",l.style.color="red",l.style.position="absolute",l.textContent="Media not supported",r.appendChild(l)}}},{key:"_dispatchTrackingEvent",value:function(e){this.dispatchEvent(e.type,e.data)}},{key:"_start",value:function(e){var t=this;if(void 0===window.ContentPlayer)return fe.info("Content player undefined. Unable to start",{videoId:e}),null;if(window.ContentPlayer.show(!1),window.PlayerView.addEventListener(f.a.Media.Event.TIME_UPDATE,Y),window.PlayerView.addEventListener(f.a.Media.Event.METADATA,Y),window.PlayerView.addEventListener(f.a.Media.Event.PLAY,Y),window.PlayerView.addEventListener(f.a.Media.Event.PLAYING,Y),window.PlayerView.addEventListener(f.a.Media.Event.STOPPED,Y),window.PlayerView.addEventListener(f.a.Media.Event.PAUSED,Y),window.PlayerView.addEventListener(f.a.Media.Event.RESUME,Y),window.PlayerView.addEventListener(f.a.Media.Event.ENDED,Y),window.PlayerView.addEventListener(f.a.Media.Event.FIRSTQUARTILE,Y),window.PlayerView.addEventListener(f.a.Media.Event.MIDPOINT,Y),window.PlayerView.addEventListener(f.a.Media.Event.THIRDQUARTILE,Y),window.PlayerView.addEventListener(f.a.Media.Event.VOLUME_CHANGED,Y),window.PlayerView.addEventListener(f.a.Ad.Event.CUEPOINT,Y),window.PlayerView.addEventListener(f.a.Ad.Event.FAILED,Y),window.PlayerView.addEventListener(f.a.Media.Event.NOT_FOUND,Y),window.PlayerView.addEventListener(f.a.Player.Event.CONFIG_NOT_FOUND,Y),window.PlayerView.addEventListener(f.a.UI.Event.REQUEST_FULLSCREEN_CHANGE,Y),window.PlayerView.addEventListener(f.a.UI.Event.AGE_GATE_PASSED,Y),window.PlayerView.addEventListener(f.a.UI.Event.AGE_GATE_FAILED,Y),window.PlayerView.addEventListener(f.a.Player.Event.CONFIG_CHANGED,Y),window.PlayerView.addEventListener(f.a.Player.Event.LOADED,Y),window.PlayerView.addEventListener(f.a.UI.Event.APPEARANCE_SETTINGS_CHANGED,Y),window.PlayerView.addEventListener(f.a.UI.Event.INITIAL_APPEARANCE_SETTINGS_LOADED,Y),window.PlayerView.addEventListener(f.a.Player.Event.CONTENT_CHANGED,Y),window.PlayerView.addEventListener(f.a.Media.Event.PLAY,t._dispatchTrackingEvent),!window.fullscreenEnabled&&window.client.hasTouch&&window.addEventListener("touchmove",(function(e){t._isFullscreen&&(e.preventDefault(),fe.debug("Event CB",{evt:"Touchmove prevented",id:window.id}))})),a()(window.CurrentVideoConfig.settings.googleAnalytics)){var i=window.CurrentVideoConfig.settings.googleAnalytics;fe.debug("Publisher GA Tracking Id",{trackingID:i}),t.dispatchEvent("start_google_analytics",{pubTrackingId:i,universal:window.CurrentVideoConfig.settings.googleUniversal})}return t.controller.startUp(),t.PWBM.end("bolt_coreJSLoaded_to_initAdsCall"),window.id}},{key:"dispatchAnalyticsEvent",value:function(e,t,i,n){i&&this.dispatchEvent("analyticsEvent",{action:e,category:t,label:i,value:n})}},{key:"_removeIosInlineAttribute",value:function(e){e.removeAttribute("muted"),e.removeAttribute("playsinline"),e.muted=!1}},{key:"_onSkinLoaded",value:function(e,t,n){var a=this;a.PWBM.end("bolt_loadSkin_to_skinLoaded");var o,d,r=document.body;e&&(r.insertAdjacentHTML("beforeend",e),function(){var e=document.body.getElementsByClassName("bolt-poster")[0];if(e){var t=Object(p.b)(window.CurrentVideoConfig.content);t&&(e.style.backgroundImage="url(".concat(t,")"),e.style.backgroundPosition="center center",e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat")}}(),d=r.getElementsByClassName("bolt-container")[0],window.Skin=d,d.style.visibility="hidden",(o=Object(M.a)(f.a.UI.MAIN_VIDEO_CONTAINER).firstElementChild).setAttribute("id",t),window.client.system.ios&&window.PlayerSettings.autoplay||a._removeIosInlineAttribute(o),function(){if(window.client.isMobile){var e=function(e){return a.Video=e,window.ContentPlayer=new e(window.id,t,!1),window.ContentPlayer.muted=!!window.PlayerSettings.autoplay,window.ContentPlayer.currentQuality=window.PlayerSettings.defaultHd?"hd":"sd",window.PlayerView=new j(n),a._start(t)};window.client.system.ios?Promise.resolve().then(i.bind(null,35)).then((function(t){var i=t.default;e(i)})).catch((function(e){fe.error("Caught Error",{message:e.message,stack:e.stack})})):Promise.resolve().then(i.bind(null,37)).then((function(t){var i=t.default;e(i)})).catch((function(e){fe.error("Caught Error",{message:e.message,stack:e.stack})}))}else Promise.resolve().then(i.bind(null,38)).then((function(e){var i=e.default;return window.PlayerView=new j(n),a.Video=i,window.ContentPlayer=new i(window.id,t,!1),window.ContentPlayer.muted=!0===window.PlayerSettings.automute,window.ContentPlayer.volume=window.PlayerSettings.volume,0===window.ContentPlayer.volume&&(window.ContentPlayer.muted=!0),window.ContentPlayer.currentQuality=window.PlayerSettings.defaultHd?"hd":"sd",a._start(t)})).catch((function(e){fe.error("Caught Error",{message:e.message,stack:e.stack})}))}())}},{key:"_loadSkin",value:function(e,t,n){var a=this;a.PWBM.end("bolt_coreJSLoaded_to_skinRequested"),a.PWBM.start("bolt_loadSkin_to_skinLoaded"),i.e(8).then(i.t.bind(null,51,7)).then((function(t){var i=t.default;a._onSkinLoaded(i,e,n)}))}},{key:"playMedia",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];window.ContentPlayer&&(!1===e?this.controller.playPrerollAd():this.controller.play())}},{key:"stopMedia",value:function(){this.controller.stop()}},{key:"replayMedia",value:function(){this.controller.replay()}},{key:"closeVideo",value:function(){this.controller.closeVideo()}},{key:"pauseMedia",value:function(){this.controller.pause()}},{key:"closeButtonClicked",value:function(){this.controller.closeButtonClicked()}},{key:"dockVideo",value:function(){this.controller.dockVideo()}},{key:"undockVideo",value:function(){this.controller.undockVideo()}},{key:"muteMedia",value:function(){this.controller.mute(!0)}},{key:"unmuteMedia",value:function(){this.controller.mute(!1)}},{key:"togglePlay",value:function(){this.controller.togglePlayPause()}},{key:"seek",value:function(e){this.controller.seek(e)}},{key:"setVolume",value:function(e){e>1?e=1:e<0&&(e=0),this.controller.setVolume(e)}},{key:"getVolume",value:function(){if(window.ContentPlayer)return window.ContentPlayer.volume}},{key:"getCSSUrl",value:function(){return this._defaultCss}},{key:"setVideoConfig",value:function(e,t){this.controller.contentHelper.loadNewVideo(e,t)}},{key:"dispatchEvent",value:function(e,t){var i=!1;try{i=window.AdPlaying}catch(e){}var n={type:"zeus_event",name:e,id:window.id,isAd:i,data:t};window.parent.postMessage(JSON.stringify(n),window.boltBaseUrl||"*")}},{key:"updateViewabilityMetrics",value:function(e){this.controller.updateViewabilityMetrics(e)}}]),e}()}}]);